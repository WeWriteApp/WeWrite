# WeWrite

**A social wiki where every page you write is a fundraiser.**

WeWrite transforms knowledge sharing into a collaborative economy where writers earn direct USD payments from their contributions and readers support creators with transparent monthly funding.

## üåê Connect With Us

- **üîó [Bento](https://bento.me/wewrite)** - All our links in one place
- **üì∏ [Instagram](https://www.instagram.com/getwewrite/)** - Behind the scenes and updates
- **üé• [YouTube](https://www.youtube.com/@WeWriteApp)** - Tutorials and feature demos
- **üê¶ [Twitter](https://twitter.com/getwewrite)** - Real-time updates and community
- **üí¨ [Discord](https://discord.gg/wewrite)** - Join our community discussions

## ‚ú® What Makes WeWrite Special

- **üìù Collaborative Writing** - Create and edit pages together
- **üí∞ Direct USD Payments** - Support creators with transparent monthly funding
- **üîó Smart Linking** - Connect ideas across the platform
- **üåô Beautiful Interface** - Clean, modern design with dark mode
- **üîí Secure & Private** - Your data is protected and encrypted

## üöÄ Quick Start

WeWrite is built with [Next.js](https://nextjs.org/) and uses modern web technologies for optimal performance.

### Prerequisites

- **Node.js** 18+
- **pnpm** (preferred package manager)

### Installation

```bash
# Install pnpm if you don't have it
npm install -g pnpm

# Clone the repository
git clone https://github.com/WeWriteApp/WeWrite.git
cd WeWrite

# Install dependencies
pnpm install

# Set up environment variables
cp .env.example .env.local
# Edit .env.local with your configuration

# Run the development server
pnpm dev
```

Open [http://localhost:3000](http://localhost:3000) to see WeWrite in action! üéâ

## üìö Documentation

**üìã [COMPLETE DOCUMENTATION INDEX](docs/DOCUMENTATION_INDEX.md)** - **üóÇÔ∏è NAVIGATION HUB**: Complete guide to all WeWrite documentation

### üÜï Recent Changes (Start Here for 2025 Updates)

- **[SAVE_SYSTEM_RELIABILITY_ARCHITECTURE](docs/SAVE_SYSTEM_RELIABILITY_ARCHITECTURE.md)** - **üÜï 2025**: Critical save system fixes, caching overhaul, and PWA update system
- **[RECENT_CHANGES_SUMMARY](docs/RECENT_CHANGES_SUMMARY.md)** - **üÜï 2025**: Quick overview of major changes and what patterns to avoid
- **[EMERGENCY_COST_OPTIMIZATION_SUMMARY](EMERGENCY_COST_OPTIMIZATION_SUMMARY.md)** - **üö® CRITICAL**: Firebase cost optimization and real-time listener cleanup

### üîí Security & Core Systems (Essential Reading)

- **[USERNAME_SECURITY_GUIDELINES](docs/USERNAME_SECURITY_GUIDELINES.md)** - **üîí CRITICAL**: Prevent email exposure vulnerabilities
- **[VERSION_SYSTEM](docs/VERSION_SYSTEM.md)** - **ESSENTIAL**: Unified version system for page edit tracking
- **[AUTHENTICATION_ARCHITECTURE](docs/AUTHENTICATION_ARCHITECTURE.md)** - Environment-specific authentication rules
- **[USER_DATA_FETCHING_PATTERNS](docs/USER_DATA_FETCHING_PATTERNS.md)** - Standardized patterns for secure user data handling

### üí∞ Storage Balance Payout System

WeWrite uses **Stripe's Storage Balance** system combined with the innovative **"Use It or Lose It"** model for perfect fund separation and enhanced auditability.

#### **How It Works:**
- **Payments Balance** = Platform Revenue (yours to keep)
- **Storage Balance** = Creator Obligations (escrowed by Stripe)
- **"Use It or Lose It"** = Unallocated funds become platform revenue

#### **Key Benefits:**
- ‚úÖ **Perfect Fund Separation** in Stripe dashboard
- ‚úÖ **Stripe-Managed Auditability** for regulatory compliance
- ‚úÖ **Enhanced Creator Trust** through visible escrow
- ‚úÖ **Automated Monthly Payouts** from Storage Balance
- ‚úÖ **Maintained Innovation** with "use it or lose it" engagement

#### **Documentation:**
- **[STORAGE_BALANCE_GUIDE](docs/STORAGE_BALANCE_GUIDE.md)** - **üÜï CURRENT**: Complete Storage Balance system guide
- **[STRIPE_DASHBOARD_QUICK_REFERENCE](docs/STRIPE_DASHBOARD_QUICK_REFERENCE.md)** - **üÜï CURRENT**: Quick reference for Stripe dashboard
- **[PAYOUT_SYSTEM_DOCUMENTATION](docs/PAYOUT_SYSTEM_DOCUMENTATION.md)** - Complete payout system documentation
- **[USD_MIGRATION_GUIDE](docs/USD_MIGRATION_GUIDE.md)** - USD migration guide and architecture
- **[SUBSCRIPTION_SYSTEM](docs/SUBSCRIPTION_SYSTEM.md)** - Complete subscription architecture and implementation
- **[PAYMENT_FLOW_TESTING_GUIDE](docs/PAYMENT_FLOW_TESTING_GUIDE.md)** - Comprehensive payment testing procedures
- **[ENHANCED_PAYMENT_ERROR_MESSAGING](docs/ENHANCED_PAYMENT_ERROR_MESSAGING.md)** - User-friendly payment error handling
- **[PAYMENT_FAILURE_TRACKING](docs/PAYMENT_FAILURE_TRACKING.md)** - Payment failure audit and tracking system
- **[SUBSCRIPTION_TROUBLESHOOTING](docs/SUBSCRIPTION_TROUBLESHOOTING.md)** - Common payment issues and solutions
- **[PLATFORM_FEE_MANAGEMENT_SYSTEM](docs/PLATFORM_FEE_MANAGEMENT_SYSTEM.md)** - Platform fee configuration and management
- **[EMBEDDED_BANK_ACCOUNT_MANAGEMENT](docs/EMBEDDED_BANK_ACCOUNT_MANAGEMENT.md)** - Bank account setup and management
- **[PAYOUT_TROUBLESHOOTING_GUIDE](docs/PAYOUT_TROUBLESHOOTING_GUIDE.md)** - Payout system troubleshooting
- **[WEBHOOK_SETUP_GUIDE](docs/WEBHOOK_SETUP_GUIDE.md)** - Stripe webhook configuration

### üèóÔ∏è Architecture & Environment

- **[CONTENT_DISPLAY_ARCHITECTURE](docs/CONTENT_DISPLAY_ARCHITECTURE.md)** - **üÜï 2025**: Unified content display system architecture
- **[CONTENT_DISPLAY_MIGRATION_GUIDE](docs/CONTENT_DISPLAY_MIGRATION_GUIDE.md)** - **üÜï 2025**: Migration guide for content display refactoring
- **[CONTENT_DISPLAY_REFACTORING_SUMMARY](docs/CONTENT_DISPLAY_REFACTORING_SUMMARY.md)** - **üÜï 2025**: Complete refactoring summary and benefits
- **[ENVIRONMENT_ARCHITECTURE](docs/ENVIRONMENT_ARCHITECTURE.md)** - Multi-environment setup and configuration
- **[ENVIRONMENT_QUICK_REFERENCE](docs/ENVIRONMENT_QUICK_REFERENCE.md)** - Quick environment configuration reference
- **[FIREBASE_MIGRATION_ARCHITECTURE](docs/FIREBASE_MIGRATION_ARCHITECTURE.md)** - Firebase project migration architecture
- **[SIMPLIFIED_ACTIVITY_SYSTEM](docs/SIMPLIFIED_ACTIVITY_SYSTEM.md)** - Activity tracking using recent pages
- **[SESSION_MANAGEMENT_ARCHITECTURE](docs/SESSION_MANAGEMENT_ARCHITECTURE.md)** - Session management and authentication
- **[DEPENDENCY_MANAGEMENT_STANDARDS](docs/DEPENDENCY_MANAGEMENT_STANDARDS.md)** - Package management standards
- **[ARCHITECTURE_SIMPLIFICATION](docs/ARCHITECTURE_SIMPLIFICATION.md)** - System architecture improvements

### üé® User Interface & Experience

- **[SETTINGS_NAVIGATION_SYSTEM](docs/SETTINGS_NAVIGATION_SYSTEM.md)** - User settings navigation and organization
- **[SETTINGS_PAYMENT_REORGANIZATION](docs/SETTINGS_PAYMENT_REORGANIZATION.md)** - Payment settings UI improvements
- **[BORDER_STYLING_GUIDELINES](docs/BORDER_STYLING_GUIDELINES.md)** - UI border styling standards
- **[DOM_ELEMENT_IDENTIFIERS](docs/DOM_ELEMENT_IDENTIFIERS.md)** - Standardized DOM element identification
- **[LINE_BASED_EDITOR](docs/LINE_BASED_EDITOR.md)** - Rich text editor implementation
- **[LINK_CURSOR_BEHAVIOR](docs/LINK_CURSOR_BEHAVIOR.md)** - Link interaction and cursor behavior
- **[SEARCH_SYSTEM](docs/SEARCH_SYSTEM.md)** - Search functionality and implementation

### ‚ö° Performance & Optimization

- **[EMERGENCY_COST_OPTIMIZATION_SUMMARY](EMERGENCY_COST_OPTIMIZATION_SUMMARY.md)** - **üö® CRITICAL**: Firebase cost optimization and real-time listener cleanup
- **[PERFORMANCE_OPTIMIZATION_SUMMARY](docs/PERFORMANCE_OPTIMIZATION_SUMMARY.md)** - System performance improvements
- **[DATABASE_SCHEMA_OPTIMIZATION_GUIDE](docs/DATABASE_SCHEMA_OPTIMIZATION_GUIDE.md)** - Database optimization strategies
- **[FIREBASE_INDEX_OPTIMIZATION](docs/FIREBASE_INDEX_OPTIMIZATION.md)** - Firestore index optimization

### üõ†Ô∏è Development & Maintenance

- **[LEGACY_CODE_CLEANUP_GUIDE](docs/LEGACY_CODE_CLEANUP_GUIDE.md)** - **ESSENTIAL**: Identifying and removing deprecated patterns
- **[DEPRECATED_UI_PATTERNS](docs/DEPRECATED_UI_PATTERNS.md)** - **üÜï 2025**: UI patterns that must be removed during cleanup
- **[AUTH_CLEANUP_GUIDE](docs/AUTH_CLEANUP_GUIDE.md)** - Authentication system cleanup procedures
- **[DEVELOPMENT_AUTH_GUIDE](docs/DEVELOPMENT_AUTH_GUIDE.md)** - Development authentication setup
- **[PRODUCTION_DEPLOYMENT_GUIDE](docs/PRODUCTION_DEPLOYMENT_GUIDE.md)** - Production deployment procedures
- **[AUTOMATED_ROUTE_TESTING](docs/AUTOMATED_ROUTE_TESTING.md)** - Automated testing procedures
- **[ADMIN_ACCOUNT_SETUP](docs/ADMIN_ACCOUNT_SETUP.md)** - Admin account configuration
- **[SUBSCRIPTION_QUICK_REFERENCE](docs/SUBSCRIPTION_QUICK_REFERENCE.md)** - Quick reference for subscription system

## üõ†Ô∏è Technology Stack

### Core Technologies

- **‚öõÔ∏è [Next.js 14](https://nextjs.org/)** - React framework with App Router
- **üî• [Firebase](https://firebase.google.com/)** - Backend-as-a-Service platform
- **üé® [Tailwind CSS](https://tailwindcss.com/)** - Utility-first CSS framework
- **üìù [Slate.js](https://slatejs.org/)** - Customizable rich text editor framework
- **üí≥ [Stripe](https://stripe.com/)** - Payment processing and subscriptions

### Firebase Services

- **üóÑÔ∏è Firestore** - NoSQL document database for pages, users, and versions
- **üîê Authentication** - Email/password authentication with session management
- **‚òÅÔ∏è Functions** - Serverless functions for webhooks and background processing
- **üìÅ Storage** - File storage for images and attachments

### Development & Deployment

- **üì¶ [pnpm](https://pnpm.io/)** - Fast, disk space efficient package manager
- **üöÄ [Vercel](https://vercel.com/)** - Deployment platform with automatic CI/CD
- **üìä [LogRocket](https://logrocket.com/)** - Session replay and error tracking
- **üîç [TypeScript](https://www.typescriptlang.org/)** - Type-safe JavaScript development

### Key Features

- **üåô Dark Mode** - System-aware theme switching
- **üì± Responsive Design** - Mobile-first responsive interface
- **üîó Smart Linking** - Automatic page linking and backlinks
- **üí∞ USD Creator Support** - Direct USD payments to creators with transparent monthly funding
- **üîí Security** - Comprehensive security measures and data protection

## üìÅ Project Structure

```
WeWrite/
‚îú‚îÄ‚îÄ app/                    # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ api/               # API routes and endpoints
‚îÇ   ‚îú‚îÄ‚îÄ auth/              # Authentication pages
‚îÇ   ‚îú‚îÄ‚îÄ components/        # Reusable UI components
‚îÇ   ‚îú‚îÄ‚îÄ contexts/          # React contexts for global state
‚îÇ   ‚îú‚îÄ‚îÄ hooks/             # Custom React hooks
‚îÇ   ‚îú‚îÄ‚îÄ lib/               # Utility libraries and helpers
‚îÇ   ‚îú‚îÄ‚îÄ providers/         # Context providers
‚îÇ   ‚îú‚îÄ‚îÄ settings/          # User settings pages
‚îÇ   ‚îî‚îÄ‚îÄ utils/             # Utility functions
‚îú‚îÄ‚îÄ docs/                  # Technical documentation
‚îú‚îÄ‚îÄ public/                # Static assets
‚îî‚îÄ‚îÄ functions/             # Firebase Cloud Functions
```

### Key Directories

- **`app/`** - Next.js 14 App Router with file-based routing
- **`app/components/`** - Reusable UI components organized by feature
- **`app/api/`** - API routes for backend functionality
- **`docs/`** - Comprehensive technical documentation
- **`functions/`** - Firebase Cloud Functions for webhooks and background tasks

## üöÄ Deployment

### Automatic Deployment

WeWrite uses Vercel for automatic deployment:

- **Production**: Deploys from `main` branch to [wewrite.app](https://wewrite.app)
- **Preview**: Deploys from `dev` branch for testing
- **Environment Variables**: Configured in Vercel dashboard

### Local Development Environment

WeWrite uses **branch-aware environment detection** for local development:

- **Main branch** (`main`): Uses **production collections** - connects to real data
- **Dev branch** (`dev`): Uses **dev collections** (`DEV_*` prefix) - isolated test data
- **Other branches**: Uses **dev collections** (safe default) - isolated test data

This ensures you can test against production data when needed (main branch) while keeping development work safely isolated (dev branch).

### Manual Deployment

```bash
# Build for production
pnpm build

# Deploy to Vercel
pnpm deploy
```

For detailed deployment procedures, see [PRODUCTION_DEPLOYMENT_GUIDE](docs/PRODUCTION_DEPLOYMENT_GUIDE.md).

## ü§ù Contributing

We welcome contributions! Please see our contributing guidelines:

1. **Fork the repository**
2. **Create a feature branch** (`git checkout -b feature/amazing-feature`)
3. **Follow our coding standards** (see documentation)
4. **Write tests** for new functionality
5. **Submit a pull request**

### Development Guidelines

- **Security First**: Follow [USERNAME_SECURITY_GUIDELINES](docs/USERNAME_SECURITY_GUIDELINES.md)
- **Clean Code**: Use [LEGACY_CODE_CLEANUP_GUIDE](docs/LEGACY_CODE_CLEANUP_GUIDE.md)
- **Testing**: Write comprehensive tests for all features
- **Documentation**: Update docs for any new features or changes

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üí¨ Support

- **üìß Email**: [support@wewrite.app](mailto:support@wewrite.app)
- **üí¨ Discord**: [Join our community](https://discord.gg/wewrite)
- **üêõ Issues**: [GitHub Issues](https://github.com/WeWriteApp/WeWrite/issues)
- **üìñ Documentation**: [docs/](docs/) directory

---

**Made with ‚ù§Ô∏è by the WeWrite team**
