/**
 * WeWrite Editor Styles - Clean Slate.js Edition
 *
 * Clean, modern styles for the Slate.js-based editor.
 * Removed all legacy contentEditable styles that were causing conflicts.
 *
 * Key Features:
 * - Slate.js editor styling
 * - Link pill styling for view mode
 * - Clean, minimal approach
 * - No legacy contentEditable conflicts
 */

/* ============================================================================
   SLATE EDITOR STYLES
   ============================================================================ */

/* Slate editor container */
.slate-editor {
  width: 100%;
  max-width: none;
  margin: 0;
  padding: 1rem;
  box-sizing: border-box;
  font-family: inherit;
  font-size: 1rem;
  line-height: 1.5;
  color: inherit;
  background: transparent;
}

/* Slate editable area */
.slate-editor [data-slate-editor] {
  outline: none;
  min-height: 200px;
}

/* Slate paragraph styling - match view mode spacing for consistency */
.slate-editor div[data-slate-node="element"] {
  margin-bottom: 1rem;
}

/* ============================================================================
   LINK PILL STYLING (VIEW MODE)
   ============================================================================ */

/* Base pill link styling - applies to all pill links */
.page-link,
.user-link,
.external-link {
  display: inline-block;
  vertical-align: baseline;
  text-decoration: none;
  border-radius: 0.5rem;
  padding: 0.125rem 0.5rem;
  margin: 0 0.125rem;
  font-size: 0.875rem;
  font-weight: 500;
  white-space: nowrap;
  transition: all 0.2s ease;
}

/* NOTE: Page links, user links, and external links are now styled by the PillLink
   component using PillStyleContext. These classes are kept for backwards compatibility
   but should not override the component's Tailwind-based hover styles.

   The PillLink component uses:
   - hover:scale-[1.05] for scale animation
   - hover:shadow-sm/md for shadow effects
   - hover:[background-image:var(--alpha-10-gradient)] for filled pills
   - hover:bg-accent-10 for outline pills
   - hover:underline for text-only pills
*/

/* Legacy fallback styles - only apply if not using data-pill-style attribute */
.page-link:not([data-pill-style]),
.user-link:not([data-pill-style]),
.external-link:not([data-pill-style]) {
  background-color: oklch(var(--primary));
  color: oklch(var(--primary-foreground));
}

.page-link:not([data-pill-style]):hover,
.user-link:not([data-pill-style]):hover,
.external-link:not([data-pill-style]):hover {
  background-color: oklch(var(--primary) / 0.8);
}

/* User link styles - no @ symbol prefix (users are identified by tier badge instead) */

/* ============================================================================
   COMPOUND LINK STYLING
   ============================================================================ */

/* Compound link container - use inline-flex for proper alignment */
.compound-link-container {
  display: inline-flex;
  align-items: center;
  white-space: nowrap;
}

/* Compound link parts */
.compound-link-container .page-portion,
.compound-link-container .author-portion {
  margin: 0 0.125rem;
}

/* "by" text in compound links */
.compound-link-container .text-muted-foreground {
  margin: 0 0.125rem;
  padding: 0;
  white-space: nowrap;
}

/* ============================================================================
   PARAGRAPH STYLING
   ============================================================================ */

/* Unified paragraph styling - consistent 1rem spacing to match edit mode */
.unified-paragraph {
  display: flex;
  align-items: baseline;
  margin-bottom: 1rem;
  line-height: 1.5;
}

/* No-line-numbers class no longer needs different spacing since base is now 1rem */
.unified-paragraph.no-line-numbers {
  /* Same as base - keeping for backwards compatibility */
  margin-bottom: 1rem;
}

/* Paragraph number */
.paragraph-number {
  font-family: monospace;
  font-size: 0.75rem;
  color: oklch(var(--muted-foreground));
  margin-right: 0.75rem;
  flex-shrink: 0;
  user-select: none;
}

/* Text content area */
.unified-text-content {
  flex: 1;
  min-width: 0;
  /* Ensure proper text color inheritance */
  color: oklch(var(--foreground));
}

/* CRITICAL FIX: Target text spans but EXCLUDE pill links which have their own styling */
/* Pill links use [data-pill-style] attribute and need to control their own text color */
/* Using :not() to exclude pill link elements and their children */
.wewrite-viewable-content .unified-text-content {
  color: oklch(var(--foreground));
}

/* Also target any other content containers */
.page-content .unified-text-content,
.unified-editor .unified-text-content {
  color: oklch(var(--foreground));
}

/* Dense paragraph content styling */
.dense-paragraph-content {
  /* Ensure proper text color in dense mode */
  color: oklch(var(--foreground));
}

/* Fix text color in dense mode */
.dense-mode .unified-text-content {
  color: oklch(var(--foreground));
}

/* IMPORTANT: Pill links control their own text color via Tailwind classes */
/* Ensure pill link text inherits from the pill, not from parent containers */
[data-pill-style] {
  /* Pill links have their text color set via Tailwind (!text-white or !text-black) */
  /* This rule ensures children inherit from the pill, not from .unified-text-content */
}

[data-pill-style] .pill-text,
[data-pill-style] span {
  color: inherit !important;
}

/* ============================================================================
   RESPONSIVE DESIGN
   ============================================================================ */

@media (max-width: 768px) {
  .slate-editor {
    padding: 0.5rem;
  }

  .paragraph-number {
    margin-right: 0.5rem;
  }

  .page-link,
  .user-link,
  .external-link {
    font-size: 0.8rem;
    padding: 0.1rem 0.4rem;
  }
}

/* ============================================================================
   FOCUS STATES
   ============================================================================ */

/* Focus ring for accessibility - only for legacy elements not using PillLink */
/* PillLink uses Tailwind's focus-visible:ring-2 focus-visible:ring-accent classes */
.page-link:not([data-pill-style]):focus,
.user-link:not([data-pill-style]):focus,
.external-link:not([data-pill-style]):focus {
  outline: 2px solid oklch(var(--primary));
  outline-offset: 2px;
}

/* Slate editor focus */
.slate-editor [data-slate-editor]:focus {
  outline: none;
}

/* ============================================================================
   UTILITY CLASSES
   ============================================================================ */

/* Text alignment */
.text-left { text-align: left; }
.text-center { text-align: center; }
.text-right { text-align: right; }

/* Spacing utilities */
.mb-0 { margin-bottom: 0; }
.mb-1 { margin-bottom: 0.25rem; }
.mb-2 { margin-bottom: 0.5rem; }
.mb-3 { margin-bottom: 0.75rem; }
.mb-4 { margin-bottom: 1rem; }

/* Display utilities */
.inline { display: inline; }
.inline-block { display: inline-block; }
.block { display: block; }
.flex { display: flex; }

/* Vertical alignment */
.align-baseline { vertical-align: baseline; }
.align-top { vertical-align: top; }
.align-middle { vertical-align: middle; }
.align-bottom { vertical-align: bottom; }
