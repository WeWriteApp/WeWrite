/* CENTRALIZED PILL LINK STYLING
 * This is the single source of truth for pill link styling in WeWrite
 * All components should import and use these styles
 *
 * IMPORTANT: To ensure consistent link appearance between edit and view modes:
 * 1. Do NOT use !important flags to override these styles
 * 2. Both ReplyEditor.js and PillLink.js must use the same styling approach
 * 3. Always respect the user's pill style preference from PillStyleContext
 */

/* Base link styling for non-pill links */
.editor-link:not(.page-link):not(.user-link):not(.external-link),
[data-slate-editor] a:not(.page-link):not(.user-link):not(.external-link):not(.slate-pill-link) {
  color: var(--primary);
  text-decoration: none;
  transition: all 0.2s ease;
}

/*
 * SLATE EDITOR PILL LINKS
 * These styles ensure Slate editor links use the same styling as regular pill links
 * The slate-pill-link class is added to all links in the Slate editor
 */

/* Reset any default Slate editor link styles */
[data-slate-editor] a.slate-pill-link {
  text-decoration: none;
  text-indent: 0 !important; /* Prevent text-indent inheritance from paragraph */
  padding-left: 0 !important; /* Prevent padding inheritance from paragraph */
  display: inline-flex !important; /* Ensure proper display */
  float: none !important; /* Prevent float inheritance */
  align-items: center !important; /* Ensure proper vertical alignment */
  vertical-align: baseline !important; /* Ensure proper baseline alignment */
  line-height: 1.2 !important; /* Ensure consistent line height */
}

/* Add @ symbol before user links */
.user-link::before,
a.user-link::before,
[data-user-id]::before,
a[data-user-id]::before {
  content: '@';
  opacity: 0.7;
  margin-right: 1px;
}

/*
 * HOVER STATES FOR PILL LINKS
 * These styles apply to all pill links across the application
 * They respect the pill style (filled, outline, classic)
 */

/* Filled style hover */
a[data-pill-style="filled"].page-link:hover,
a[data-pill-style="filled"].user-link:hover,
a[data-pill-style="filled"].external-link:hover {
  background-color: var(--primary-hover, rgba(23, 104, 255, 0.9));
  border-color: var(--primary-translucent, rgba(23, 104, 255, 0.3));
}

/* Outline style hover */
a[data-pill-style="outline"].page-link:hover,
a[data-pill-style="outline"].user-link:hover,
a[data-pill-style="outline"].external-link:hover {
  background-color: var(--primary-translucent, rgba(23, 104, 255, 0.1));
  border-color: var(--primary-translucent, rgba(23, 104, 255, 0.6));
}

/* Classic style hover */
a[data-pill-style="classic"].page-link:hover,
a[data-pill-style="classic"].user-link:hover,
a[data-pill-style="classic"].external-link:hover {
  text-decoration: underline;
}

/* Dark mode adjustments */
@media (prefers-color-scheme: dark) {
  a[data-pill-style="filled"].page-link,
  a[data-pill-style="filled"].user-link,
  a[data-pill-style="filled"].external-link {
    border-color: rgba(var(--accent-color-rgb, 23, 104, 255), 0.3);
  }
}

/* Ensure pill links are properly displayed in paragraphs */
.paragraph-with-number a,
.paragraph-with-number a.slate-pill-link,
.paragraph-with-number a.page-link,
.paragraph-with-number a.user-link,
.paragraph-with-number a.external-link {
  text-indent: 0 !important;
  padding-left: 0 !important;
  display: inline-flex !important;
  float: none !important;
  vertical-align: middle !important;
}

/* Allow pill links to display full text when space permits */
.pill-text {
  display: inline;
  white-space: nowrap;
  width: fit-content;
  min-width: fit-content;
  max-width: none; /* Remove width constraints */
  overflow: visible; /* Ensure text is not clipped */
  text-overflow: clip; /* Don't add ellipsis unless necessary */
  line-height: inherit; /* Inherit line height from parent */
  flex: none; /* Prevent flex from affecting size */
}

/* Ensure pill links stay inline and use available space efficiently */
a.slate-pill-link,
a.page-link,
a.user-link,
a.external-link {
  white-space: nowrap !important;
  box-sizing: border-box !important;
  min-height: 1.5rem !important; /* Ensure minimum height for pill appearance */
  width: fit-content !important;
  min-width: fit-content !important;
  max-width: none !important;
  flex: none !important;
}

/* Ensure pill links have proper containment */
a.slate-pill-link *,
a.page-link *,
a.user-link *,
a.external-link * {
  box-sizing: border-box;
}

/* Force proper pill link rendering */
a.slate-pill-link,
a.page-link,
a.user-link,
a.external-link {
  position: relative !important;
  z-index: 1 !important;
  isolation: isolate !important;
}

/* Ensure pill text content is always visible */
.pill-text {
  position: relative !important;
  z-index: 2 !important;
  pointer-events: none !important; /* Allow clicks to pass through to parent link */
}
