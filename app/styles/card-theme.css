/**
 * WeWrite Card Theme CSS
 * 
 * This file contains the CSS custom properties and classes for our
 * centralized card theme system. It provides consistent styling for
 * all card components across the application.
 * 
 * Based on Radix Colors design principles with semantic color tokens.
 */

/* ===== CARD THEME CSS VARIABLES ===== */

:root {
  /* Dynamic card opacity - default 15% */
  --card-opacity: 0.15;

  /* Dynamic card blur - default 50% */
  --card-blur: 0.5;

  /* Light theme card variables - these are set by NeutralColorContext, don't override here */
  /* --card-bg is dynamically set by NeutralColorContext using neutral colors */
  /* --card-bg-hover is dynamically set by NeutralColorContext */
  --card-border: oklch(0.00% 0.0000 0.0 / 0.1); /* Slightly stronger border for better definition */
  --card-border-hover: oklch(0.00% 0.0000 0.0 / 0.15);
  --card-text: oklch(16.39% 0.1306 274.7);
  --card-text-muted: oklch(48.70% 0.1396 267.5);
}

.dark {
  /* Dark theme card variables - these are set by NeutralColorContext, don't override here */
  /* --card-bg is dynamically set by NeutralColorContext using neutral colors */
  /* --card-bg-hover is dynamically set by NeutralColorContext */
  --card-border: oklch(100.00% 0.0000 158.2 / 0.08);
  --card-border-hover: oklch(100.00% 0.0000 158.2 / 0.12);
  --card-text: oklch(98.27% 0.0000 158.2);
  --card-text-muted: oklch(68.12% 0.0000 158.2);
}

/* ===== UNIVERSAL CARD SYSTEM ===== */

/**
 * Universal WeWrite Card
 *
 * ONE card class for ALL components. This provides:
 * - Semi-transparent white overlay that adapts to any background
 * - Glassmorphism effect with backdrop blur
 * - Future-proof for custom background colors/images
 * - Consistent borders and shadows across light/dark themes
 * - Responsive hover states and accessibility support
 *
 * Design Philosophy: Cards are always lighter overlays on top of the background,
 * making them work beautifully with any background color or image.
 *
 * Use this class for ALL cards: daily notes, recent edits, content cards, etc.
 */
.wewrite-card {
  /* Semi-transparent white overlay with conditional glassmorphism */
  background-color: var(--card-bg);

  /* Backdrop filters using separate blur and opacity controls */
  backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 80%)) brightness(calc(1 + var(--card-opacity) * 0.1));
  -webkit-backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 80%)) brightness(calc(1 + var(--card-opacity) * 0.1));

  /* Subtle, theme-aware borders */
  border: 1px solid var(--card-border);

  /* Text color */
  color: var(--card-text);

  /* Standard styling */
  border-radius: 1rem;
  padding: 1rem;
  transition: all 0.2s ease-in-out;

  /* Subtle card shadows */
  box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
}

.wewrite-card:hover {
  background-color: var(--card-bg-hover);
  border-color: var(--card-border-hover);
  /* Enhanced hover shadow */
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  /* Enhanced backdrop filters on hover with increased blur */
  backdrop-filter: blur(calc(var(--card-blur) * 24px)) saturate(calc(100% + var(--card-opacity) * 80%)) brightness(calc(1 + var(--card-opacity) * 0.15));
  -webkit-backdrop-filter: blur(calc(var(--card-blur) * 24px)) saturate(calc(100% + var(--card-opacity) * 80%)) brightness(calc(1 + var(--card-opacity) * 0.15));
}

.dark .wewrite-card {
  /* Dark mode shadows */
  box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
}

.dark .wewrite-card:hover {
  /* Dark mode hover shadow */
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.4);
}

/* ===== CARD MODIFIERS ===== */

/**
 * Opacity modifiers - card-n system
 *
 * Usage: Add card-n class to any wewrite-card element
 * Examples:
 *   - card-1 = 1% opacity (most transparent)
 *   - card-15 = 15% opacity (default)
 *   - card-80 = 80% opacity (solid but slightly transparent)
 *   - card-100 = 100% opacity (fully opaque)
 *
 * Perfect for modals, overlays, and varying card transparency needs.
 */
.wewrite-card.card-1 { --card-opacity: 0.01; }
.wewrite-card.card-5 { --card-opacity: 0.05; }
.wewrite-card.card-10 { --card-opacity: 0.10; }
.wewrite-card.card-15 { --card-opacity: 0.15; }
.wewrite-card.card-20 { --card-opacity: 0.20; }
.wewrite-card.card-25 { --card-opacity: 0.25; }
.wewrite-card.card-30 { --card-opacity: 0.30; }
.wewrite-card.card-35 { --card-opacity: 0.35; }
.wewrite-card.card-40 { --card-opacity: 0.40; }
.wewrite-card.card-45 { --card-opacity: 0.45; }
.wewrite-card.card-50 { --card-opacity: 0.50; }
.wewrite-card.card-55 { --card-opacity: 0.55; }
.wewrite-card.card-60 { --card-opacity: 0.60; }
.wewrite-card.card-65 { --card-opacity: 0.65; }
.wewrite-card.card-70 { --card-opacity: 0.70; }
.wewrite-card.card-75 { --card-opacity: 0.75; }
.wewrite-card.card-80 { --card-opacity: 0.80; }
.wewrite-card.card-85 { --card-opacity: 0.85; }
.wewrite-card.card-90 { --card-opacity: 0.90; }
.wewrite-card.card-95 { --card-opacity: 0.95; }
.wewrite-card.card-100 { --card-opacity: 1.00; }

/**
 * Corner radius modifiers
 * Use these to customize border radius while keeping all other card properties
 */
.wewrite-card.wewrite-card-sharp {
  border-radius: 0;
}

.wewrite-card.wewrite-card-rounded-sm {
  border-radius: 0.25rem; /* 4px */
}

.wewrite-card.wewrite-card-rounded {
  border-radius: 0.5rem; /* 8px */
}

.wewrite-card.wewrite-card-rounded-lg {
  border-radius: 0.75rem; /* 12px */
}

.wewrite-card.wewrite-card-rounded-xl {
  border-radius: 1rem; /* 16px - default */
}

.wewrite-card.wewrite-card-rounded-2xl {
  border-radius: 1.5rem; /* 24px */
}

/**
 * Border modifiers
 * Use these to customize borders while keeping all other card properties
 */
.wewrite-card.wewrite-card-border-none {
  border: none;
}

.wewrite-card.wewrite-card-border-top {
  border: none;
  border-top: 1px solid var(--card-border);
}

.wewrite-card.wewrite-card-border-bottom {
  border: none;
  border-bottom: 1px solid var(--card-border);
}

.wewrite-card.wewrite-card-border-x {
  border: none;
  border-left: 1px solid var(--card-border);
  border-right: 1px solid var(--card-border);
}

.wewrite-card.wewrite-card-border-y {
  border: none;
  border-top: 1px solid var(--card-border);
  border-bottom: 1px solid var(--card-border);
}

/**
 * Padding modifiers
 * Use these to customize padding while keeping all other card properties
 */
.wewrite-card.wewrite-card-no-padding {
  padding: 0;
}

.wewrite-card.wewrite-card-padding-sm {
  padding: 0.5rem; /* 8px */
}

.wewrite-card.wewrite-card-padding-lg {
  padding: 1.5rem; /* 24px */
}

.wewrite-card.wewrite-card-padding-xl {
  padding: 2rem; /* 32px */
}

/* ===== TEXT UTILITY CLASSES ===== */

.wewrite-card-text {
  color: var(--card-text);
}

.wewrite-card-text-muted {
  color: var(--card-text-muted);
}

/* ===== CARD VARIANTS ===== */

/**
 * Card variants for specific use cases
 * All inherit from .wewrite-card base styling
 */

/* Daily notes cards - flex layout with enhanced glassmorphism */
.wewrite-card.wewrite-daily-notes {
  display: flex;
  flex-direction: column;
  min-height: 13rem; /* h-52 */

  /* FIXED: Use consistent blur variable instead of opacity-based calculation */
  backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 100%));
  -webkit-backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 100%));

  /* Enhanced shadows for better depth */
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
}

.dark .wewrite-card.wewrite-daily-notes {
  /* Enhanced blur and shadow for daily notes cards in dark mode - use consistent blur variable */
  backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 100%));
  -webkit-backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 100%));
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.4);
}

/* Floating cards - enhanced shadows and glassmorphism */
.wewrite-card.wewrite-floating {
  /* Enhanced floating card shadows */
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  /* Add glassmorphism blur for light mode too */
  backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 100%));
  -webkit-backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 100%));
}

.dark .wewrite-card.wewrite-floating {
  /* FIXED: Use consistent blur variable instead of opacity-based calculation */
  backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 100%));
  -webkit-backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 100%));
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.4);
}

/* ===== RESPONSIVE ADJUSTMENTS ===== */

@media (max-width: 768px) {
  .wewrite-card {
    padding: 0.75rem;
  }
}

@media (min-width: 1024px) {
  .wewrite-card:hover:not([role="dialog"]):not([data-modal-content]):not([aria-modal="true"] *) {
    transform: translateY(-1px);
  }
}

/* Prevent card hover transforms within modal contexts to fix positioning issues */
[role="dialog"] .wewrite-card:hover,
[aria-modal="true"] .wewrite-card:hover {
  transform: none !important;
}

/* ===== HIGH CONTRAST MODE SUPPORT ===== */

html[data-high-contrast="true"] .wewrite-card {
  border-width: 1px;
  border-color: var(--card-text);
}

html[data-high-contrast="true"] .wewrite-card-text-muted {
  color: var(--card-text);
}
