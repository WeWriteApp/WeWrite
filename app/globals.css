@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import our centralized card theme system */
@import './styles/card-theme.css';

/* Import allocation bar animations */
@import './styles/allocation-bar-animations.css';

/* Fixed layer tokens and utilities */
@import './styles/fixed-layer.css';

/* Import unified content display styles */
@import './styles/content-display.css';

/* Clean paragraph styling for viewer content */
.viewer-paragraph {
  @apply flex items-start gap-3 py-2;
}

.viewer-paragraph.dense-paragraph {
  @apply inline-block mr-4;
}

.viewer-paragraph.dense-paragraph .paragraph-number {
  @apply mr-3;
}

.viewer-paragraph.normal-paragraph {
  @apply block;
}

.viewer-paragraph .paragraph-number {
  @apply text-xs text-muted-foreground font-mono min-w-[2rem] text-right select-none;
}

.viewer-paragraph .paragraph-content {
  @apply flex-1 leading-relaxed text-foreground;
}

.viewer-text-content {
  @apply text-foreground;
}

.viewer-pill-link {
  @apply inline-flex items-center;
  /* Links in viewer are not editable, just navigable */
}

.dense-content-flow {
  @apply leading-relaxed;
}

.normal-content-flow {
  @apply space-y-3;
}

/* REMOVED: Legacy slate-editor-container styles - using clean Slate.js now */

/* Custom slider styles for subscription tier selector */
.slider {
  -webkit-appearance: none;
  appearance: none;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  height: 20px;
  width: 20px;
  border-radius: 50%;
  background: #3b82f6;
  cursor: pointer;
  border: 2px solid #ffffff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.slider::-moz-range-thumb {
  height: 20px;
  width: 20px;
  border-radius: 50%;
  background: #3b82f6;
  cursor: pointer;
  border: 2px solid #ffffff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Downgrade slider styles (yellow for downgrades) */
.slider-downgrade::-webkit-slider-thumb {
  background: #eab308;
}

.slider-downgrade::-moz-range-thumb {
  background: #eab308;
}

/* Cancellation slider styles (red for cancellation) */
.slider-cancellation::-webkit-slider-thumb {
  background: #ef4444;
}

.slider-cancellation::-moz-range-thumb {
  background: #ef4444;
}

/* Custom amount button animation */
@keyframes slide-in-from-right {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-in {
  animation-fill-mode: both;
}

.slide-in-from-right-2 {
  animation: slide-in-from-right 0.3s ease-out;
}

/* Custom xs breakpoint utilities for mobile optimization */
@media (min-width: 475px) {
  .xs\:inline { display: inline; }
  .xs\:hidden { display: none; }
}

/* Comprehensive zoom prevention for mobile devices */
@media screen and (max-width: 768px) {
  /* Prevent all zoom gestures while preserving scrolling */
  * {
    touch-action: pan-x pan-y;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Allow text selection on content areas */
  p, h1, h2, h3, h4, h5, h6, span, div[contenteditable],
  .editor-content, .page-content, .editable-container {
    -webkit-user-select: text;
    -khtml-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
    touch-action: pan-x pan-y;
  }

  /* Interactive elements need manipulation for proper touch handling */
  input, textarea, select, button, a, [role="button"], [tabindex] {
    font-size: 16px !important; /* Prevent zoom on input focus */
    touch-action: manipulation;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    pointer-events: auto; /* Ensure buttons are clickable */
  }

  /* Special handling for range sliders - they need manipulation touch action */
  input[type="range"], .mobile-slider-input {
    touch-action: manipulation !important;
    pointer-events: auto !important;
    user-select: none !important;
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
  }

  /* Allow text selection in input fields */
  input[type="text"], input[type="email"], input[type="password"],
  input[type="search"], textarea {
    -webkit-user-select: text;
    -khtml-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
  }

  /* Scrollable containers should allow panning but prevent zoom */
  .scroll-container, .overflow-auto, .overflow-x-auto, .overflow-y-auto {
    touch-action: pan-x pan-y;
  }

  /* Support for browsers that don't support zoom property */
  body {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    touch-action: pan-x pan-y;
    overflow-x: hidden; /* Prevent horizontal scroll that can interfere with touch */
  }

  /* Prevent zoom on common interactive elements */
  .wewrite-card, .modal, .dropdown, .menu {
    touch-action: pan-x pan-y;
  }

  /* Editor-specific zoom prevention */
  .wewrite-editor-container, [data-slate-editor], .simple-editor {
    touch-action: pan-x pan-y;
  }

  /* Prevent zoom on images and media */
  img, video, canvas, svg {
    touch-action: pan-x pan-y;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Prevent zoom on code blocks and pre-formatted text */
  pre, code, .code-block {
    touch-action: pan-x pan-y;
  }

  /* Ensure modals and overlays prevent zoom */
  .modal, .overlay, .dropdown-menu, .popover {
    touch-action: pan-x pan-y;
  }

  /* Ensure allocation bar buttons are always interactive */
  [data-allocation-bar] button,
  [data-allocation-bar] [role="button"],
  [data-allocation-bar] .btn,
  [data-allocation-bar] .button {
    pointer-events: auto !important;
    touch-action: manipulation !important;
    cursor: pointer !important;
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
    user-select: none !important;
  }

  /* Ensure allocation bar container is interactive */
  [data-allocation-bar] {
    pointer-events: auto !important;
    touch-action: pan-x pan-y !important;
  }

  /* Ensure allocation bar cards are interactive */
  [data-allocation-bar] .wewrite-card {
    pointer-events: auto !important;
  }

  /* Hide specific container while preserving children visibility */
  body > div.flex.min-h-screen > div.flex-1.min-w-0 > div > main > div > div > div.w-full.max-w-none.box-border > div > div.mt-4 > div > div {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    /* Keep layout and text properties intact */
    display: inherit !important;
    position: inherit !important;
    width: inherit !important;
    height: inherit !important;
    margin: inherit !important;
    padding: inherit !important;
  }

  /* Reset any inherited transparency for children - be very specific */
  body > div.flex.min-h-screen > div.flex-1.min-w-0 > div > main > div > div > div.w-full.max-w-none.box-border > div > div.mt-4 > div > div > * {
    opacity: 1 !important;
    visibility: visible !important;
  }

  /* Specifically restore text visibility for all text elements - EXCLUDE paragraph numbers */
  body > div.flex.min-h-screen > div.flex-1.min-w-0 > div > main > div > div > div.w-full.max-w-none.box-border > div > div.mt-4 > div > div span:not(.paragraph-number),
  body > div.flex.min-h-screen > div.flex-1.min-w-0 > div > main > div > div > div.w-full.max-w-none.box-border > div > div.mt-4 > div > div button,
  body > div.flex.min-h-screen > div.flex-1.min-w-0 > div > main > div > div > div.w-full.max-w-none.box-border > div > div.mt-4 > div > div div:not(.paragraph-number) {
    color: revert !important;
  }

  /* Override any global pointer-events: none for pledge bar elements */
  [data-pledge-bar] * {
    pointer-events: auto !important;
  }


}

/* Ensure paragraph numbers have correct styling with higher specificity for all screen sizes */
body .paragraph-number {
  color: hsl(var(--muted-foreground));
  font-weight: 400;
  opacity: var(--paragraph-number-opacity);
  font-size: 1em; /* Same size as body text */
}

/* Normal mode: Add space after paragraph numbers */
.normal-mode .paragraph-number {
  margin-right: 0.75rem;
}

/* Dense mode: Reduce space after and add space before paragraph numbers */
.dense-mode-container .paragraph-number {
  margin-left: 0.5rem;
  margin-right: 0.25rem;
}

/* First paragraph number in dense mode shouldn't have left margin */
.dense-mode-container .paragraph-number:first-of-type {
  margin-left: 0;
}

/* Mobile optimizations for dense mode */
@media (max-width: 767px) {
  /* Ensure dense mode paragraphs display inline on mobile */
  .viewer-paragraph.dense-paragraph {
    @apply inline-block mr-4;
    /* Force inline-block display on mobile */
    display: inline-block !important;
  }

  /* Ensure proper spacing for dense mode paragraph numbers on mobile */
  .viewer-paragraph.dense-paragraph .paragraph-number {
    @apply mr-3;
    /* Maintain proper spacing on mobile */
    margin-right: 0.75rem !important;
  }

  /* Ensure dense content flows properly on mobile */
  .dense-content-flow {
    @apply leading-relaxed;
    /* Maintain proper line height on mobile */
    line-height: 1.625 !important;
    /* Ensure dense content container allows inline flow on mobile */
    display: block !important;
    width: 100% !important;
  }

  /* Prevent mobile from breaking dense mode layout */
  .viewer-paragraph.dense-paragraph .paragraph-content {
    @apply inline;
    /* Ensure content stays inline on mobile */
    display: inline !important;
  }

  /* Additional mobile dense mode fixes with higher specificity */
  .viewer-paragraph.dense-paragraph,
  .wewrite-viewer-paragraph.dense {
    /* Force inline-block with higher specificity */
    display: inline-block !important;
    margin-right: 1rem !important;
    vertical-align: top !important;
    /* Allow normal text wrapping but maintain inline-block structure */
    white-space: normal !important;
  }

  /* Ensure content within dense paragraphs displays inline */
  .viewer-paragraph.dense-paragraph .paragraph-content,
  .wewrite-viewer-paragraph.dense .paragraph-content {
    display: inline !important;
  }
}

/* Global zoom prevention (applies to all screen sizes) */
html {
  /* Prevent zoom via CSS zoom property */
  zoom: 1 !important;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Prevent zoom on focus for all input types */
input, textarea, select {
  /* Ensure font size is large enough to prevent iOS zoom */
  font-size: max(16px, 1rem) !important;
}

/* Exception: Allow title textarea to use its specified font size */
textarea.text-2xl {
  font-size: 1.5rem !important; /* text-2xl equivalent */
  line-height: 1.2 !important; /* Consistent line-height for title inputs */
}

/* Global pledge bar button interactivity (all screen sizes) */
[data-pledge-bar] button,
[data-pledge-bar] [role="button"],
[data-pledge-bar] .btn,
[data-pledge-bar] .button {
  pointer-events: auto !important;
  touch-action: manipulation !important;
  cursor: pointer !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
}

/* Global range slider interactivity (all screen sizes) */
input[type="range"],
.mobile-slider-input {
  pointer-events: auto !important;
  touch-action: manipulation !important;
  cursor: pointer !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
}

/* Range slider thumb interactivity */
input[type="range"]::-webkit-slider-thumb,
.mobile-slider-input::-webkit-slider-thumb {
  pointer-events: auto !important;
  touch-action: manipulation !important;
  cursor: pointer !important;
}

input[type="range"]::-moz-range-thumb,
.mobile-slider-input::-moz-range-thumb {
  pointer-events: auto !important;
  touch-action: manipulation !important;
  cursor: pointer !important;
}

/* Global pledge bar container interactivity */
[data-pledge-bar] {
  pointer-events: auto !important;
  touch-action: pan-x pan-y !important;
}

/* Override any global pointer-events: none for pledge bar elements */
[data-pledge-bar] * {
  pointer-events: auto !important;
}

/* Mobile-specific allocation bar optimizations */
@media (max-width: 767px) {
  /* Ensure allocation bar fits within mobile viewport with proper spacing */
  [data-component="allocation-bar-card"] {
    max-width: calc(100vw - 16px) !important; /* Account for proper padding */
    margin-left: auto !important;
    margin-right: auto !important;
  }

  /* Optimize button touch targets on mobile */
  [data-allocation-bar] button {
    min-height: 40px !important; /* Ensure good touch target size */
    min-width: 40px !important;
  }

  /* Ensure horizontal layout is maintained on mobile */
  [data-allocation-bar] .flex.items-center {
    flex-direction: row !important; /* Force horizontal layout */
    flex-wrap: nowrap !important;
  }

  /* STRIPE LINK MOBILE OPTIMIZATION: Fix height observer clipping */
  .p-HeightObserverProvider {
    height: auto !important;
    min-height: auto !important;
    max-height: none !important;
  }

  .p-HeightObserverProvider-container {
    height: auto !important;
    min-height: auto !important;
    max-height: none !important;
    overflow: visible !important;
  }

  /* Ensure Stripe Link autofill prompt wraps properly */
  .p-ReturnAutofillPrompt {
    max-width: 100% !important;
    width: 100% !important;
    box-sizing: border-box !important;
  }

  /* Fix Stripe Link dropdown positioning on mobile */
  .p-ReturnAutofillPrompt-manageDropdown {
    position: absolute !important;
    right: 0 !important;
    top: 100% !important;
    max-width: calc(100vw - 32px) !important;
  }



  /* Stripe Elements - Simple responsive styling */
  .StripeElement,
  .__PrivateStripeElement {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
  }



  /* Ensure Stripe tabs don't overflow on mobile */
  .p-Tabs,
  .p-TabList {
    max-width: 100% !important;
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }

  /* Fix Stripe payment method tabs on mobile */
  .p-Tab {
    min-width: auto !important;
    flex-shrink: 0 !important;
    white-space: nowrap !important;
  }

  /* Ensure composition bar takes available space */
  [data-pledge-bar] .flex-1 {
    min-width: 0 !important; /* Allow flex item to shrink */
  }

  /* Ensure text remains readable on mobile */
  [data-pledge-bar] .text-xs {
    font-size: 0.75rem !important; /* 12px */
  }

  [data-pledge-bar] .text-sm {
    font-size: 0.875rem !important; /* 14px */
  }

  /* Prevent horizontal overflow on mobile */
  [data-pledge-bar] {
    overflow-x: hidden !important;
  }

  /* Ensure token text is properly sized on mobile */
  [data-pledge-bar] .text-center span {
    word-break: break-word !important;
    hyphens: none !important;
  }

  /* Ensure token allocation bar is properly sized on mobile */
  [data-component="token-allocation-bar"] {
    min-height: 40px !important;
  }

  /* Prevent unnecessary hyphenation in titles and headings */
  h1, h2, h3, h4, h5, h6,
  .card-title,
  [class*="title"],
  [class*="heading"] {
    hyphens: none !important;
    /* Only allow hyphenation for extremely long words that would overflow */
    overflow-wrap: break-word;
    word-break: normal;
  }

  /* Allow hyphenation only for very long single words as absolute last resort */
  h1, h2, h3, h4, h5, h6,
  .card-title,
  [class*="title"],
  [class*="heading"] {
    /* Use manual hyphenation only when a single word exceeds container width */
    word-break: break-word;
    hyphens: manual;
  }

  /* Utility classes for hyphenation control */
  .hyphens-none {
    hyphens: none !important;
  }

  .hyphens-manual {
    hyphens: manual !important;
  }

  .hyphens-auto {
    hyphens: auto !important;
  }

  .word-break-normal {
    word-break: normal !important;
  }

  .word-break-break-word {
    word-break: break-word !important;
  }

  .overflow-wrap-break-word {
    overflow-wrap: break-word !important;
  }

  /* Ensure proper spacing between elements on mobile */
  [data-component="token-allocation-controls"] {
    gap: 0.5rem !important; /* 8px gap on mobile */
  }

  /* Ensure pledge bar content has adequate padding on mobile */
  [data-pledge-bar] {
    padding: 0 !important; /* No padding on mobile */
  }
}

/* Additional zoom prevention for WebKit browsers */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  input, textarea, select {
    font-size: 16px !important;
  }
}

/* Basic responsive styles */
@media (max-width: 640px) {
  /* Only target specific page content elements, not the main container */
  .unified-editor .page-content,
  .editor-content .page-content {
    width: 100%;
    max-width: 100%;
    overflow-wrap: break-word;
    margin-left: 0 !important;
    margin-right: 0 !important;
    box-sizing: border-box !important;
  }

  /* Ensure text doesn't overflow - but preserve title hyphenation rules */
  p, span, div {
    max-width: 100%;
    overflow-wrap: break-word;
    word-break: break-word;
  }

  /* EXCEPTION: Dense mode paragraphs should maintain normal word breaking */
  .viewer-paragraph.dense-paragraph,
  .viewer-paragraph.dense-paragraph p,
  .viewer-paragraph.dense-paragraph span,
  .viewer-paragraph.dense-paragraph div {
    word-break: normal !important;
    overflow-wrap: normal !important;
  }

  /* Headings get special treatment to prevent unnecessary hyphenation */
  h1, h2, h3, h4, h5, h6 {
    max-width: 100%;
    overflow-wrap: break-word;
    word-break: normal; /* Don't break words unless absolutely necessary */
    hyphens: none; /* No automatic hyphenation */
  }

  /* Ensure all containers respect mobile width */
  * {
    max-width: 100%;
    box-sizing: border-box;
  }

  /* Prevent horizontal scrolling */
  html, body {
    overflow-x: hidden;
  }

  /* ADDED: Ensure all content containers are properly sized on mobile */
  .unified-editor,
  .editor-content,
  .unified-paragraph,
  .unified-text-content {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    overflow-wrap: break-word !important;
    word-break: break-word !important;
  }
}

/* Note: All link styling is now centralized in app/components/editor-styles.css */
/* This ensures consistent styling across the entire application */
/* Import editor-styles.css in components that need pill link styling */

/* UsernameBadge specific styling - ensure proper colors for subscription status */
.username-badge-link {
  text-decoration: none !important;
}

.username-badge-link.text-primary,
.username-badge-link:has(.text-primary) {
  color: hsl(var(--primary)) !important;
}

.username-badge-link.text-muted-foreground,
.username-badge-link:has(.text-muted-foreground) {
  color: hsl(var(--muted-foreground)) !important;
}

/* Custom Spinner Animation */
.loader {
  color: hsl(var(--primary)); /* Blue in light mode (from primary color) */
  font-size: 10px;
  width: 1em;
  height: 1em;
  border-radius: 50%;
  position: relative;
  text-indent: -9999em;
  animation: mulShdSpin 1.3s infinite linear;
  transform: translateZ(0);
}

/* Larger version of the loader */
.loader-lg {
  font-size: 14px; /* Slightly smaller than before */
}

/* Medium version of the loader */
.loader-md {
  font-size: 10px; /* Smaller size as per user preference */
}

/* Small version of the loader */
.loader-sm {
  font-size: 6px;
}

/* Theme-specific loader colors */
.loader {
  color: hsl(var(--primary)); /* Blue in light mode (from primary color) */
}

.dark .loader {
  color: white; /* White in dark mode as per user preference */
}

/* iOS-compatible keyboard toolbar styles - base styles applied inline */

/* Dark mode adjustments */
.dark .ios-keyboard-toolbar {
  --toolbar-bg: rgba(0, 0, 0, 0.95);
  --border-color: rgba(255, 255, 255, 0.1);
}

/* REMOVED: Legacy editor container - use wewrite-editor-container instead */

/* Seamless view/edit mode transitions - now handled by unified styling in editor-styles.css */
.page-editor-stable,
[data-slate-editor] {
  box-sizing: border-box;
}

/* Make sure the editor content is visible */
.editable-container {
  min-height: 200px;
}

@keyframes mulShdSpin {
  0%,
  100% {
    box-shadow: 0 -3em 0 0.2em,
    2em -2em 0 0em, 3em 0 0 -1em,
    2em 2em 0 -1em, 0 3em 0 -1em,
    -2em 2em 0 -1em, -3em 0 0 -1em,
    -2em -2em 0 0;
  }
  12.5% {
    box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em,
    3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em,
    -2em 2em 0 -1em, -3em 0 0 -1em,
    -2em -2em 0 -1em;
  }
  25% {
    box-shadow: 0 -3em 0 -0.5em,
    2em -2em 0 0, 3em 0 0 0.2em,
    2em 2em 0 0, 0 3em 0 -1em,
    -2em 2em 0 -1em, -3em 0 0 -1em,
    -2em -2em 0 -1em;
  }
  37.5% {
    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em,
     3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em,
     -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;
  }
  50% {
    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em,
     3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em,
     -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;
  }
  62.5% {
    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em,
     3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0,
     -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;
  }
  75% {
    box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em,
    3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em,
    -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;
  }
  87.5% {
    box-shadow: 0em -3em 0 0, 2em -2em 0 -1em,
    3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em,
    -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;
  }
}

/* Spring animation keyframes for feature cards */
@keyframes spring-in {
  0% {
    opacity: 0;
    transform: scale(0.8) translateY(20px);
  }
  60% {
    opacity: 1;
    transform: scale(1.05) translateY(-5px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

@keyframes spring-out {
  0% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
  100% {
    opacity: 0;
    transform: scale(0.8) translateY(20px);
  }
}

/* Spring animation utility classes */
.animate-spring-in {
  animation: spring-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.animate-spring-out {
  animation: spring-out 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Page Editor Transition Improvements */
.page-editor-transition {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Smooth edit mode transitions for title and body */
.edit-mode-title-transition {
  transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
}

/* Slide-up page animation improvements */
.slide-up-page {
  /* Allow text selection during animation - users should be able to select text immediately */
  user-select: auto;
  /* REMOVED: isolation: isolate - this creates stacking context that breaks fixed positioning */
  /* REMOVED: will-change: transform, opacity - only set during actual animation */
}

.slide-up-page.animation-complete {
  /* Ensure text selection remains enabled after animation */
  user-select: auto;
  /* Reset will-change for performance */
  will-change: auto;
}

/* Prevent body scroll during slide-up animation */
.slide-up-active {
  overflow: hidden;
  height: 100vh;
}

.edit-mode-body-transition {
  transition: border-color 0.3s ease, box-shadow 0.3s ease, padding 0.3s ease;
}

/* Prevent layout shift during edit mode transitions */
.edit-mode-container {
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
  /* REMOVED: transform: translateZ(0) - this creates stacking context that breaks fixed positioning */
  /* REMOVED: will-change - only set during actual transitions */
  /* Avoid transitioning layout properties to prevent flickering */
}

/* Sticky Save Header - Push main header down when present */
.has-sticky-save-header header[data-component="main-header"] {
  top: 56px !important; /* Height of sticky save header */
  transition: top 300ms ease-in-out;
}

/* Ensure the header spacer accounts for the save header */
.has-sticky-save-header header[data-component="main-header"] + div {
  height: calc(var(--header-height, 80px) + 56px) !important;
  transition: height 300ms ease-in-out;
}

/* REMOVED: All complex header spacing rules that interfere with simple body padding */

/* New page creation layout stability */
.new-page-container {
  /* REMOVED: contain: layout style - this creates stacking context that breaks fixed positioning */
  /* REMOVED: transform: translateZ(0) - this creates stacking context that breaks fixed positioning */
}

.new-page-header {
  height: 64px;
  min-height: 64px;
  max-height: 64px;
  /* REMOVED: contain: layout - this creates stacking context that breaks fixed positioning */
}

.new-page-content {
  min-height: calc(100vh - 64px);
  padding-top: 64px;
  /* REMOVED: contain: layout - this creates stacking context that breaks fixed positioning */
}

.page-editor-stable {
  /* REMOVED: contain: layout style - this creates stacking context that breaks fixed positioning */
  /* REMOVED: transform: translateZ(0) - this creates stacking context that breaks fixed positioning */
  /* REMOVED: will-change: auto - not needed */
}

/* Prevent layout shift in editor loading states */
.editor-loading-placeholder {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  /* REMOVED: contain: layout - this creates stacking context that breaks fixed positioning */
}

/* PWA Interface Improvements */
/* PWA styles - light and dark mode support */
@media (display-mode: standalone) {
  :root {
    --pwa-background: #ffffff;
    --pwa-status-bar: #000000;
  }

  .dark {
    --pwa-background: #000000;
    --pwa-status-bar: #ffffff;
  }

  body {
    background-color: var(--pwa-background);
  }

  /* Status bar styling for PWA */
  meta[name="theme-color"] {
    content: var(--pwa-background);
  }
}

@layer base {
  :root {
    /* Accent color variables - dynamically set by AccentColorContext */
    --accent-h: 230;
    --accent-s: 91%;
    --accent-l: 60%;
    --accent-color-rgb: 37, 99, 235; /* Default blue RGB values for #2563EB */

    /* Radix Colors - Light Mode */
    --background: 0 0% 100%;
    --foreground: 222 47% 11%;

    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    --primary: var(--accent-base);
    --primary-foreground: 100.00% 0.0000 158.2;

    --secondary: 210 40% 96%;
    --secondary-foreground: 222 47% 11%;

    --muted: 210 40% 96%;
    --muted-foreground: 215 16% 47%;

    --accent: 210 40% 96%;
    --accent-foreground: 222 47% 11%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --success: 0.55 0.15 142;
    --success-foreground: 1.00 0.00 0;

    /* Systematic Color System - Base Colors (OKLCH) */
    --accent-base: var(--primary); /* User's custom accent color */
    --neutral-base: var(--primary); /* Same hue as accent, low chroma */
    --success-base: 0.55 0.15 142; /* Green */
    --warn-base: 0.72 0.15 72; /* Orange */
    --error-base: 0.55 0.15 28; /* Red */

    /* Hover variants - darker in light mode */
    --accent-90: var(--primary); /* Will be overridden by theme-aware hover */
    --accent-110: var(--primary); /* Will be overridden by theme-aware hover */
    --success-90: 0.50 0.15 142; /* Darker green */
    --success-110: 0.60 0.15 142; /* Brighter green */
    --error-90: 0.50 0.15 28; /* Darker red */
    --error-110: 0.60 0.15 28; /* Brighter red */

    /* Focus indicator variables */
    --focus-ring-color: var(--accent-base);
    --focus-ring-width: 2px;
    --focus-ring-offset: 2px;

    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: var(--accent-base);
    --radius: 0.5rem;

    /* Active line highlight in editor */
    --active-line-highlight: oklch(var(--accent-base) / 0.1);

    /* Paragraph numbering opacity - subtle grey appearance */
    --paragraph-number-opacity: 0.4;
  }

  .dark {
    /* Radix Colors - Dark Mode */
    --background: 0 0% 0%;
    --foreground: 210 40% 98%;

    /* Brighter card background in dark mode - completely neutral grey */
    --card: 0 0% 8%;
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 5%;
    --popover-foreground: 0 0% 98%;

    --primary: var(--accent-base);
    --primary-foreground: 100.00% 0.0000 158.2;

    --secondary: 0 0% 18%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 18%;
    --muted-foreground: 0 0% 65%;

    --accent: 0 0% 18%;
    --accent-foreground: 0 0% 98%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --success: 0.60 0.15 142;
    --success-foreground: 1.00 0.00 0;

    --border: 0 0% 25%;
    --input: 0 0% 18%;
    --ring: var(--accent-base);
    --radius: 0.5rem;

    /* Focus indicator variables - higher contrast in dark mode */
    --focus-ring-color: var(--accent-base);
    --focus-ring-width: 2px;
    --focus-ring-offset: 2px;

    /* Active line highlight in editor - darker in dark mode */
    --active-line-highlight: oklch(var(--accent-base) / 0.15);

    /* Paragraph numbering opacity - subtle appearance (same as light mode) */
    --paragraph-number-opacity: 0.4;
  }

  /* High Contrast Mode - Light */
  html[data-high-contrast="true"]:not(.dark) {
    /* Maximum contrast for text */
    --foreground: 0 0% 0%;
    --background: 0 0% 100%;

    /* Card with visible borders */
    --card: 0 0% 100%;
    --card-foreground: 0 0% 0%;

    /* Popover with visible borders */
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 0%;

    /* Primary color with high contrast */
    --primary: 220 100% 50%;
    --primary-foreground: 0 0% 100%;

    /* Secondary with higher contrast */
    --secondary: 220 13% 80%;
    --secondary-foreground: 0 0% 0%;

    /* Muted with higher contrast */
    --muted: 220 13% 90%;
    --muted-foreground: 0 0% 0%;

    /* Accent with higher contrast */
    --accent: 220 13% 90%;
    --accent-foreground: 0 0% 0%;

    /* Destructive with higher contrast */
    --destructive: 0 100% 45%;
    --destructive-foreground: 0 0% 100%;

    /* Borders and inputs with higher contrast */
    --border: 0 0% 0%;
    --input: 0 0% 90%;
    --ring: 220 100% 50%;

    /* Enhanced focus indicators */
    --focus-ring-color: 220 100% 50%;
    --focus-ring-width: 3px;
    --focus-ring-offset: 2px;
  }

  /* High Contrast Mode - Dark */
  html[data-high-contrast="true"].dark {
    /* Maximum contrast for text */
    --foreground: 0 0% 100%;
    --background: 0 0% 0%;

    /* Card with visible borders */
    --card: 0 0% 0%;
    --card-foreground: 0 0% 100%;

    /* Popover with visible borders */
    --popover: 0 0% 0%;
    --popover-foreground: 0 0% 100%;

    /* Primary color with high contrast */
    --primary: 220 100% 60%;
    --primary-foreground: 0 0% 0%;

    /* Secondary with higher contrast */
    --secondary: 220 13% 20%;
    --secondary-foreground: 0 0% 100%;

    /* Muted with higher contrast */
    --muted: 220 13% 20%;
    --muted-foreground: 0 0% 100%;

    /* Accent with higher contrast */
    --accent: 220 13% 20%;
    --accent-foreground: 0 0% 100%;

    /* Destructive with higher contrast */
    --destructive: 0 100% 60%;
    --destructive-foreground: 0 0% 0%;

    /* Borders and inputs with higher contrast */
    --border: 0 0% 100%;
    --input: 0 0% 20%;
    --ring: 220 100% 70%;

    /* Enhanced focus indicators */
    --focus-ring-color: 220 100% 70%;
    --focus-ring-width: 3px;
    --focus-ring-offset: 2px;
  }
}

/* Glass card styling - using theme variables for better light/dark mode support */
.glass-card {
  border: 1px solid;
  border-radius: 0.75rem; /* rounded-xl */
  border-color: hsl(var(--border) / 0.4);
}

.glass-panel {
  border: 1px solid hsl(var(--border) / 0.4);
}

.glass-panel:hover {
  border-color: hsl(var(--border) / 0.6);
}

/* Minimal Stripe fixes - no size overrides */
iframe[src*="js.stripe.com"] {
  width: 100%;
}

/* Legacy card styles removed - now using centralized card theme system */

/* Remove hover states - cards stay static */

/* Dark mode hover state for cards - enhanced shadow for dark mode */
.dark .wewrite-card:hover:not([role="dialog"]):not([data-modal-content]):not([aria-modal="true"] *) {
  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.3), 0 2px 4px 0 rgba(0, 0, 0, 0.2); /* Stronger shadow for dark mode */
  transform: translateY(-1px); /* Subtle lift effect */
}

/* Base transition for smooth hover effects */
.wewrite-card {
  transition: all 0.2s ease-in-out;
}

/* Active state styling for theme and link style selectors */
.wewrite-active-state {
  border: 1px solid oklch(var(--accent-80)) !important;
  background-color: oklch(var(--accent-15)) !important;
}

/* Active card styling for focused inputs and selected elements */
.wewrite-active-card {
  border: 1px solid oklch(var(--accent-70)) !important;
  background-color: oklch(var(--accent-10)) !important;
  transition: all 0.2s ease-in-out;
}

/* Interactive card styling */
.wewrite-interactive-card {
  transition: all 0.2s ease-in-out;
  border: 1px solid hsl(var(--border) / 0.4);
}

.wewrite-interactive-card:hover {
  border-color: hsl(var(--border) / 0.6);
  background-color: hsl(var(--muted) / 0.5);
}

/* Base styling for WeWrite inputs - now handled by glassmorphic input system below */



.wewrite-card.wewrite-input:hover,
.wewrite-card:not(.wewrite-input):hover {
  border-color: var(--card-border-hover) !important;
  background-color: var(--card-bg-hover) !important;
}

/* Title input specific styling - works with wewrite-input glassmorphic system */
.wewrite-title-input {
  /* Title-specific typography - let wewrite-input handle background/border */
  font-weight: 600 !important;
  text-align: center !important;

  /* Override default textarea min-height for title inputs - ensure consistent height */
  min-height: 64px !important;
  height: 64px !important;

  /* Ensure consistent box-sizing */
  box-sizing: border-box !important;

  /* Ensure consistent padding - override wewrite-input padding for precise control */
  padding: 0.75rem 1rem !important;
}

/* Make div title inputs use flexbox for vertical centering */
div.wewrite-title-input {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  line-height: 1.2 !important;
}

/* Make textarea title inputs use line-height for vertical centering to match div */
textarea.wewrite-title-input {
  /* Remove default textarea styling that interferes with centering */
  resize: none !important;

  /* Use line-height to center single-line text vertically */
  line-height: calc(64px - 1.5rem) !important; /* 64px total height minus top/bottom padding */

  /* Remove default padding-top/bottom since line-height handles vertical centering */
  padding-top: 0.75rem !important;
  padding-bottom: 0.75rem !important;
  padding-left: 1rem !important;
  padding-right: 1rem !important;
}

/* ===== GLOBAL GLASSMORPHIC INPUT SYSTEM ===== */

/**
 * Universal WeWrite Input Style
 *
 * Provides glassmorphic styling consistent with the card system.
 * Used for all inputs throughout the app except Stripe embedded inputs.
 *
 * Features:
 * - Glassmorphic background matching card system
 * - Active state with accent color
 * - Consistent with global design system
 * - Theme-aware colors
 */
.wewrite-input {
  /* Base glassmorphic styling matching cards */
  background-color: var(--card-bg) !important;
  backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 80%)) brightness(calc(1 + var(--card-opacity) * 0.1)) !important;
  -webkit-backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 80%)) brightness(calc(1 + var(--card-opacity) * 0.1)) !important;

  /* Border and styling */
  border: 1px solid var(--card-border) !important;
  border-radius: 0.75rem !important; /* Slightly less rounded than cards for input feel */

  /* Text and spacing */
  color: var(--card-text) !important;
  padding: 0.75rem 1rem !important;

  /* Transitions */
  transition: all 0.2s ease-in-out !important;

  /* Remove default styling */
  box-shadow: none !important;
  outline: none !important;
  appearance: none !important;
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
}

/* Active/Focus state for inputs */
.wewrite-input:focus,
.wewrite-input:focus-visible,
.wewrite-input.wewrite-active-input {
  border: 1px solid oklch(var(--accent-base)) !important;
  background-color: oklch(var(--accent-base) / 0.1) !important;
  box-shadow: 0 0 0 3px oklch(var(--accent-base) / 0.1) !important;
}

/* Placeholder styling */
.wewrite-input::placeholder {
  color: var(--card-text-muted) !important;
  opacity: 0.7 !important;
}

/* Placeholder styling for inputs with left icons */
.wewrite-input.pl-12::placeholder {
  text-indent: 0 !important; /* Reset any text-indent */
  padding-left: 0 !important; /* The pl-12 class already handles the spacing */
}

/* Specific classes for inputs with icons */
.wewrite-input-with-left-icon {
  padding-left: 3rem !important; /* 48px - enough space for icon + padding */
}

.wewrite-input-with-left-icon::placeholder {
  text-indent: 0 !important;
  padding-left: 0 !important;
}

.wewrite-input-with-right-icon {
  padding-right: 3rem !important; /* 48px - enough space for icon + padding */
}

.wewrite-input-with-right-icon::placeholder {
  text-indent: 0 !important;
  padding-right: 0 !important;
}

/* Disabled state */
.wewrite-input:disabled {
  opacity: 0.5 !important;
  cursor: not-allowed !important;
}

/* Textarea specific adjustments */
textarea.wewrite-input {
  min-height: 80px !important;
  resize: none !important;
}

/* Override textarea min-height for title inputs specifically */
textarea.wewrite-input.wewrite-title-input {
  min-height: 64px !important;
}

/* Override any conflicting Tailwind styles */
input.wewrite-input,
textarea.wewrite-input,
select.wewrite-input {
  /* Force our styling to take precedence */
  background: var(--card-bg) !important;
  border: 1px solid var(--card-border) !important;
}

/* Ensure focus states work properly */
input.wewrite-input:focus,
textarea.wewrite-input:focus,
select.wewrite-input:focus,
input.wewrite-input:focus-visible,
textarea.wewrite-input:focus-visible,
select.wewrite-input:focus-visible {
  border: 1px solid oklch(var(--accent-base)) !important;
  background-color: oklch(var(--accent-base) / 0.1) !important;
  box-shadow: 0 0 0 3px oklch(var(--accent-base) / 0.1) !important;
  outline: none !important;
}

/* Title input hover state is now handled by wewrite-input system */

/* High contrast mode styling */
html[data-high-contrast="true"] .wewrite-card,
html[data-high-contrast="true"] [class*="border-theme-"],
html[data-high-contrast="true"] [class*="border"] {
  border-color: hsl(var(--border)) !important;
  border-width: 1px !important;
}

/* Mobile-specific card grid improvements */
@media (max-width: 767px) {
  /* Standardized spacing between cards in grid layouts on mobile */
  .grid-cols-1 {
    gap: 1.5rem !important; /* 24px gap on mobile */
  }

  /* Standardized spacing for space-y utilities on mobile */
  .space-y-3 > * + *,
  .space-y-4 > * + *,
  .space-y-6 > * + * {
    margin-top: 1.5rem !important; /* 24px gap to match grid spacing */
  }

  /* Remove height constraints on mobile for better content flow */
  .mobile-auto-height {
    height: auto !important;
    min-height: auto !important;
  }

  /* Better card padding on mobile */
  .mobile-card-padding {
    padding: 1.25rem !important; /* 20px padding on mobile */
  }

  /* Standardized mobile header content padding - only for specific legacy headers */
  [data-component="main-header"] .flex.items-center.h-full {
    height: 56px !important;
    padding-left: 1rem !important; /* 16px */
    padding-right: 1rem !important; /* 16px */
  }

  /* NavHeader uses its own responsive padding system */
  [data-component="nav-header"] .flex.items-center.h-14 {
    height: 56px !important;
    padding-left: 1rem !important; /* 16px */
    padding-right: 1rem !important; /* 16px */
  }

  /* Standardized mobile badge sizing for header financial displays - only for legacy components */
  [data-component="main-header"] .inline-flex.items-center.gap-2 {
    font-size: 0.75rem !important; /* 12px - consistent badge text size */
    padding: 0.125rem 0.625rem !important; /* 2px 10px - consistent badge padding */
    border-radius: 9999px !important; /* Full rounded */
  }

  /* NavHeader uses standard badge component styling */

  /* NavHeader sidebar offset - only on desktop */
  @media (min-width: 768px) {
    [data-component="nav-header"] {
      left: var(--sidebar-width, 0px) !important;
      width: calc(100vw - var(--sidebar-width, 0px)) !important;
    }
  }

}

@media (max-width: 767px) {
  .mobile-card-consistent {
    margin-bottom: 1.5rem !important; /* 24px spacing between cards */
    padding: 1.25rem !important; /* 20px internal padding */
  }

  /* For grid containers with mobile-card-consistent children */
  .mobile-card-consistent-grid {
    gap: 1.5rem !important; /* 24px gap between cards */
  }

  /* For space-y containers with mobile-card-consistent children */
  .mobile-card-consistent-space > * + * {
    margin-top: 1.5rem !important; /* 24px gap between cards */
  }
}

/* Hide scrollbar for Chrome, Safari and Opera */
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Hide scrollbar for IE, Edge and Firefox */
.scrollbar-hide {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

/* Thin scrollbar styling */
.scrollbar-thin::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 3px;
}

.dark .scrollbar-thin::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

.dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Scroll snap utilities */
.scroll-snap-align-start {
  scroll-snap-align: start;
}

/* Line clamp utilities */
.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Roadmap scroll navigation buttons */
#roadmap-scroll-left,
#roadmap-scroll-right {
  transition: all 0.2s ease;
  opacity: 0.9;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid hsl(var(--border) / 0.2);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  color: hsl(var(--foreground) / 0.7);
}

#roadmap-scroll-left:hover,
#roadmap-scroll-right:hover {
  opacity: 1;
  transform: scale(1.05);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
}

.dark #roadmap-scroll-left,
.dark #roadmap-scroll-right {
  border-color: hsl(var(--border) / 0.2);
  color: hsl(var(--foreground) / 0.9);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.dark #roadmap-scroll-left:hover,
.dark #roadmap-scroll-right:hover {
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
}

/* Filter chip animations and mobile scrolling */
@media (max-width: 768px) {
  /* Full-width scrolling container without masking or fading */
  .filter-chips-container {
    position: relative;
    cursor: grab;
    margin-left: -24px !important; /* Extend beyond container padding */
    margin-right: -24px !important; /* Extend beyond container padding */
    width: 100vw !important; /* Full viewport width */
    padding-left: 24px !important; /* Start first chip at screen edge */
    padding-right: 0 !important; /* Allow last chip to extend off-screen */
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    scroll-padding: 0; /* Ensure no scroll padding */
    max-width: none !important; /* Override any max-width constraints */
    box-sizing: content-box !important;
    left: 0 !important;
    right: 0 !important;
  }

  /* Container for the filter chips section */
  .filter-chips-section {
    position: relative;
    overflow: visible !important; /* Allow content to overflow */
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
  }

  /* Ensure consistent vertical alignment during animations */
  .filter-chip {
    display: flex;
    align-items: center;
    height: 36px; /* Fixed height to prevent layout shifts */
  }

  /* Smooth animation for checkmark */
  .filter-chip-checkmark {
    transition: width 300ms cubic-bezier(0.4, 0, 0.2, 1),
                opacity 300ms cubic-bezier(0.4, 0, 0.2, 1),
                margin 300ms cubic-bezier(0.4, 0, 0.2, 1);
    will-change: width, opacity, margin;
    overflow: hidden;
  }

  /* Ensure the parent container doesn't clip the filter chips */
  .filter-chips-parent {
    overflow: visible !important;
    position: relative !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    max-width: 100% !important;
    width: 100% !important;
  }

  /* Override any container padding that might be causing clipping */
  .filter-chips-parent.container {
    padding-left: 0 !important;
    padding-right: 0 !important;
    max-width: 100% !important;
    width: 100% !important;
  }

  /* Ensure the feature section container doesn't clip */
  #features .container {
    overflow: visible !important;
  }
}

/* Fade in animation for controlled rendering */
@keyframes fadeIn {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Hide the spinner for WebKit browsers (Chrome, Safari) */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Hide the spinner for Firefox */
input[type="number"] {
  -moz-appearance: textfield;
  appearance: textfield;
  /* Remove the spinner in Firefox */
}

/* Inner border utility for pill links */
.inner-border {
  position: relative;
}

.inner-border::after {
  content: '';
  position: absolute;
  top: 1px;
  left: 1px;
  right: 1px;
  bottom: 1px;
  border-radius: 6px; /* Slightly smaller than the outer radius */
  pointer-events: none;
}

/* Light mode - slightly darker inner border */
.inner-border-neutral-alpha-3::after {
  border: 1px solid hsl(var(--border) / 0.3);
}

/* Dark mode - slightly lighter inner border */
.dark .inner-border-neutral-alpha-3::after {
  border: 1px solid hsl(var(--border) / 0.3);
}

/* Basic styling for html and body */
html,
body {
  min-height: 100vh;
  min-height: 100dvh; /* Use dynamic viewport height on supported browsers */
  overflow-x: hidden;
  background-color: hsl(var(--background));
}

/* Make page containers transparent when background image is present */
body.has-background-image .bg-background,
body.has-background-image .min-h-screen.bg-background {
  background-color: transparent !important;
}

/* Background image system */
body {
  /* Overlay for background images */
  position: relative;
}

/* Background image layer with blur */
body::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: var(--background-image, none);
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  filter: blur(var(--background-blur, 0px));
  pointer-events: none;
  z-index: -3; /* Behind overlay */
  /* Ensure proper dimensions */
  width: 100vw;
  height: 100vh;
  /* Prevent any scaling or transformation issues */
  transform: none;
  will-change: auto;
}

/* Mobile-specific background adjustments */
@media (max-width: 768px) {
  body::after {
    /* Ensure background fills screen height on mobile */
    background-attachment: scroll; /* Fixed attachment can cause issues on mobile */
    /* Try contain to prevent excessive cropping/zooming */
    background-size: contain;
    background-position: center center; /* Center the image both horizontally and vertically */
    /* Fill empty space with theme-appropriate color */
    background-color: hsl(var(--background));
    /* Use standard viewport units for better compatibility */
    min-height: 100vh;
    height: 100vh;
    width: 100vw;
    /* Ensure proper positioning */
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    /* Prevent over-scaling */
    max-width: 100vw;
    max-height: 100vh;
    /* Ensure the pseudo-element doesn't cause layout issues */
    overflow: hidden;
  }

  /* Fallback: if contain leaves too much empty space, use cover with better constraints */
  @media (max-width: 768px) and (orientation: portrait) {
    body::after {
      background-size: cover;
      /* For portrait orientation, position slightly higher to show more of the image */
      background-position: center 30%;
    }
  }

  /* Ensure body and html don't interfere with background sizing */
  html, body {
    /* Prevent any transforms or scaling that might affect background */
    transform: none !important;
    scale: none !important;
    zoom: 1 !important;
    /* Ensure no overflow that might cause scaling issues */
    overflow-x: hidden;
    /* Ensure proper height calculation */
    height: 100%;
    min-height: 100vh;
  }
}

/* Background overlay for images */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--background-overlay, transparent);
  pointer-events: none;
  z-index: -2; /* Above background image, below content */
}

/**
 * WeWrite Border Styling System
 *
 * Standardized approach to border styling that ensures consistent border styling
 * across the WeWrite application. These classes automatically adapt to light and
 * dark modes, and support additional theme modes including high contrast.
 *
 * Theme-Based Border Classes:
 * - .border-theme-light: Light border (20% opacity)
 * - .border-theme-medium: Medium border (40% opacity)
 * - .border-theme-strong: Strong border (60% opacity)
 * - .border-theme-solid: Solid border (100% opacity)
 *
 * Interactive Border Classes (hover states):
 * - .hover-border-light: Light hover state (30% opacity)
 * - .hover-border-medium: Medium hover state (50% opacity)
 * - .hover-border-strong: Strong hover state (70% opacity)
 * - .hover-border-solid: Solid hover state (100% opacity)
 *
 * Usage Examples:
 * Basic card: border-theme-strong rounded-xl shadow-sm p-4
 * Interactive card: border-theme-strong hover-border-strong rounded-xl shadow-sm p-4 transition-all duration-200
 *
 * Glass Effects:
 * - .glass-card: Card with subtle glass effect
 * - .glass-panel: Panel with more pronounced glass effect
 *
 * The border colors are defined using CSS variables in the theme:
 * --border: 215 20% 85% (light mode) / 217.2 32.6% 25% (dark mode)
 *
 * High contrast mode automatically applies stronger borders for accessibility.
 */

/* Centralized border utilities for consistent styling */
.border-theme-light {
  border: 1px solid hsl(var(--border) / 0.2);
}

.border-theme-medium {
  border: 1px solid hsl(var(--border) / 0.4);
}

.border-theme-strong {
  border: 1px solid hsl(var(--border) / 0.6);
}

.border-theme-solid {
  border: 1px solid hsl(var(--border));
}

/* High contrast mode border styles - only apply higher contrast in high contrast mode */
:root[data-accent-color="high-contrast"] .border-theme-light {
  border: 1px solid hsl(var(--border) / 0.4);
}

:root[data-accent-color="high-contrast"] .border-theme-medium {
  border: 1px solid hsl(var(--border) / 0.7);
}

:root[data-accent-color="high-contrast"] .border-theme-strong {
  border: 1px solid hsl(var(--border) / 0.9);
}

:root[data-accent-color="high-contrast"] .border-theme-solid {
  border: 1px solid hsl(var(--border));
}

/* Border direction utilities */
.border-t-only {
  border-top: 1px solid hsl(var(--border) / 0.4);
  border-right: none;
  border-bottom: none;
  border-left: none;
}

.border-b-only {
  border-top: none;
  border-right: none;
  border-bottom: 1px solid hsl(var(--border) / 0.4);
  border-left: none;
}

.border-r-only {
  border-top: none;
  border-right: 1px solid hsl(var(--border) / 0.4);
  border-bottom: none;
  border-left: none;
}

.border-l-only {
  border-top: none;
  border-right: none;
  border-bottom: none;
  border-left: 1px solid hsl(var(--border) / 0.4);
}

/* High contrast mode border direction utilities */
:root[data-accent-color="high-contrast"] .border-t-only {
  border-top: 1px solid hsl(var(--border) / 0.8);
}

:root[data-accent-color="high-contrast"] .border-b-only {
  border-bottom: 1px solid hsl(var(--border) / 0.8);
}

:root[data-accent-color="high-contrast"] .border-r-only {
  border-right: 1px solid hsl(var(--border) / 0.8);
}

:root[data-accent-color="high-contrast"] .border-l-only {
  border-left: 1px solid hsl(var(--border) / 0.8);
}

/* Header border transition */
.header-border-transition {
  border-bottom: 1px solid transparent;
  transition: border-color 0.3s ease-in-out;
}

.header-border-transition.border-visible {
  border-color: hsl(var(--border) / 0.4);
}

/* Page header height variable - set conservative initial value to prevent content clipping */
:root {
  --page-header-height: 140px; /* Conservative initial value, will be updated by JavaScript */
}

/* Smooth header height transitions */
.header-smooth-transition {
  transition: height 300ms ease-in-out, padding 300ms ease-in-out;
  /* REMOVED: transform: translateZ(0) - creates stacking context that breaks fixed positioning */
  will-change: height, padding;
  /* REMOVED: contain: layout style - creates stacking context that breaks fixed positioning */
}

/* Header spacer smooth transitions */
.header-spacer-smooth {
  transition: height 300ms ease-in-out;
  /* REMOVED: transform: translateZ(0) - creates stacking context that breaks fixed positioning */
  will-change: height;
  /* REMOVED: contain: layout - creates stacking context that breaks fixed positioning */
}

/* Mobile header optimizations */
@media (max-width: 640px) {
  /* Ensure headers don't overflow on small screens */
  .header-mobile-safe {
    min-width: 0;
    overflow: hidden;
  }

  /* Better mobile title truncation - only when scrolled */
  .header-title-mobile {
    max-width: 45vw !important;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* Allow title wrapping when expanded on mobile */
  .header-title-expanded-mobile {
    width: 100% !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    white-space: normal !important;
    text-align: center !important;
  }

  /* Better mobile byline truncation */
  .header-byline-mobile {
    max-width: 30vw !important;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* Reduce header padding on very small screens */
  .header-padding-mobile {
    padding-left: 0.75rem !important; /* 12px */
    padding-right: 0.75rem !important; /* 12px */
  }
}

/* Interactive border states */
.hover-border-light:hover {
  border-color: hsl(var(--border) / 0.3);
}

.hover-border-medium:hover {
  border-color: hsl(var(--border) / 0.5);
}

.hover-border-strong:hover {
  border-color: hsl(var(--border) / 0.7);
}

.hover-border-solid:hover {
  border-color: hsl(var(--border));
}

/* Divide utilities for theme-aware borders */
.divide-theme-light > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid hsl(var(--border) / 0.2);
}

.divide-theme-medium > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid hsl(var(--border) / 0.4);
}

.divide-theme-strong > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid hsl(var(--border) / 0.6);
}

.divide-theme-solid > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid hsl(var(--border));
}

/* High contrast mode divide utilities */
:root[data-accent-color="high-contrast"] .divide-theme-light > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid hsl(var(--border) / 0.4);
}

:root[data-accent-color="high-contrast"] .divide-theme-medium > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid hsl(var(--border) / 0.7);
}

:root[data-accent-color="high-contrast"] .divide-theme-strong > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid hsl(var(--border) / 0.9);
}

:root[data-accent-color="high-contrast"] .divide-theme-solid > :not([hidden]) ~ :not([hidden]) {
  border-top: 2px solid hsl(var(--border));
}

/* Custom text highlight styles */
.custom-text-highlights {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: var(--z-fixed-header); /* Use centralized token */
  background-color: rgba(0, 0, 0, 0.5); /* Darken the entire screen */
}

.dark .custom-text-highlights {
  background-color: rgba(0, 0, 0, 0.7); /* Darker overlay for dark mode */
}

.custom-text-highlight {
  position: fixed;
  background-color: white; /* Punched-out light section */
  border-radius: 3px; /* Rounded corners like VSCode */
  pointer-events: none;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5); /* Subtle blue border */
  mix-blend-mode: difference; /* Creates a "hole" effect where text is visible */
}

.dark .custom-text-highlight {
  background-color: white; /* Same in dark mode for consistency */
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.7); /* More visible border in dark mode */
}

/* Highlight notification banner */
#highlight-notification {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: var(--z-overlay); /* Use centralized token */
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem 1rem;
  background-color: hsl(var(--background));
  border-bottom: 1px solid hsl(var(--border));
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Style for selected text to override browser default */
::selection {
  background-color: rgba(59, 130, 246, 0.15); /* Blue color with 15% opacity */
  color: inherit; /* Keep the text color unchanged */
}

/* Ensure text selection is enabled for all content areas */
[data-page-content],
.user-bio-content,
.group-about-content,
.page-content,
.content-area,
.unified-text-content,
.prose,
/* COMPREHENSIVE TEXT SELECTION CONTROL */
/* Default: Disable text selection for all elements */
* {
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Enable text selection ONLY for content areas and form inputs */
.text-view-content,
.editor-content,
.paragraph-content,
.slide-up-page,
.new-page-container,
.page-content,
.content-area,
.unified-text-content,
.prose,
[data-page-content],
.user-bio-content,
.group-about-content,
[contenteditable="true"],
input,
textarea,
select,
/* Allow selection in specific content containers */
.content-selectable,
.selectable-text,
/* Allow selection in page titles and descriptions when in content areas */
.page-content p,
.page-content h1,
.page-content h2,
.page-content h3,
.page-content h4,
.page-content h5,
.page-content h6,
.editor-content p,
.editor-content h1,
.editor-content h2,
.editor-content h3,
.editor-content h4,
.editor-content h5,
.editor-content h6,
.prose p,
.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
  -webkit-user-select: text !important;
  -khtml-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  user-select: text !important;
}

/* Ensure text selection works in both light and dark modes */
.dark ::selection {
  background-color: rgba(59, 130, 246, 0.25); /* Slightly more visible in dark mode */
  color: inherit;
}

/* Global pill text truncation - handles overflow gracefully */
.pill-text {
  display: inline-block;
  white-space: nowrap;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Removed redundant truncation rules - now handled globally by .pill-text */

/* Truncate links in the editor only when they would cause layout issues */
.truncate-link {
  /* Only constrain width when absolutely necessary for layout */
  max-width: calc(100vw - 4rem); /* Prevent viewport overflow with generous margin */
  display: inline-flex !important;
  white-space: nowrap !important;
  overflow: hidden !important;
}

.truncate-link > div {
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* FIX: Allow pill links to use available space more generously */
.paragraph-with-number a {
  /* PillStyleContext now uses inline-flex with proper alignment */
  vertical-align: baseline !important; /* Ensure proper alignment with paragraph numbers */
  /* Only constrain when absolutely necessary - allow links to use most of the available space */
  max-width: calc(100vw - 4rem); /* More generous space - only account for essential margins */
}

/* Text contrast is now handled by PillStyleContext - removed conflicting rules */

/* Ensure outline pills use the accent color for text - but NOT text content */
a.bg-transparent.pill-link,
button.bg-transparent,
div.bg-transparent.pill-link,
a.bg-transparent[href],
button.bg-transparent[type] {
  color: hsl(var(--primary)) !important;
}



/* COMPOUND LINK FIXES - Ensure proper separation and styling with inline-block layout */
.compound-link-container {
  display: inline-block !important;
  vertical-align: baseline !important;
  white-space: nowrap !important;
}

/* Prevent any global link styles from merging compound link pills */
.compound-link-container > a,
.compound-link-container > span > a {
  margin-left: 0.125rem !important;
  margin-right: 0.125rem !important;
  border-radius: 0.5rem !important; /* Maintain individual pill border radius */
  display: inline-block !important;
  vertical-align: baseline !important;
}

/* Ensure compound link "by" text is properly spaced and styled */
.compound-link-container > .text-muted-foreground {
  margin: 0 0.125rem !important;
  padding: 0 !important;
  display: inline !important;
  vertical-align: baseline !important;
}

/* REMOVED: Legacy contentEditable styles - using Slate.js now */

/* REMOVED: Legacy contentEditable compound link styles - using Slate.js now */

/* Comprehensive fix for text contrast issues */
/* Ensure all text has sufficient contrast against its background */
.text-muted-foreground {
  color: hsl(var(--muted-foreground)) !important;
}

/* Ensure tab text is always readable */
[role="tab"] {
  color: hsl(var(--foreground)) !important;
}

/* Ensure text in light mode has sufficient contrast */
.light [role="tab"],
.light .text-muted-foreground,
.light .text-foreground {
  color: hsl(var(--foreground)) !important;
}

/* Ensure text in dark mode has sufficient contrast */
.dark [role="tab"],
.dark .text-muted-foreground,
.dark .text-foreground {
  color: hsl(var(--foreground)) !important;
}

/* Systematic Color System - Opacity-based Utility Classes */

/* Accent Colors (accent-n) */
.bg-accent-5 { background-color: oklch(var(--accent-base) / 0.05) !important; }
.bg-accent-10 { background-color: oklch(var(--accent-base) / 0.1) !important; }
.bg-accent-15 { background-color: oklch(var(--accent-base) / 0.15) !important; }
.bg-accent-20 { background-color: oklch(var(--accent-base) / 0.2) !important; }
.bg-accent-25 { background-color: oklch(var(--accent-base) / 0.25) !important; }
.bg-accent-30 { background-color: oklch(var(--accent-base) / 0.3) !important; }
.bg-accent-35 { background-color: oklch(var(--accent-base) / 0.35) !important; }
.bg-accent-60 { background-color: oklch(var(--accent-base) / 0.6) !important; }
.bg-accent-70 { background-color: oklch(var(--accent-base) / 0.7) !important; }
.bg-accent-80 { background-color: oklch(var(--accent-base) / 0.8) !important; }
.bg-accent-90 { background-color: oklch(var(--accent-base) / 0.9) !important; }
.bg-accent-110 { background-color: oklch(var(--accent-base) / 1.1) !important; }
.bg-accent-120 { background-color: oklch(var(--accent-base) / 1.2) !important; }
.bg-accent-140 { background-color: oklch(var(--accent-base) / 1.4) !important; }
.bg-accent-40 { background-color: oklch(var(--accent-base) / 0.4) !important; }
.bg-accent-50 { background-color: oklch(var(--accent-base) / 0.5) !important; }
.bg-accent-60 { background-color: oklch(var(--accent-base) / 0.6) !important; }
.bg-accent-70 { background-color: oklch(var(--accent-base) / 0.7) !important; }
.bg-accent-80 { background-color: oklch(var(--accent-base) / 0.8) !important; }
.bg-accent-90 { background-color: oklch(var(--accent-base) / 0.9) !important; }
.bg-accent-100 { background-color: oklch(var(--accent-base)) !important; }

/* Complete Background Color System - 1% to 100% opacity for all tokens */

/* Accent Background Colors */
.bg-accent { background-color: oklch(var(--accent-base)) !important; }
.bg-accent-100 { background-color: oklch(var(--accent-base)) !important; }
.bg-accent-90 { background-color: oklch(var(--accent-base) / 0.9) !important; }
.bg-accent-80 { background-color: oklch(var(--accent-base) / 0.8) !important; }
.bg-accent-70 { background-color: oklch(var(--accent-base) / 0.7) !important; }
.bg-accent-60 { background-color: oklch(var(--accent-base) / 0.6) !important; }
.bg-accent-50 { background-color: oklch(var(--accent-base) / 0.5) !important; }
.bg-accent-40 { background-color: oklch(var(--accent-base) / 0.4) !important; }
.bg-accent-30 { background-color: oklch(var(--accent-base) / 0.3) !important; }
.bg-accent-25 { background-color: oklch(var(--accent-base) / 0.25) !important; }
.bg-accent-20 { background-color: oklch(var(--accent-base) / 0.2) !important; }
.bg-accent-15 { background-color: oklch(var(--accent-base) / 0.15) !important; }
.bg-accent-10 { background-color: oklch(var(--accent-base) / 0.1) !important; }
.bg-accent-5 { background-color: oklch(var(--accent-base) / 0.05) !important; }
.bg-accent-1 { background-color: oklch(var(--accent-base) / 0.01) !important; }

/* Neutral Background Colors */
.bg-neutral { background-color: oklch(var(--neutral-base)) !important; }
.bg-neutral-100 { background-color: oklch(var(--neutral-base)) !important; }
.bg-neutral-90 { background-color: oklch(var(--neutral-base) / 0.9) !important; }
.bg-neutral-80 { background-color: oklch(var(--neutral-base) / 0.8) !important; }
.bg-neutral-70 { background-color: oklch(var(--neutral-base) / 0.7) !important; }
.bg-neutral-60 { background-color: oklch(var(--neutral-base) / 0.6) !important; }
.bg-neutral-50 { background-color: oklch(var(--neutral-base) / 0.5) !important; }
.bg-neutral-40 { background-color: oklch(var(--neutral-base) / 0.4) !important; }
.bg-neutral-30 { background-color: oklch(var(--neutral-base) / 0.3) !important; }
.bg-neutral-25 { background-color: oklch(var(--neutral-base) / 0.25) !important; }
.bg-neutral-20 { background-color: oklch(var(--neutral-base) / 0.2) !important; }
.bg-neutral-15 { background-color: oklch(var(--neutral-base) / 0.15) !important; }
.bg-neutral-10 { background-color: oklch(var(--neutral-base) / 0.1) !important; }
.bg-neutral-5 { background-color: oklch(var(--neutral-base) / 0.05) !important; }
.bg-neutral-1 { background-color: oklch(var(--neutral-base) / 0.01) !important; }

/* Success Background Colors */
.bg-success { background-color: oklch(var(--success-base)) !important; }
.bg-success-100 { background-color: oklch(var(--success-base)) !important; }
.bg-success-90 { background-color: oklch(var(--success-base) / 0.9) !important; }
.bg-success-80 { background-color: oklch(var(--success-base) / 0.8) !important; }
.bg-success-70 { background-color: oklch(var(--success-base) / 0.7) !important; }
.bg-success-60 { background-color: oklch(var(--success-base) / 0.6) !important; }
.bg-success-50 { background-color: oklch(var(--success-base) / 0.5) !important; }
.bg-success-40 { background-color: oklch(var(--success-base) / 0.4) !important; }
.bg-success-30 { background-color: oklch(var(--success-base) / 0.3) !important; }
.bg-success-25 { background-color: oklch(var(--success-base) / 0.25) !important; }
.bg-success-20 { background-color: oklch(var(--success-base) / 0.2) !important; }
.bg-success-15 { background-color: oklch(var(--success-base) / 0.15) !important; }
.bg-success-10 { background-color: oklch(var(--success-base) / 0.1) !important; }
.bg-success-5 { background-color: oklch(var(--success-base) / 0.05) !important; }
.bg-success-1 { background-color: oklch(var(--success-base) / 0.01) !important; }

/* Warning Background Colors */
.bg-warn { background-color: oklch(var(--warn-base)) !important; }
.bg-warn-100 { background-color: oklch(var(--warn-base)) !important; }
.bg-warn-90 { background-color: oklch(var(--warn-base) / 0.9) !important; }
.bg-warn-80 { background-color: oklch(var(--warn-base) / 0.8) !important; }
.bg-warn-70 { background-color: oklch(var(--warn-base) / 0.7) !important; }
.bg-warn-60 { background-color: oklch(var(--warn-base) / 0.6) !important; }
.bg-warn-50 { background-color: oklch(var(--warn-base) / 0.5) !important; }
.bg-warn-40 { background-color: oklch(var(--warn-base) / 0.4) !important; }
.bg-warn-30 { background-color: oklch(var(--warn-base) / 0.3) !important; }
.bg-warn-25 { background-color: oklch(var(--warn-base) / 0.25) !important; }
.bg-warn-20 { background-color: oklch(var(--warn-base) / 0.2) !important; }
.bg-warn-15 { background-color: oklch(var(--warn-base) / 0.15) !important; }
.bg-warn-10 { background-color: oklch(var(--warn-base) / 0.1) !important; }
.bg-warn-5 { background-color: oklch(var(--warn-base) / 0.05) !important; }
.bg-warn-1 { background-color: oklch(var(--warn-base) / 0.01) !important; }

/* Error Background Colors */
.bg-error { background-color: oklch(var(--error-base)) !important; }
.bg-error-100 { background-color: oklch(var(--error-base)) !important; }
.bg-error-90 { background-color: oklch(var(--error-base) / 0.9) !important; }
.bg-error-80 { background-color: oklch(var(--error-base) / 0.8) !important; }
.bg-error-70 { background-color: oklch(var(--error-base) / 0.7) !important; }
.bg-error-60 { background-color: oklch(var(--error-base) / 0.6) !important; }
.bg-error-50 { background-color: oklch(var(--error-base) / 0.5) !important; }
.bg-error-40 { background-color: oklch(var(--error-base) / 0.4) !important; }
.bg-error-30 { background-color: oklch(var(--error-base) / 0.3) !important; }
.bg-error-25 { background-color: oklch(var(--error-base) / 0.25) !important; }
.bg-error-20 { background-color: oklch(var(--error-base) / 0.2) !important; }
.bg-error-15 { background-color: oklch(var(--error-base) / 0.15) !important; }
.bg-error-10 { background-color: oklch(var(--error-base) / 0.1) !important; }
.bg-error-5 { background-color: oklch(var(--error-base) / 0.05) !important; }
.bg-error-1 { background-color: oklch(var(--error-base) / 0.01) !important; }

/* Success Colors (success-n) */
.bg-success-10 { background-color: oklch(var(--success-base) / 0.1) !important; }
.bg-success-15 { background-color: oklch(var(--success-base) / 0.15) !important; }
.bg-success-20 { background-color: oklch(var(--success-base) / 0.2) !important; }
.bg-success-25 { background-color: oklch(var(--success-base) / 0.25) !important; }
.bg-success-70 { background-color: oklch(var(--success-base) / 0.7) !important; }
.bg-success-80 { background-color: oklch(var(--success-base) / 0.8) !important; }
.bg-success-120 { background-color: oklch(var(--success-base) / 1.2) !important; }
.bg-success-140 { background-color: oklch(var(--success-base) / 1.4) !important; }
.bg-success-30 { background-color: oklch(var(--success-base) / 0.3) !important; }
.bg-success-40 { background-color: oklch(var(--success-base) / 0.4) !important; }
.bg-success-50 { background-color: oklch(var(--success-base) / 0.5) !important; }
.bg-success-60 { background-color: oklch(var(--success-base) / 0.6) !important; }
.bg-success-70 { background-color: oklch(var(--success-base) / 0.7) !important; }
.bg-success-80 { background-color: oklch(var(--success-base) / 0.8) !important; }
.bg-success-90 { background-color: oklch(var(--success-base) / 0.9) !important; }

/* Warning Colors (warn-n) */
.bg-warn-10 { background-color: oklch(var(--warn-base) / 0.1) !important; }
.bg-warn-20 { background-color: oklch(var(--warn-base) / 0.2) !important; }
.bg-warn-30 { background-color: oklch(var(--warn-base) / 0.3) !important; }
.bg-warn-40 { background-color: oklch(var(--warn-base) / 0.4) !important; }
.bg-warn-50 { background-color: oklch(var(--warn-base) / 0.5) !important; }
.bg-warn-60 { background-color: oklch(var(--warn-base) / 0.6) !important; }
.bg-warn-70 { background-color: oklch(var(--warn-base) / 0.7) !important; }
.bg-warn-80 { background-color: oklch(var(--warn-base) / 0.8) !important; }
.bg-warn-90 { background-color: oklch(var(--warn-base) / 0.9) !important; }

/* Error Colors (error-n) */
.bg-error-10 { background-color: oklch(var(--error-base) / 0.1) !important; }
.bg-error-15 { background-color: oklch(var(--error-base) / 0.15) !important; }
.bg-error-20 { background-color: oklch(var(--error-base) / 0.2) !important; }
.bg-error-25 { background-color: oklch(var(--error-base) / 0.25) !important; }
.bg-error-70 { background-color: oklch(var(--error-base) / 0.7) !important; }
.bg-error-80 { background-color: oklch(var(--error-base) / 0.8) !important; }
.bg-error-120 { background-color: oklch(var(--error-base) / 1.2) !important; }
.bg-error-140 { background-color: oklch(var(--error-base) / 1.4) !important; }
.bg-error-30 { background-color: oklch(var(--error-base) / 0.3) !important; }
.bg-error-40 { background-color: oklch(var(--error-base) / 0.4) !important; }
.bg-error-50 { background-color: oklch(var(--error-base) / 0.5) !important; }
.bg-error-60 { background-color: oklch(var(--error-base) / 0.6) !important; }
.bg-error-70 { background-color: oklch(var(--error-base) / 0.7) !important; }
.bg-error-80 { background-color: oklch(var(--error-base) / 0.8) !important; }
.bg-error-90 { background-color: oklch(var(--error-base) / 0.9) !important; }

/* Complete Border Color System - 1% to 100% opacity for all tokens */

/* Accent Border Colors */
.border-accent { border-color: oklch(var(--accent-base)) !important; }
.border-accent-100 { border-color: oklch(var(--accent-base)) !important; }
.border-accent-90 { border-color: oklch(var(--accent-base) / 0.9) !important; }
.border-accent-80 { border-color: oklch(var(--accent-base) / 0.8) !important; }
.border-accent-70 { border-color: oklch(var(--accent-base) / 0.7) !important; }
.border-accent-60 { border-color: oklch(var(--accent-base) / 0.6) !important; }
.border-accent-50 { border-color: oklch(var(--accent-base) / 0.5) !important; }
.border-accent-40 { border-color: oklch(var(--accent-base) / 0.4) !important; }
.border-accent-30 { border-color: oklch(var(--accent-base) / 0.3) !important; }
.border-accent-25 { border-color: oklch(var(--accent-base) / 0.25) !important; }
.border-accent-20 { border-color: oklch(var(--accent-base) / 0.2) !important; }
.border-accent-15 { border-color: oklch(var(--accent-base) / 0.15) !important; }
.border-accent-10 { border-color: oklch(var(--accent-base) / 0.1) !important; }
.border-accent-5 { border-color: oklch(var(--accent-base) / 0.05) !important; }
.border-accent-1 { border-color: oklch(var(--accent-base) / 0.01) !important; }

/* Neutral Border Colors */
.border-neutral { border-color: oklch(var(--neutral-base)) !important; }
.border-neutral-100 { border-color: oklch(var(--neutral-base)) !important; }
.border-neutral-90 { border-color: oklch(var(--neutral-base) / 0.9) !important; }
.border-neutral-80 { border-color: oklch(var(--neutral-base) / 0.8) !important; }
.border-neutral-70 { border-color: oklch(var(--neutral-base) / 0.7) !important; }
.border-neutral-60 { border-color: oklch(var(--neutral-base) / 0.6) !important; }
.border-neutral-50 { border-color: oklch(var(--neutral-base) / 0.5) !important; }
.border-neutral-40 { border-color: oklch(var(--neutral-base) / 0.4) !important; }
.border-neutral-30 { border-color: oklch(var(--neutral-base) / 0.3) !important; }
.border-neutral-25 { border-color: oklch(var(--neutral-base) / 0.25) !important; }
.border-neutral-20 { border-color: oklch(var(--neutral-base) / 0.2) !important; }
.border-neutral-15 { border-color: oklch(var(--neutral-base) / 0.15) !important; }
.border-neutral-10 { border-color: oklch(var(--neutral-base) / 0.1) !important; }
.border-neutral-5 { border-color: oklch(var(--neutral-base) / 0.05) !important; }
.border-neutral-1 { border-color: oklch(var(--neutral-base) / 0.01) !important; }

/* Success Border Colors */
.border-success { border-color: oklch(var(--success-base)) !important; }
.border-success-100 { border-color: oklch(var(--success-base)) !important; }
.border-success-90 { border-color: oklch(var(--success-base) / 0.9) !important; }
.border-success-80 { border-color: oklch(var(--success-base) / 0.8) !important; }
.border-success-70 { border-color: oklch(var(--success-base) / 0.7) !important; }
.border-success-60 { border-color: oklch(var(--success-base) / 0.6) !important; }
.border-success-50 { border-color: oklch(var(--success-base) / 0.5) !important; }
.border-success-40 { border-color: oklch(var(--success-base) / 0.4) !important; }
.border-success-30 { border-color: oklch(var(--success-base) / 0.3) !important; }
.border-success-25 { border-color: oklch(var(--success-base) / 0.25) !important; }
.border-success-20 { border-color: oklch(var(--success-base) / 0.2) !important; }
.border-success-15 { border-color: oklch(var(--success-base) / 0.15) !important; }
.border-success-10 { border-color: oklch(var(--success-base) / 0.1) !important; }
.border-success-5 { border-color: oklch(var(--success-base) / 0.05) !important; }
.border-success-1 { border-color: oklch(var(--success-base) / 0.01) !important; }

/* Warning Border Colors */
.border-warn { border-color: oklch(var(--warn-base)) !important; }
.border-warn-100 { border-color: oklch(var(--warn-base)) !important; }
.border-warn-90 { border-color: oklch(var(--warn-base) / 0.9) !important; }
.border-warn-80 { border-color: oklch(var(--warn-base) / 0.8) !important; }
.border-warn-70 { border-color: oklch(var(--warn-base) / 0.7) !important; }
.border-warn-60 { border-color: oklch(var(--warn-base) / 0.6) !important; }
.border-warn-50 { border-color: oklch(var(--warn-base) / 0.5) !important; }
.border-warn-40 { border-color: oklch(var(--warn-base) / 0.4) !important; }
.border-warn-30 { border-color: oklch(var(--warn-base) / 0.3) !important; }
.border-warn-25 { border-color: oklch(var(--warn-base) / 0.25) !important; }
.border-warn-20 { border-color: oklch(var(--warn-base) / 0.2) !important; }
.border-warn-15 { border-color: oklch(var(--warn-base) / 0.15) !important; }
.border-warn-10 { border-color: oklch(var(--warn-base) / 0.1) !important; }
.border-warn-5 { border-color: oklch(var(--warn-base) / 0.05) !important; }
.border-warn-1 { border-color: oklch(var(--warn-base) / 0.01) !important; }

/* Error Border Colors */
.border-error { border-color: oklch(var(--error-base)) !important; }
.border-error-100 { border-color: oklch(var(--error-base)) !important; }
.border-error-90 { border-color: oklch(var(--error-base) / 0.9) !important; }
.border-error-80 { border-color: oklch(var(--error-base) / 0.8) !important; }
.border-error-70 { border-color: oklch(var(--error-base) / 0.7) !important; }
.border-error-60 { border-color: oklch(var(--error-base) / 0.6) !important; }
.border-error-50 { border-color: oklch(var(--error-base) / 0.5) !important; }
.border-error-40 { border-color: oklch(var(--error-base) / 0.4) !important; }
.border-error-30 { border-color: oklch(var(--error-base) / 0.3) !important; }
.border-error-25 { border-color: oklch(var(--error-base) / 0.25) !important; }
.border-error-20 { border-color: oklch(var(--error-base) / 0.2) !important; }
.border-error-15 { border-color: oklch(var(--error-base) / 0.15) !important; }
.border-error-10 { border-color: oklch(var(--error-base) / 0.1) !important; }
.border-error-5 { border-color: oklch(var(--error-base) / 0.05) !important; }
.border-error-1 { border-color: oklch(var(--error-base) / 0.01) !important; }

/* Complete Text Color System - 1% to 100% opacity for all tokens */

/* Accent Text Colors */
.text-accent { color: oklch(var(--accent-base)) !important; }
.text-accent-100 { color: oklch(var(--accent-base)) !important; }
.text-accent-90 { color: oklch(var(--accent-base) / 0.9) !important; }
.text-accent-80 { color: oklch(var(--accent-base) / 0.8) !important; }
.text-accent-70 { color: oklch(var(--accent-base) / 0.7) !important; }
.text-accent-60 { color: oklch(var(--accent-base) / 0.6) !important; }
.text-accent-50 { color: oklch(var(--accent-base) / 0.5) !important; }
.text-accent-40 { color: oklch(var(--accent-base) / 0.4) !important; }
.text-accent-30 { color: oklch(var(--accent-base) / 0.3) !important; }
.text-accent-20 { color: oklch(var(--accent-base) / 0.2) !important; }
.text-accent-15 { color: oklch(var(--accent-base) / 0.15) !important; }
.text-accent-10 { color: oklch(var(--accent-base) / 0.1) !important; }
.text-accent-5 { color: oklch(var(--accent-base) / 0.05) !important; }
.text-accent-1 { color: oklch(var(--accent-base) / 0.01) !important; }

/* Neutral Text Colors */
.text-neutral { color: oklch(var(--neutral-base)) !important; }
.text-neutral-100 { color: oklch(var(--neutral-base)) !important; }
.text-neutral-90 { color: oklch(var(--neutral-base) / 0.9) !important; }
.text-neutral-80 { color: oklch(var(--neutral-base) / 0.8) !important; }
.text-neutral-70 { color: oklch(var(--neutral-base) / 0.7) !important; }
.text-neutral-60 { color: oklch(var(--neutral-base) / 0.6) !important; }
.text-neutral-50 { color: oklch(var(--neutral-base) / 0.5) !important; }
.text-neutral-40 { color: oklch(var(--neutral-base) / 0.4) !important; }
.text-neutral-30 { color: oklch(var(--neutral-base) / 0.3) !important; }
.text-neutral-25 { color: oklch(var(--neutral-base) / 0.25) !important; }
.text-neutral-20 { color: oklch(var(--neutral-base) / 0.2) !important; }
.text-neutral-15 { color: oklch(var(--neutral-base) / 0.15) !important; }
.text-neutral-10 { color: oklch(var(--neutral-base) / 0.1) !important; }
.text-neutral-5 { color: oklch(var(--neutral-base) / 0.05) !important; }
.text-neutral-1 { color: oklch(var(--neutral-base) / 0.01) !important; }

/* Success Text Colors */
.text-success { color: oklch(var(--success-base)) !important; }
.text-success-100 { color: oklch(var(--success-base)) !important; }
.text-success-90 { color: oklch(var(--success-base) / 0.9) !important; }
.text-success-80 { color: oklch(var(--success-base) / 0.8) !important; }
.text-success-70 { color: oklch(var(--success-base) / 0.7) !important; }
.text-success-60 { color: oklch(var(--success-base) / 0.6) !important; }
.text-success-50 { color: oklch(var(--success-base) / 0.5) !important; }
.text-success-40 { color: oklch(var(--success-base) / 0.4) !important; }
.text-success-30 { color: oklch(var(--success-base) / 0.3) !important; }
.text-success-20 { color: oklch(var(--success-base) / 0.2) !important; }
.text-success-15 { color: oklch(var(--success-base) / 0.15) !important; }
.text-success-10 { color: oklch(var(--success-base) / 0.1) !important; }
.text-success-5 { color: oklch(var(--success-base) / 0.05) !important; }
.text-success-1 { color: oklch(var(--success-base) / 0.01) !important; }

/* Warning Text Colors */
.text-warn { color: oklch(var(--warn-base)) !important; }
.text-warn-100 { color: oklch(var(--warn-base)) !important; }
.text-warn-90 { color: oklch(var(--warn-base) / 0.9) !important; }
.text-warn-80 { color: oklch(var(--warn-base) / 0.8) !important; }
.text-warn-70 { color: oklch(var(--warn-base) / 0.7) !important; }
.text-warn-60 { color: oklch(var(--warn-base) / 0.6) !important; }
.text-warn-50 { color: oklch(var(--warn-base) / 0.5) !important; }
.text-warn-40 { color: oklch(var(--warn-base) / 0.4) !important; }
.text-warn-30 { color: oklch(var(--warn-base) / 0.3) !important; }
.text-warn-20 { color: oklch(var(--warn-base) / 0.2) !important; }
.text-warn-15 { color: oklch(var(--warn-base) / 0.15) !important; }
.text-warn-10 { color: oklch(var(--warn-base) / 0.1) !important; }
.text-warn-5 { color: oklch(var(--warn-base) / 0.05) !important; }
.text-warn-1 { color: oklch(var(--warn-base) / 0.01) !important; }

/* Error Text Colors */
.text-error { color: oklch(var(--error-base)) !important; }
.text-error-100 { color: oklch(var(--error-base)) !important; }
.text-error-90 { color: oklch(var(--error-base) / 0.9) !important; }
.text-error-80 { color: oklch(var(--error-base) / 0.8) !important; }
.text-error-70 { color: oklch(var(--error-base) / 0.7) !important; }
.text-error-60 { color: oklch(var(--error-base) / 0.6) !important; }
.text-error-50 { color: oklch(var(--error-base) / 0.5) !important; }
.text-error-40 { color: oklch(var(--error-base) / 0.4) !important; }
.text-error-30 { color: oklch(var(--error-base) / 0.3) !important; }
.text-error-20 { color: oklch(var(--error-base) / 0.2) !important; }
.text-error-15 { color: oklch(var(--error-base) / 0.15) !important; }
.text-error-10 { color: oklch(var(--error-base) / 0.1) !important; }
.text-error-5 { color: oklch(var(--error-base) / 0.05) !important; }
.text-error-1 { color: oklch(var(--error-base) / 0.01) !important; }

/* Focus Ring Colors for Buttons */
.focus-visible\:ring-accent:focus-visible { --tw-ring-color: oklch(var(--accent-base) / 0.5) !important; }
.focus-visible\:ring-success:focus-visible { --tw-ring-color: oklch(var(--success-base) / 0.5) !important; }
.focus-visible\:ring-error:focus-visible { --tw-ring-color: oklch(var(--error-base) / 0.5) !important; }
.focus-visible\:ring-secondary:focus-visible { --tw-ring-color: oklch(var(--secondary) / 0.5) !important; }
.focus-visible\:ring-muted:focus-visible { --tw-ring-color: oklch(var(--muted) / 0.5) !important; }

/* Additional muted variants for interactive states */
.bg-muted\/60 { background-color: oklch(var(--muted) / 0.6) !important; }
.bg-muted\/70 { background-color: oklch(var(--muted) / 0.7) !important; }
.bg-muted\/80 { background-color: oklch(var(--muted) / 0.8) !important; }
.bg-muted\/130 { background-color: oklch(var(--muted) / 1.3) !important; }
.bg-muted\/140 { background-color: oklch(var(--muted) / 1.4) !important; }
.bg-muted\/150 { background-color: oklch(var(--muted) / 1.5) !important; }
.bg-muted\/160 { background-color: oklch(var(--muted) / 1.6) !important; }

/* Additional secondary variants for interactive states */
.bg-secondary\/60 { background-color: oklch(var(--secondary) / 0.6) !important; }
.bg-secondary\/70 { background-color: oklch(var(--secondary) / 0.7) !important; }
.bg-secondary\/130 { background-color: oklch(var(--secondary) / 1.3) !important; }
.bg-secondary\/150 { background-color: oklch(var(--secondary) / 1.5) !important; }

/* Theme-Aware Hover States */
/* These classes automatically get brighter in dark mode and darker in light mode */

/* Primary/Accent Hover States */
.hover-accent-theme {
  transition: background-color 0.2s ease;
}

.hover-accent-theme:hover {
  background-color: oklch(var(--accent-90)) !important;
}

[data-theme="dark"] .hover-accent-theme:hover {
  background-color: oklch(var(--accent-110)) !important;
}

/* Secondary/Muted Hover States */
.hover-secondary-theme {
  transition: background-color 0.2s ease;
}

.hover-secondary-theme:hover {
  background-color: oklch(var(--secondary) / 0.8) !important;
}

[data-theme="dark"] .hover-secondary-theme:hover {
  background-color: oklch(var(--muted) / 0.3) !important;
}

/* Ghost/Transparent Hover States */
.hover-ghost-theme {
  transition: background-color 0.2s ease;
}

.hover-ghost-theme:hover {
  background-color: oklch(var(--muted) / 0.08) !important;
}

[data-theme="dark"] .hover-ghost-theme:hover {
  background-color: oklch(var(--muted) / 0.15) !important;
}

/* Success Hover States */
.hover-success-theme {
  transition: background-color 0.2s ease;
}

.hover-success-theme:hover {
  background-color: oklch(var(--success-90)) !important;
}

[data-theme="dark"] .hover-success-theme:hover {
  background-color: oklch(var(--success-110)) !important;
}

/* Error/Destructive Hover States */
.hover-error-theme {
  transition: background-color 0.2s ease;
}

.hover-error-theme:hover {
  background-color: oklch(var(--error-90)) !important;
}

[data-theme="dark"] .hover-error-theme:hover {
  background-color: oklch(var(--error-110)) !important;
}

/* Full Opacity Background Colors - Already included in complete system above */

/* Legacy compatibility - keep existing neutral alpha classes */
.bg-neutral-alpha-2 {
  background-color: rgba(0, 0, 0, 0.05) !important;
}

.dark .bg-neutral-alpha-2 {
  background-color: rgba(255, 255, 255, 0.05) !important;
}

/* Hover state for neutral alpha */
.hover\:bg-neutral-alpha-2:hover {
  background-color: rgba(0, 0, 0, 0.05) !important;
}

.dark .hover\:bg-neutral-alpha-2:hover {
  background-color: rgba(255, 255, 255, 0.05) !important;
}

/* Dotted stroke for inactive supporter icons */
.stroke-dasharray-2 {
  stroke-dasharray: 2;
}

/* Force white text on dark backgrounds for better readability */
[style*="background-color"] {
  color-scheme: light dark;
}

/* Sticky tabs styling */
#profile-tabs-header {
  position: relative;
  z-index: var(--z-fixed-header);
  transition: all 0.2s ease-in-out;
}

.sticky-tabs {
  position: fixed !important;
  top: 0;
  left: 0;
  right: 0;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  background-color: hsl(var(--background));
  animation: slideDown 0.2s ease-out;
  z-index: var(--z-fixed-header);
}

.dark .sticky-tabs {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.group-tabs-header-sticky {
  position: relative !important;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  background-color: hsl(var(--background));
  z-index: var(--z-fixed-header);
  transition: opacity 0.2s ease-out;
}

/* Section header styling */
.section-header {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transition-property: box-shadow, background-color, backdrop-filter;
  visibility: visible !important;
  opacity: 1 !important;
  position: relative;
}

.section-header-sticky {
  position: fixed !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
  background-color: hsl(var(--background)) !important;
  backdrop-filter: blur(8px);
  z-index: var(--z-fixed-header) !important;
  margin: 0 !important;
  padding-left: 1.5rem !important;
  padding-right: 1.5rem !important;
  border-bottom: 1px solid hsl(var(--border)) !important;
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  opacity: 1;
}

.dark .section-header-sticky {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  background-color: hsl(var(--background) / 0.95) !important;
}

/* Smooth transition states for sticky headers */
.section-header-transitioning {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transition-property: transform, top, opacity, box-shadow, background-color;
}

/* Fade transitions for sticky headers - simpler and more reliable */
.section-header-fade-enter {
  opacity: 0 !important;
  transform: translateY(-8px) !important;
}

.section-header-fade-enter-active {
  opacity: 1 !important;
  transform: translateY(0) !important;
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.section-header-fade-exit {
  opacity: 1 !important;
  transform: translateY(0) !important;
}

.section-header-fade-exit-active {
  opacity: 0 !important;
  transform: translateY(-8px) !important;
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Fallback: Keep slide animations for compatibility but prefer fade */
.section-header-slide-up-enter {
  transform: translateY(100%);
}

.section-header-slide-up-enter-active {
  transform: translateY(0);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.section-header-slide-down-enter {
  transform: translateY(-100%);
}

.section-header-slide-down-enter-active {
  transform: translateY(0);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.section-header-slide-up-exit {
  transform: translateY(0);
}

.section-header-slide-up-exit-active {
  transform: translateY(-100%);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.section-header-slide-down-exit {
  transform: translateY(0);
}

.section-header-slide-down-exit-active {
  transform: translateY(100%);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Smooth position transition for sticky headers */
.section-header-position-transition {
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              top 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Sidebar smooth animations */
.sidebar-smooth-transition {
  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  /* REMOVED: transform: translateZ(0) - creates stacking context that breaks fixed positioning */
  will-change: width, transform, box-shadow;
  /* Ensure sidebar doesn't create shadows outside its boundaries */
  overflow: visible;
  /* REMOVED: contain: layout - creates stacking context that breaks fixed positioning */
  /* REMOVED: backface-visibility: hidden - creates stacking context that breaks fixed positioning */
  /* REMOVED: perspective: 1000px - creates stacking context that breaks fixed positioning */
}

/* Sidebar hover state improvements */
.sidebar-hover-overlay {
  transform: translateX(0);
  box-shadow: 4px 0 12px -4px rgba(0, 0, 0, 0.15);
}

/* Sidebar content fade transitions - simplified */
.sidebar-content-fade {
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Sidebar icon positioning - prevent layout shifts */
.sidebar-icon-container {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 1.25rem; /* 20px - match icon size */
  height: 1.25rem; /* 20px - match icon size */
  flex-shrink: 0;
  /* Smooth transition for positioning */
  transition: margin 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Sidebar button positioning - responsive to sidebar state */
.sidebar-nav-button {
  /* Default: center content in collapsed state */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  padding: 0.75rem !important; /* 12px padding */
  /* Smooth transitions */
  transition: justify-content 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              padding 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  /* Ensure smooth transitions without layout shifts */
  transform: translateZ(0); /* Force hardware acceleration */
  backface-visibility: hidden;
  box-sizing: border-box;
  /* No margins - let container handle spacing */
  margin: 0.125rem 0; /* Only vertical margins */
  border-radius: 0.75rem; /* 12px - rounded corners */
}

/* When sidebar is expanded, left-align button content */
.sidebar-nav-button-expanded {
  justify-content: flex-start !important;
}

/* When sidebar is collapsed, ensure no horizontal margins */
.w-16 .sidebar-nav-button {
  /* No horizontal margins in collapsed state - container handles spacing */
  margin: 0.125rem 0; /* Only vertical margins */
}

/* When sidebar is expanded (hover or persistent), align to left with proper padding */
.w-64 .sidebar-nav-button,
.sidebar-hover-overlay .sidebar-nav-button {
  justify-content: flex-start !important;
  padding-left: 0.5rem !important; /* 8px - keeps icon in same visual position */
  padding-right: 0.5rem !important;
  /* Reset margins for expanded state */
  margin: 0.125rem 0.25rem; /* Standard margins when expanded */
  border-radius: 0.5rem; /* 8px - less rounded when expanded */
}

/* Sidebar text animation */
.sidebar-text-container {
  overflow: hidden;
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              max-width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  /* Ensure text doesn't push icon around */
  margin-left: 0;
  padding-left: 0;
}

/* Enhanced shadow and backdrop when sticky - Reduced blur for subtlety */
.section-header-enhanced {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(8px);
  background-color: hsl(var(--background) / 0.95);
}

.dark .section-header-enhanced {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

/* Animation for lightbox fade in */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-fadeInFast {
  animation: fadeIn 0.2s ease-out;
}

/* Mobile navigation links alignment */
.mobile-nav-links {
  justify-content: center;
}

/* When the links overflow and require scrolling, align them to the left */
@media (max-width: 640px) {
  .overflow-x-auto:not([style*="overflow: hidden"]) .mobile-nav-links {
    justify-content: flex-start;
  }
}

/* Leaflet map styling */
.leaflet-container {
  background-color: hsl(var(--background)) !important;
  z-index: 1 !important;
}

.dark .leaflet-container {
  background-color: hsl(var(--background)) !important;
}

.leaflet-pane,
.leaflet-map-pane,
.leaflet-tile-pane,
.leaflet-overlay-pane,
.leaflet-shadow-pane,
.leaflet-marker-pane,
.leaflet-tooltip-pane,
.leaflet-popup-pane {
  z-index: auto !important;
}

.leaflet-control-container,
.leaflet-control {
  z-index: 10 !important;
}

/* Enable text selection on mobile devices while disabling native context menu */
@media (pointer: coarse) {
  /* Disable native touch callout menu but keep text selection enabled for content */
  * {
    -webkit-touch-callout: none;
  }
}

/* Mobile Bottom Navigation Styles */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

/*
 * MAIN CONTENT SPACING - MOVED TO fixed-layer.css
 *
 * Main content padding for floating elements is now centralized in:
 * app/styles/fixed-layer.css
 *
 * This ensures consistent spacing and avoids duplicate rules.
 */

/* Specific spacing for page content containers */
@media (max-width: 767px) {
  body {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .page-content,
  #combined-links-section {
    margin-bottom: 20px;
  }
}

/* Consistent page max-width for all pages */
.page-container {
  max-width: 1024px; /* 4xl equivalent */
  margin: 0 auto;
  width: 100%;
}

/*
 * LEGACY GLASSMORPHISM CLASSES - DEPRECATED
 *
 * These classes have been replaced by the FloatingCard component system.
 * Use FloatingCard variants instead:
 * - FloatingHeader (replaces liquid-glass)
 * - FloatingOverlay (replaces glass-overlay)
 * - FloatingPledge (replaces glass-pledge)
 *
 * TODO: Remove these classes after confirming no remaining usage
 */

/* Desktop Sidebar Navigation Alignment */
@media (min-width: 768px) {
  /* Ensure desktop sidebar navigation items maintain left-aligned text */
  .sidebar-text-container span {
    text-align: left !important;
  }
}

/* Mobile Bottom Navigation Icon and Text Alignment */
@media (max-width: 767px) {
  /* Center-align mobile bottom navigation icons and text */
  .mobile-bottom-nav-button {
    text-align: center;
    align-items: center;
    justify-content: center;
  }

  .mobile-bottom-nav-button span {
    text-align: center;
  }

  /* Remove shadows only from specific sidebar elements - preserve all floating card shadows */
  .sidebar-hover-overlay,
  .sidebar-smooth-transition {
    box-shadow: none;
  }

  /* Only target actual sidebar components, never floating cards */
  [data-component="sidebar"]:not([data-floating-card]) {
    box-shadow: none;
  }

  /* Remove shadows only from actual sidebar elements, not floating cards */
  .fixed.z-\[100\].left-0:not([data-floating-card]) {
    box-shadow: none;
  }
}

/* Pending page link styling */
.pending-page {
  opacity: 0.7;
  position: relative;
}

.pending-page::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: currentColor;
  opacity: 0.5;
  animation: pending-pulse 2s ease-in-out infinite;
}

@keyframes pending-pulse {
  0%, 100% {
    opacity: 0.3;
  }
  50% {
    opacity: 0.7;
  }
}

/* Warning dot flash animation */
@keyframes warning-flash {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.4;
    transform: scale(0.9);
  }
}

/* Mobile Navigation Optimizations */
@layer components {
  /* Enhanced touch targets for mobile navigation */
  .mobile-nav-button {
    @apply touch-manipulation select-none;
    min-height: 44px; /* iOS recommended touch target */
    min-width: 44px;
  }

  /* Instant feedback animations */
  .nav-button-pressed {
    @apply scale-95 bg-primary/20;
    transition: all 75ms ease-out;
  }

  /* Page transition animations */
  .animate-fade-in {
    animation: fadeIn 200ms ease-out forwards;
  }

  .animate-fade-out {
    animation: fadeOut 200ms ease-out forwards;
  }

  .animate-slide-in-left {
    animation: slideInLeft 200ms ease-out forwards;
  }

  .animate-slide-in-right {
    animation: slideInRight 200ms ease-out forwards;
  }

  .animate-slide-out-left {
    animation: slideOutLeft 200ms ease-out forwards;
  }

  .animate-slide-out-right {
    animation: slideOutRight 200ms ease-out forwards;
  }
}

/* Additional keyframe animations for mobile navigation */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes slideInLeft {
  from { transform: translateX(-100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slideInRight {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOutLeft {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(-100%); opacity: 0; }
}

@keyframes slideOutRight {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(100%); opacity: 0; }
}

@keyframes slideDown {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* SIMPLIFIED: Save header body class for consistent content pushing */
/* DON'T add padding to body - that pushes the save header down too! */
/* Instead, push down only the main content areas */

body.has-sticky-save-header .slide-up-page,
body.has-sticky-save-header .new-page-container,
body.has-sticky-save-header main,
body.has-sticky-save-header [data-page-content] {
  padding-top: 56px !important; /* Push content down by save header height */
  transition: padding-top 300ms ease-out;
}

/* Remove all complex header spacing rules that interfere with simple layout */
body.has-sticky-save-header header[data-component="main-header"] {
  top: unset !important;
  margin-top: unset !important;
}

body.has-sticky-save-header .page-header-edit-mode {
  margin-top: unset !important;
}

body.has-sticky-save-header header[data-component="main-header"] + div {
  height: unset !important;
}


