@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import our centralized card theme system */
@import './styles/card-theme.css';

/* Import allocation bar animations */
@import './styles/allocation-bar-animations.css';

/* Hide 3D force graph library navigation info overlay */
.scene-nav-info {
  display: none !important;
}

/* Ensure 3D force graph has transparent background - the library injects inline styles */
/* Target the container div that ForceGraph3D creates and any child elements */
[class*="force-graph"],
.force-graph-container,
.scene-container {
  background: transparent !important;
  background-color: transparent !important;
}

/* Target any div or canvas inside the graph container that might have inline background styles */
[class*="force-graph"] > *,
.force-graph-container > *,
.scene-container > * {
  background: transparent !important;
  background-color: transparent !important;
}

/* Fixed layer tokens and utilities */
@import './styles/fixed-layer.css';

/* Import unified content display styles */
@import './styles/content-display.css';

/* Global background & typography baseline */
html, body {
  @apply min-h-screen bg-background text-foreground;
}

/* Clean paragraph styling for viewer content */
.viewer-paragraph {
  @apply flex items-start gap-3 py-2;
}

.viewer-paragraph.dense-paragraph {
  @apply inline-block mr-4;
}

.viewer-paragraph.dense-paragraph .paragraph-number {
  @apply mr-3;
}

.viewer-paragraph.normal-paragraph {
  @apply block;
}

.viewer-paragraph .paragraph-number {
  @apply text-xs text-muted-foreground font-mono min-w-[2rem] text-right select-none;
}

.viewer-paragraph .paragraph-content {
  @apply flex-1 leading-relaxed text-foreground;
}

.viewer-text-content {
  @apply text-foreground;
}

.viewer-pill-link {
  @apply inline-flex items-center;
  /* Links in viewer are not editable, just navigable */
}

.dense-content-flow {
  @apply leading-relaxed;
}

.normal-content-flow {
  @apply space-y-3;
}

/* REMOVED: Legacy slate-editor-container styles - using clean Slate.js now */

/* Custom slider styles for subscription tier selector */
.slider {
  -webkit-appearance: none;
  appearance: none;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  height: 20px;
  width: 20px;
  border-radius: 50%;
  background: oklch(var(--accent));
  cursor: pointer;
  border: 2px solid hsl(var(--background));
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.slider::-moz-range-thumb {
  height: 20px;
  width: 20px;
  border-radius: 50%;
  background: oklch(var(--accent));
  cursor: pointer;
  border: 2px solid hsl(var(--background));
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Downgrade slider styles (yellow for downgrades) */
.slider-downgrade::-webkit-slider-thumb {
  background: #eab308;
}

.slider-downgrade::-moz-range-thumb {
  background: #eab308;
}

/* Cancellation slider styles (red for cancellation) */
.slider-cancellation::-webkit-slider-thumb {
  background: #ef4444;
}

.slider-cancellation::-moz-range-thumb {
  background: #ef4444;
}

/* Custom amount button animation */
@keyframes slide-in-from-right {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-in {
  animation-fill-mode: both;
}

.slide-in-from-right-2 {
  animation: slide-in-from-right 0.3s ease-out;
}

/* Shiny Add Funds chip with shimmer effect */
@keyframes shimmer {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

/* Full shimmer animation - starts off-screen right, ends off-screen left (single pass) */
@keyframes shimmer-full {
  0% {
    background-position: 200% center;
  }
  100% {
    background-position: -200% center;
  }
}

/* Single shimmer animation - slides from right to left once
   With 300% background-size: starts at 200% (off-screen right), ends at -100% (off-screen left) */
@keyframes shimmer-once {
  0% {
    background-position: 200% center;
  }
  100% {
    background-position: -100% center;
  }
}

@keyframes glow-pulse {
  0%, 100% {
    box-shadow: 0 0 8px rgba(22, 163, 74, 0.5), 0 0 16px rgba(22, 163, 74, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }
  50% {
    box-shadow: 0 0 12px rgba(22, 163, 74, 0.7), 0 0 24px rgba(22, 163, 74, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }
}

/* ============================================
   SHINY PILL LINK STYLE
   Uses accent color with shimmer effect on hover/active only
   ============================================ */
.pill-shiny-style {
  position: relative;
  overflow: hidden;
  background-size: 200% 100%;
  border: 1px solid rgba(255, 255, 255, 0.15);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  box-shadow:
    0 0 4px oklch(var(--accent-base) / 0.3),
    0 0 8px oklch(var(--accent-base) / 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

/* Create shimmer gradient overlay - only animates on hover */
.pill-shiny-style::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    110deg,
    transparent 0%,
    transparent 40%,
    rgba(255, 255, 255, 0.3) 50%,
    transparent 60%,
    transparent 100%
  );
  background-size: 200% 100%;
  background-position: -200% center;
  pointer-events: none;
  border-radius: inherit;
  transition: background-position 0s;
}

.pill-shiny-style:hover {
  box-shadow:
    0 0 10px oklch(var(--accent-base) / 0.5),
    0 0 20px oklch(var(--accent-base) / 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.pill-shiny-style:hover::before {
  animation: shimmer 1.5s ease-in-out infinite;
}

.pill-shiny-style:active::before {
  animation: shimmer 0.8s ease-in-out infinite;
}

.pill-shiny-style:active {
  box-shadow:
    0 0 14px oklch(var(--accent-base) / 0.6),
    0 0 28px oklch(var(--accent-base) / 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.35);
}

/* ============================================
   SHINY OUTLINE PILL LINK STYLE
   Outline variant with brighter top border and accent shimmer
   ============================================ */
.pill-outline-shiny-style {
  position: relative;
  overflow: hidden;
  /* Brighter top border using border-image gradient */
  border-top-color: oklch(var(--accent-base) / 0.4);
}

.pill-outline-shiny-style:hover {
  border-top-color: oklch(var(--accent-base) / 0.6);
}

.pill-outline-shiny-style:active {
  border-top-color: oklch(var(--accent-base) / 0.7);
}

/* Override shimmer to use accent color instead of white */
.pill-outline-shiny-style::before {
  background: linear-gradient(
    110deg,
    transparent 0%,
    transparent 45%,
    oklch(var(--accent-base) / 0.3) 50%,
    transparent 55%,
    transparent 100%
  );
  background-size: 300% 100%;
  background-position: 200% center;
}

/* ============================================
   SHINY SHIMMER BASE SYSTEM
   Single source of truth for shimmer effects.
   All shiny components inherit from .shiny-shimmer-base

   Inheritance cascade:
   .shiny-shimmer-base (shimmer animation)
     └── .shiny-glow-base (adds colored glow for solid buttons)
           ├── .button-shiny-style (primary color)
           ├── .button-destructive-shiny-style (error color)
           └── .button-success-shiny-style (success color)
     └── .shiny-skeuomorphic-base (adds 3D depth for light buttons)
           ├── .button-secondary-shiny-style (neutral)
           ├── .button-outline-shiny-style (minimal)
           ├── .button-destructive-secondary-shiny-style (error tint)
           └── .button-success-secondary-shiny-style (success tint)
   ============================================ */

/* Base shimmer - provides the sliding highlight effect */
.shiny-shimmer-base {
  position: relative;
  overflow: hidden;
}

.shiny-shimmer-base::before {
  content: '';
  position: absolute;
  inset: 0;
  /* Narrow highlight band (10% wide) in a 300% background = completely hidden at edges */
  background: linear-gradient(
    110deg,
    transparent 0%,
    transparent 45%,
    rgba(255, 255, 255, 0.4) 50%,
    transparent 55%,
    transparent 100%
  );
  background-size: 300% 100%;
  /* Start off-screen right - at 200%, the 50% highlight is at position 150%, way outside the 0-100% visible area */
  background-position: 200% center;
  pointer-events: none;
  border-radius: inherit;
  /* Double-ensure invisibility at rest */
  opacity: 0;
}

.shiny-shimmer-base:hover::before {
  opacity: 1;
  animation: shimmer-once 0.6s ease-out forwards;
}

/* Glow base - for solid colored buttons (primary, destructive, success) */
.shiny-glow-base {
  border: 1px solid rgba(255, 255, 255, 0.15);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

/* Skeuomorphic base - for light/secondary buttons */
.shiny-skeuomorphic-base {
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.6),
    inset 0 -1px 0 rgba(0, 0, 0, 0.05),
    0 1px 4px rgba(0, 0, 0, 0.1);
  background-image: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.2) 0%,
    rgba(255, 255, 255, 0.05) 50%,
    rgba(0, 0, 0, 0.03) 100%
  );
}

.shiny-skeuomorphic-base:hover {
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.8),
    inset 0 -1px 0 rgba(0, 0, 0, 0.05),
    0 2px 8px rgba(0, 0, 0, 0.12);
}

.shiny-skeuomorphic-base:active {
  box-shadow:
    inset 0 1px 3px rgba(0, 0, 0, 0.1),
    inset 0 -1px 0 rgba(255, 255, 255, 0.4);
}

/* ============================================
   PRIMARY BUTTON SHINY - Inherits shimmer + glow
   ============================================ */
.button-shiny-style {
  box-shadow:
    0 0 4px oklch(var(--primary) / 0.3),
    0 0 8px oklch(var(--primary) / 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

.button-shiny-style:hover {
  box-shadow:
    0 0 10px oklch(var(--primary) / 0.5),
    0 0 20px oklch(var(--primary) / 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.button-shiny-style:active {
  box-shadow:
    0 0 14px oklch(var(--primary) / 0.6),
    0 0 28px oklch(var(--primary) / 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.35);
}

/* ============================================
   DESTRUCTIVE BUTTON SHINY - Inherits shimmer + glow
   ============================================ */
.button-destructive-shiny-style {
  box-shadow:
    0 0 4px oklch(var(--error) / 0.3),
    0 0 8px oklch(var(--error) / 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

.button-destructive-shiny-style:hover {
  box-shadow:
    0 0 10px oklch(var(--error) / 0.5),
    0 0 20px oklch(var(--error) / 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.button-destructive-shiny-style:active {
  box-shadow:
    0 0 14px oklch(var(--error) / 0.6),
    0 0 28px oklch(var(--error) / 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.35);
}

/* ============================================
   SUCCESS BUTTON SHINY - Inherits shimmer + glow
   ============================================ */
.button-success-shiny-style {
  box-shadow:
    0 0 4px oklch(var(--success) / 0.3),
    0 0 8px oklch(var(--success) / 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

.button-success-shiny-style:hover {
  box-shadow:
    0 0 10px oklch(var(--success) / 0.5),
    0 0 20px oklch(var(--success) / 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.button-success-shiny-style:active {
  box-shadow:
    0 0 14px oklch(var(--success) / 0.6),
    0 0 28px oklch(var(--success) / 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.35);
}

/* ============================================
   SECONDARY BUTTON SHINY - Inherits shimmer + skeuomorphic
   ============================================ */
.button-secondary-shiny-style {
  border: 1px solid rgba(0, 0, 0, 0.1);
}

/* ============================================
   OUTLINE BUTTON SHINY - Minimal skeuomorphic
   ============================================ */
.button-outline-shiny-style {
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.3),
    0 1px 2px rgba(0, 0, 0, 0.03);
}

.button-outline-shiny-style:hover {
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.4),
    0 2px 4px rgba(0, 0, 0, 0.05);
}

.button-outline-shiny-style:active {
  box-shadow:
    inset 0 1px 2px rgba(0, 0, 0, 0.05);
}

.button-outline-shiny-style:disabled {
  box-shadow: none;
}

/* ============================================
   DESTRUCTIVE-SECONDARY SHINY - Inherits shimmer + skeuomorphic with error tint
   Uses brighter error color for top highlight with faint neutral addition
   Internal gradient gets redder towards the top
   ============================================ */
.button-destructive-secondary-shiny-style {
  border: 1px solid oklch(var(--error) / 0.15);
  box-shadow:
    inset 0 1px 0 oklch(var(--error) / 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 oklch(var(--error) / 0.05),
    0 1px 4px oklch(var(--error) / 0.1);
  background-image: linear-gradient(
    to bottom,
    oklch(var(--error) / 0.12) 0%,
    oklch(var(--error) / 0.04) 50%,
    transparent 100%
  );
}

.button-destructive-secondary-shiny-style:hover {
  box-shadow:
    inset 0 1px 0 oklch(var(--error) / 0.35),
    inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 oklch(var(--error) / 0.08),
    0 2px 8px oklch(var(--error) / 0.15);
  background-image: linear-gradient(
    to bottom,
    oklch(var(--error) / 0.18) 0%,
    oklch(var(--error) / 0.06) 50%,
    transparent 100%
  );
}

.button-destructive-secondary-shiny-style:active {
  box-shadow:
    inset 0 1px 3px oklch(var(--error) / 0.12),
    inset 0 -1px 0 oklch(var(--error) / 0.15);
}

/* ============================================
   SUCCESS-SECONDARY SHINY - Inherits shimmer + skeuomorphic with success tint
   Uses brighter success color for top highlight with faint neutral addition
   Internal gradient gets greener towards the top
   ============================================ */
.button-success-secondary-shiny-style {
  border: 1px solid oklch(var(--success) / 0.15);
  box-shadow:
    inset 0 1px 0 oklch(var(--success) / 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 oklch(var(--success) / 0.05),
    0 1px 4px oklch(var(--success) / 0.1);
  background-image: linear-gradient(
    to bottom,
    oklch(var(--success) / 0.12) 0%,
    oklch(var(--success) / 0.04) 50%,
    transparent 100%
  );
}

.button-success-secondary-shiny-style:hover {
  box-shadow:
    inset 0 1px 0 oklch(var(--success) / 0.35),
    inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 oklch(var(--success) / 0.08),
    0 2px 8px oklch(var(--success) / 0.15);
  background-image: linear-gradient(
    to bottom,
    oklch(var(--success) / 0.18) 0%,
    oklch(var(--success) / 0.06) 50%,
    transparent 100%
  );
}

.button-success-secondary-shiny-style:active {
  box-shadow:
    inset 0 1px 3px oklch(var(--success) / 0.12),
    inset 0 -1px 0 oklch(var(--success) / 0.15);
}

/* ============================================
   SHINY INPUT STYLE
   Skeuomorphic effect for inputs in shiny mode
   ============================================ */
.input-shiny-style {
  box-shadow:
    inset 0 1px 3px rgba(0, 0, 0, 0.08),
    inset 0 0 0 1px rgba(0, 0, 0, 0.05),
    0 1px 0 rgba(255, 255, 255, 0.5);
  background-image: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 0.02) 0%,
    transparent 20%
  );
}

.input-shiny-style:focus {
  box-shadow:
    inset 0 1px 3px rgba(0, 0, 0, 0.1),
    inset 0 0 0 1px oklch(var(--primary) / 0.3),
    0 0 0 3px oklch(var(--primary) / 0.1),
    0 1px 0 rgba(255, 255, 255, 0.5);
}

/* ============================================
   SHINY BADGE STYLES
   Shimmer effects for badges in shiny mode
   ============================================ */

/* Primary/default badge shiny style */
.badge-shiny-style {
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.15);
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.15);
  box-shadow:
    0 0 3px oklch(var(--primary) / 0.3),
    0 0 6px oklch(var(--primary) / 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

.badge-shiny-style::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    110deg,
    transparent 0%,
    transparent 40%,
    rgba(255, 255, 255, 0.25) 50%,
    transparent 60%,
    transparent 100%
  );
  background-size: 200% 100%;
  background-position: -200% center;
  pointer-events: none;
  border-radius: inherit;
}

.badge-shiny-style:hover::before {
  animation: shimmer 1.5s ease-in-out infinite;
}

.badge-shiny-style:hover {
  box-shadow:
    0 0 6px oklch(var(--primary) / 0.4),
    0 0 12px oklch(var(--primary) / 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

/* Secondary badge shiny style - skeuomorphic */
.badge-secondary-shiny-style {
  position: relative;
  overflow: hidden;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.5),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03),
    0 1px 2px rgba(0, 0, 0, 0.05);
  background-image: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.1) 0%,
    rgba(255, 255, 255, 0) 50%,
    rgba(0, 0, 0, 0.02) 100%
  );
}

.badge-secondary-shiny-style:hover {
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.6),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03),
    0 1px 3px rgba(0, 0, 0, 0.08);
}

/* Destructive badge shiny style */
.badge-destructive-shiny-style {
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.15);
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.15);
  box-shadow:
    0 0 3px oklch(var(--error) / 0.3),
    0 0 6px oklch(var(--error) / 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

.badge-destructive-shiny-style::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    110deg,
    transparent 0%,
    transparent 40%,
    rgba(255, 255, 255, 0.25) 50%,
    transparent 60%,
    transparent 100%
  );
  background-size: 200% 100%;
  background-position: -200% center;
  pointer-events: none;
  border-radius: inherit;
}

.badge-destructive-shiny-style:hover::before {
  animation: shimmer 1.5s ease-in-out infinite;
}

.badge-destructive-shiny-style:hover {
  box-shadow:
    0 0 6px oklch(var(--error) / 0.4),
    0 0 12px oklch(var(--error) / 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

/* Success badge shiny style */
.badge-success-shiny-style {
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.15);
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.15);
  box-shadow:
    0 0 3px oklch(var(--success) / 0.3),
    0 0 6px oklch(var(--success) / 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

.badge-success-shiny-style::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    110deg,
    transparent 0%,
    transparent 40%,
    rgba(255, 255, 255, 0.25) 50%,
    transparent 60%,
    transparent 100%
  );
  background-size: 200% 100%;
  background-position: -200% center;
  pointer-events: none;
  border-radius: inherit;
}

.badge-success-shiny-style:hover::before {
  animation: shimmer 1.5s ease-in-out infinite;
}

.badge-success-shiny-style:hover {
  box-shadow:
    0 0 6px oklch(var(--success) / 0.4),
    0 0 12px oklch(var(--success) / 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

/* Warning badge shiny style (solid) */
.badge-warning-shiny-style {
  border: 1px solid rgba(255, 255, 255, 0.15);
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.15);
  box-shadow:
    0 0 3px oklch(var(--warning) / 0.3),
    0 0 6px oklch(var(--warning) / 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

.badge-warning-shiny-style:hover {
  box-shadow:
    0 0 6px oklch(var(--warning) / 0.4),
    0 0 12px oklch(var(--warning) / 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

/* Outline badge shiny style - minimal skeuomorphic */
.badge-outline-shiny-style {
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.3),
    0 1px 2px rgba(0, 0, 0, 0.03);
}

.badge-outline-shiny-style:hover {
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.4),
    0 1px 3px rgba(0, 0, 0, 0.06);
}

/* Destructive-secondary badge shiny style - uses error tint for highlight and gradient */
.badge-destructive-secondary-shiny-style {
  border: 1px solid oklch(var(--error) / 0.15);
  box-shadow:
    inset 0 1px 0 oklch(var(--error) / 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 oklch(var(--error) / 0.05),
    0 1px 2px oklch(var(--error) / 0.08);
  background-image: linear-gradient(
    to bottom,
    oklch(var(--error) / 0.1) 0%,
    oklch(var(--error) / 0.03) 50%,
    transparent 100%
  );
}

.badge-destructive-secondary-shiny-style:hover {
  box-shadow:
    inset 0 1px 0 oklch(var(--error) / 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.12),
    inset 0 -1px 0 oklch(var(--error) / 0.08),
    0 1px 3px oklch(var(--error) / 0.12);
  background-image: linear-gradient(
    to bottom,
    oklch(var(--error) / 0.15) 0%,
    oklch(var(--error) / 0.05) 50%,
    transparent 100%
  );
}

/* Success-secondary badge shiny style - uses success tint for highlight and gradient */
.badge-success-secondary-shiny-style {
  border: 1px solid oklch(var(--success) / 0.15);
  box-shadow:
    inset 0 1px 0 oklch(var(--success) / 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 oklch(var(--success) / 0.05),
    0 1px 2px oklch(var(--success) / 0.08);
  background-image: linear-gradient(
    to bottom,
    oklch(var(--success) / 0.1) 0%,
    oklch(var(--success) / 0.03) 50%,
    transparent 100%
  );
}

.badge-success-secondary-shiny-style:hover {
  box-shadow:
    inset 0 1px 0 oklch(var(--success) / 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.12),
    inset 0 -1px 0 oklch(var(--success) / 0.08),
    0 1px 3px oklch(var(--success) / 0.12);
  background-image: linear-gradient(
    to bottom,
    oklch(var(--success) / 0.15) 0%,
    oklch(var(--success) / 0.05) 50%,
    transparent 100%
  );
}

/* Warning-secondary badge shiny style - uses warning tint for highlight and gradient */
.badge-warning-secondary-shiny-style {
  border: 1px solid oklch(var(--warning) / 0.15);
  box-shadow:
    inset 0 1px 0 oklch(var(--warning) / 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 oklch(var(--warning) / 0.05),
    0 1px 2px oklch(var(--warning) / 0.08);
  background-image: linear-gradient(
    to bottom,
    oklch(var(--warning) / 0.1) 0%,
    oklch(var(--warning) / 0.03) 50%,
    transparent 100%
  );
}

.badge-warning-secondary-shiny-style:hover {
  box-shadow:
    inset 0 1px 0 oklch(var(--warning) / 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.12),
    inset 0 -1px 0 oklch(var(--warning) / 0.08),
    0 1px 3px oklch(var(--warning) / 0.12);
  background-image: linear-gradient(
    to bottom,
    oklch(var(--warning) / 0.15) 0%,
    oklch(var(--warning) / 0.05) 50%,
    transparent 100%
  );
}

/* ============================================
   SHINY ALLOCATION BAR STYLE
   Shimmer effect for the 'this page' section
   ============================================ */
.allocation-bar-shiny-style {
  position: relative;
  border: 1px solid rgba(255, 255, 255, 0.15);
  box-shadow:
    0 0 4px oklch(var(--primary) / 0.3),
    0 0 8px oklch(var(--primary) / 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

.allocation-bar-shiny-style::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    110deg,
    transparent 0%,
    transparent 40%,
    rgba(255, 255, 255, 0.3) 50%,
    transparent 60%,
    transparent 100%
  );
  background-size: 200% 100%;
  pointer-events: none;
  border-radius: inherit;
  animation: shimmer 2.5s ease-in-out infinite;
}

/* Custom xs breakpoint utilities for mobile optimization */
@media (min-width: 475px) {
  .xs\:inline { display: inline; }
  .xs\:hidden { display: none; }
}

/* ============================================
   MOBILE INTERACTION UTILITIES
   Consolidated mobile touch and zoom prevention
   ============================================ */

/* Base utility classes for user selection */
.user-select-text {
  -webkit-user-select: text;
  -khtml-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

.user-select-none {
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Base utility classes for touch interactions */
.touch-manipulation {
  touch-action: manipulation;
}

.touch-pan-xy {
  touch-action: pan-x pan-y;
}

/* Consolidated mobile zoom prevention - applies 16px font to prevent iOS zoom */
.mobile-no-zoom {
  font-size: max(16px, 1rem);
}

/* Mobile zoom prevention and text selection */
@media screen and (max-width: 768px) {
  /* Prevent zoom on interactive elements */
  button, [role="button"], .button, input, select, textarea {
    font-size: max(16px, 1rem); /* Consolidated: prevent zoom on input focus */
  }

  /* Ensure content areas remain selectable on mobile - extends base utility */
  h1, h2, h3, h4, h5, h6, p, .page-content, .editor-content, .content-area,
  .prose, [data-page-content], .unified-text-content, .text-view-content,
  .paragraph-content, .wewrite-content-display, .wewrite-viewer-content,
  .wewrite-paragraph-content, [data-slate-node="text"], [data-slate-leaf],
  input, textarea, select, [contenteditable="true"] {
    @apply user-select-text touch-pan-xy;
  }

  /* Body settings */
  body {
    @apply touch-pan-xy;
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  /* Interactive elements - consolidated into single rule */
  button, [role="button"], [tabindex] {
    @apply touch-manipulation user-select-none;
    font-size: max(16px, 1rem);
    pointer-events: auto;
  }

  /* Input fields - consolidated */
  input, textarea, select {
    @apply touch-manipulation;
    font-size: max(16px, 1rem);
    pointer-events: auto;
  }

  /* Links - consolidated */
  a {
    @apply touch-manipulation;
    font-size: max(16px, 1rem);
    pointer-events: auto;
  }

  /* Special handling for range sliders */
  input[type="range"], .mobile-slider-input {
    @apply touch-manipulation user-select-none;
    pointer-events: auto;
  }

  /* Allow text selection in input fields */
  input[type="text"], input[type="email"], input[type="password"],
  input[type="search"], textarea {
    -webkit-user-select: text;
    -khtml-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
  }

  /* Scrollable containers should allow panning but prevent zoom */
  .scroll-container, .overflow-auto, .overflow-x-auto, .overflow-y-auto {
    touch-action: pan-x pan-y;
  }

  /* Support for browsers that don't support zoom property */
  body {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    touch-action: pan-x pan-y;
    overflow-x: hidden; /* Prevent horizontal scroll that can interfere with touch */
  }

  /* Prevent zoom on common interactive elements */
  .wewrite-card, .modal, .dropdown, .menu {
    touch-action: pan-x pan-y;
  }

  /* Editor-specific zoom prevention and mobile input optimization */
  .wewrite-editor-container, [data-slate-editor], .simple-editor {
    touch-action: pan-x pan-y;
  }
  
  /* MOBILE INPUT OPTIMIZATION: Optimize Slate editor for responsive mobile typing */
  [data-slate-editor] {
    /* Use GPU acceleration for smoother scrolling and input */
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    /* Prevent layout thrashing during rapid input */
    contain: layout style;
    /* Optimize text rendering */
    text-rendering: optimizeSpeed;
    /* Ensure caret is always visible during fast typing */
    caret-color: currentColor;
  }
  
  /* Optimize contenteditable for mobile input */
  [contenteditable="true"] {
    /* Prevent unnecessary repaints */
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    /* Hint to browser this element changes frequently */
    will-change: contents;
  }

  /* Prevent zoom on images and media - consolidated */
  img, video, canvas, svg {
    @apply touch-pan-xy user-select-none;
  }

  /* Prevent zoom on code blocks and pre-formatted text */
  pre, code, .code-block {
    @apply touch-pan-xy;
  }

  /* Ensure modals and overlays prevent zoom */
  .modal, .overlay, .dropdown-menu, .popover {
    @apply touch-pan-xy;
  }

  /* Allocation bar interactive elements - consolidated into data attribute selector */
  [data-allocation-bar] {
    pointer-events: auto;
    @apply touch-pan-xy;
  }

  [data-allocation-bar] button,
  [data-allocation-bar] [role="button"],
  [data-allocation-bar] .btn,
  [data-allocation-bar] .button {
    @apply touch-manipulation user-select-none;
    pointer-events: auto;
    cursor: pointer;
  }

  [data-allocation-bar] .wewrite-card {
    pointer-events: auto !important;
  }

  /* Hide specific container while preserving children visibility */
  body > div.flex.min-h-screen > div.flex-1.min-w-0 > div > main > div > div > div.w-full.max-w-none.box-border > div > div.mt-4 > div > div {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    /* Keep layout and text properties intact */
    display: inherit !important;
    position: inherit !important;
    width: inherit !important;
    height: inherit !important;
    margin: inherit !important;
    padding: inherit !important;
  }

  /* Reset any inherited transparency for children - be very specific */
  body > div.flex.min-h-screen > div.flex-1.min-w-0 > div > main > div > div > div.w-full.max-w-none.box-border > div > div.mt-4 > div > div > * {
    opacity: 1 !important;
    visibility: visible !important;
  }

  /* Specifically restore text visibility for all text elements - EXCLUDE paragraph numbers */
  body > div.flex.min-h-screen > div.flex-1.min-w-0 > div > main > div > div > div.w-full.max-w-none.box-border > div > div.mt-4 > div > div span:not(.paragraph-number),
  body > div.flex.min-h-screen > div.flex-1.min-w-0 > div > main > div > div > div.w-full.max-w-none.box-border > div > div.mt-4 > div > div button,
  body > div.flex.min-h-screen > div.flex-1.min-w-0 > div > main > div > div > div.w-full.max-w-none.box-border > div > div.mt-4 > div > div div:not(.paragraph-number) {
    color: revert !important;
  }

  /* Override any global pointer-events: none for pledge bar elements */
  [data-pledge-bar] * {
    pointer-events: auto !important;
  }

  /* CRITICAL FIX: Ensure input fields in modals/drawers remain interactive */
  [role="dialog"] input,
  [role="dialog"] textarea,
  [role="dialog"] select,
  [role="dialog"] button,
  [role="dialog"] [role="button"],
  [data-radix-dialog-content] input,
  [data-radix-dialog-content] textarea,
  [data-radix-dialog-content] select,
  [data-radix-dialog-content] button,
  [data-radix-dialog-content] [role="button"],
  .drawer-content input,
  .drawer-content textarea,
  .drawer-content select,
  .drawer-content button,
  .drawer-content [role="button"] {
    pointer-events: auto !important;
    touch-action: manipulation !important;
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    -ms-user-select: text !important;
    user-select: text !important;
  }


}

/* Ensure paragraph numbers have correct styling with higher specificity for all screen sizes */
body .paragraph-number {
  color: oklch(var(--muted-foreground));
  font-weight: 400;
  opacity: var(--paragraph-number-opacity);
  font-size: 1em; /* Same size as body text */
  user-select: none;
}

/* Normal mode: Add space after paragraph numbers */
.normal-mode .paragraph-number {
  margin-right: 0.75rem;
}

/* Dense mode: Reduce space after and add space before paragraph numbers */
.dense-mode-container .paragraph-number {
  margin-left: 0.5rem;
  margin-right: 0.25rem;
}

/* First paragraph number in dense mode shouldn't have left margin */
.dense-mode-container .paragraph-number:first-of-type {
  margin-left: 0;
}

/* Mobile optimizations for dense mode */
@media (max-width: 767px) {
  /* Dense mode layout system - consolidated and simplified
   * Note: These rules need higher specificity to override conflicting responsive styles
   */
  .viewer-paragraph.dense-paragraph,
  .wewrite-viewer-paragraph.dense {
    display: inline-block;
    margin-right: 1rem;
    vertical-align: top;
    white-space: normal; /* Allow text wrapping within inline-block */
  }

  .viewer-paragraph.dense-paragraph .paragraph-number {
    margin-right: 0.75rem;
  }

  /* Dense content needs to display inline within the inline-block container */
  .viewer-paragraph.dense-paragraph .paragraph-content,
  .wewrite-viewer-paragraph.dense .paragraph-content {
    display: inline;
  }

  /* Dense content flow container */
  .dense-content-flow {
    display: block;
    width: 100%;
    line-height: 1.625;
  }
}

/* Global zoom prevention (applies to all screen sizes) */
html {
  /* Prevent zoom via CSS zoom property */
  zoom: 1 !important;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Prevent zoom on focus for all input types */
input, textarea, select {
  /* Ensure font size is large enough to prevent iOS zoom */
  font-size: max(16px, 1rem) !important;
}

/* Exception: Allow title textarea to use its specified font size */
textarea.text-2xl {
  font-size: 1.5rem !important; /* text-2xl equivalent */
  line-height: 1.2 !important; /* Consistent line-height for title inputs */
}

/* Global pledge bar button interactivity (all screen sizes) */
[data-pledge-bar] button,
[data-pledge-bar] [role="button"],
[data-pledge-bar] .btn,
[data-pledge-bar] .button {
  pointer-events: auto !important;
  touch-action: manipulation !important;
  cursor: pointer !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
}

/* Global range slider interactivity (all screen sizes) */
input[type="range"],
.mobile-slider-input {
  pointer-events: auto !important;
  touch-action: manipulation !important;
  cursor: pointer !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
}

/* Range slider thumb interactivity */
input[type="range"]::-webkit-slider-thumb,
.mobile-slider-input::-webkit-slider-thumb {
  pointer-events: auto !important;
  touch-action: manipulation !important;
  cursor: pointer !important;
}

input[type="range"]::-moz-range-thumb,
.mobile-slider-input::-moz-range-thumb {
  pointer-events: auto !important;
  touch-action: manipulation !important;
  cursor: pointer !important;
}

/* Global pledge bar container interactivity */
[data-pledge-bar] {
  pointer-events: auto !important;
  touch-action: pan-x pan-y !important;
}

/* Override any global pointer-events: none for pledge bar elements */
[data-pledge-bar] * {
  pointer-events: auto !important;
}

/* Mobile-specific allocation bar optimizations */
@media (max-width: 767px) {
  /* Ensure allocation bar fits within mobile viewport with proper spacing */
  [data-component="allocation-bar-card"] {
    max-width: calc(100vw - 16px) !important; /* Account for proper padding */
    margin-left: auto !important;
    margin-right: auto !important;
  }

  /* Optimize button touch targets on mobile */
  [data-allocation-bar] button {
    min-height: 40px !important; /* Ensure good touch target size */
    min-width: 40px !important;
  }

  /* Ensure horizontal layout is maintained on mobile */
  [data-allocation-bar] .flex.items-center {
    flex-direction: row !important; /* Force horizontal layout */
    flex-wrap: nowrap !important;
  }

  /* STRIPE LINK MOBILE OPTIMIZATION: Fix height observer clipping */
  .p-HeightObserverProvider {
    height: auto !important;
    min-height: auto !important;
    max-height: none !important;
  }

  .p-HeightObserverProvider-container {
    height: auto !important;
    min-height: auto !important;
    max-height: none !important;
    overflow: visible !important;
  }

  /* Ensure Stripe Link autofill prompt wraps properly */
  .p-ReturnAutofillPrompt {
    max-width: 100% !important;
    width: 100% !important;
    box-sizing: border-box !important;
  }

  /* Fix Stripe Link dropdown positioning on mobile */
  .p-ReturnAutofillPrompt-manageDropdown {
    position: absolute !important;
    right: 0 !important;
    top: 100% !important;
    max-width: calc(100vw - 32px) !important;
  }



  /* Stripe Elements - Simple responsive styling */
  .StripeElement,
  .__PrivateStripeElement {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
  }



  /* Ensure Stripe tabs don't overflow on mobile */
  .p-Tabs,
  .p-TabList {
    max-width: 100% !important;
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }

  /* Fix Stripe payment method tabs on mobile */
  .p-Tab {
    min-width: auto !important;
    flex-shrink: 0 !important;
    white-space: nowrap !important;
  }

  /* Ensure composition bar takes available space */
  [data-pledge-bar] .flex-1 {
    min-width: 0 !important; /* Allow flex item to shrink */
  }

  /* Ensure text remains readable on mobile */
  [data-pledge-bar] .text-xs {
    font-size: 0.75rem !important; /* 12px */
  }

  [data-pledge-bar] .text-sm {
    font-size: 0.875rem !important; /* 14px */
  }

  /* Prevent horizontal overflow on mobile */
  [data-pledge-bar] {
    overflow-x: hidden !important;
  }

  /* Ensure token text is properly sized on mobile */
  [data-pledge-bar] .text-center span {
    word-break: break-word !important;
    hyphens: none !important;
  }

  /* Ensure token allocation bar is properly sized on mobile */
  [data-component="token-allocation-bar"] {
    min-height: 40px !important;
  }

  /* Prevent unnecessary hyphenation in titles and headings */
  h1, h2, h3, h4, h5, h6,
  .card-title,
  [class*="title"],
  [class*="heading"] {
    hyphens: none !important;
    /* Only allow hyphenation for extremely long words that would overflow */
    overflow-wrap: break-word;
    word-break: normal;
  }

  /* Allow hyphenation only for very long single words as absolute last resort */
  h1, h2, h3, h4, h5, h6,
  .card-title,
  [class*="title"],
  [class*="heading"] {
    /* Use manual hyphenation only when a single word exceeds container width */
    word-break: break-word;
    hyphens: manual;
  }

  /* Utility classes for hyphenation control */
  .hyphens-none {
    hyphens: none !important;
  }

  .hyphens-manual {
    hyphens: manual !important;
  }

  .hyphens-auto {
    hyphens: auto !important;
  }

  .word-break-normal {
    word-break: normal !important;
  }

  .word-break-break-word {
    word-break: break-word !important;
  }

  .overflow-wrap-break-word {
    overflow-wrap: break-word !important;
  }

  /* Ensure proper spacing between elements on mobile */
  [data-component="token-allocation-controls"] {
    gap: 0.5rem !important; /* 8px gap on mobile */
  }

  /* Ensure pledge bar content has adequate padding on mobile */
  [data-pledge-bar] {
    padding: 0 !important; /* No padding on mobile */
  }
}

/* Additional zoom prevention for WebKit browsers */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  input, textarea, select {
    font-size: 16px !important;
  }
}

/* Basic responsive styles */
@media (max-width: 640px) {
  /* Only target specific page content elements, not the main container */
  .unified-editor .page-content,
  .editor-content .page-content {
    width: 100%;
    max-width: 100%;
    overflow-wrap: break-word;
    margin-left: 0 !important;
    margin-right: 0 !important;
    box-sizing: border-box !important;
  }

  /* Ensure text doesn't overflow - but preserve title hyphenation rules */
  p, span, div {
    max-width: 100%;
    overflow-wrap: break-word;
    word-break: break-word;
  }

  /* EXCEPTION: Dense mode paragraphs should maintain normal word breaking
   * Using higher specificity instead of !important
   */
  .viewer-paragraph.dense-paragraph,
  .viewer-paragraph.dense-paragraph p,
  .viewer-paragraph.dense-paragraph span,
  .viewer-paragraph.dense-paragraph div {
    word-break: normal;
    overflow-wrap: normal;
  }

  /* Headings get special treatment to prevent unnecessary hyphenation */
  h1, h2, h3, h4, h5, h6 {
    max-width: 100%;
    overflow-wrap: break-word;
    word-break: normal; /* Don't break words unless absolutely necessary */
    hyphens: none; /* No automatic hyphenation */
  }

  /* Ensure all containers respect mobile width */
  * {
    max-width: 100%;
    box-sizing: border-box;
  }

  /* Prevent horizontal scrolling */
  html, body {
    overflow-x: hidden;
  }

  /* Ensure content containers are properly sized on mobile
   * Specificity handles precedence without !important
   */
  .unified-editor,
  .editor-content,
  .unified-paragraph,
  .unified-text-content {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    overflow-wrap: break-word;
    word-break: break-word;
  }
}

/* Note: All link styling is now centralized in app/components/editor-styles.css */
/* This ensures consistent styling across the entire application */
/* Import editor-styles.css in components that need pill link styling */

/* UsernameBadge specific styling - subscription status colors
 * Specificity through chaining handles precedence
 */
a.username-badge-link {
  text-decoration: none;
}

a.username-badge-link.text-primary,
a.username-badge-link:has(.text-primary) {
  color: oklch(var(--primary));
}

a.username-badge-link.text-muted-foreground,
a.username-badge-link:has(.text-muted-foreground) {
  color: oklch(var(--muted-foreground));
}

/* Custom Spinner Animation */
.loader {
  color: oklch(var(--primary)); /* Blue in light mode (from primary color) */
  font-size: 10px;
  width: 1em;
  height: 1em;
  border-radius: 50%;
  position: relative;
  text-indent: -9999em;
  animation: mulShdSpin 1.3s infinite linear;
  transform: translateZ(0);
}

/* Larger version of the loader */
.loader-lg {
  font-size: 14px; /* Slightly smaller than before */
}

/* Medium version of the loader */
.loader-md {
  font-size: 10px; /* Smaller size as per user preference */
}

/* Small version of the loader */
.loader-sm {
  font-size: 6px;
}

/* Theme-specific loader colors */
.loader {
  color: oklch(var(--primary)); /* Blue in light mode (from primary color) */
}

.dark .loader {
  color: white; /* White in dark mode as per user preference */
}

/* iOS-compatible keyboard toolbar styles - base styles applied inline */

/* Dark mode adjustments */
.dark .ios-keyboard-toolbar {
  --toolbar-bg: rgba(0, 0, 0, 0.95);
  --border-color: rgba(255, 255, 255, 0.1);
}

/* REMOVED: Legacy editor container - use wewrite-editor-container instead */

/* Seamless view/edit mode transitions - now handled by unified styling in editor-styles.css */
.page-editor-stable,
[data-slate-editor] {
  box-sizing: border-box;
}

/* Make sure the editor content is visible */
.editable-container {
  min-height: 200px;
}

@keyframes mulShdSpin {
  0%,
  100% {
    box-shadow: 0 -3em 0 0.2em,
    2em -2em 0 0em, 3em 0 0 -1em,
    2em 2em 0 -1em, 0 3em 0 -1em,
    -2em 2em 0 -1em, -3em 0 0 -1em,
    -2em -2em 0 0;
  }
  12.5% {
    box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em,
    3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em,
    -2em 2em 0 -1em, -3em 0 0 -1em,
    -2em -2em 0 -1em;
  }
  25% {
    box-shadow: 0 -3em 0 -0.5em,
    2em -2em 0 0, 3em 0 0 0.2em,
    2em 2em 0 0, 0 3em 0 -1em,
    -2em 2em 0 -1em, -3em 0 0 -1em,
    -2em -2em 0 -1em;
  }
  37.5% {
    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em,
     3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em,
     -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;
  }
  50% {
    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em,
     3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em,
     -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;
  }
  62.5% {
    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em,
     3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0,
     -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;
  }
  75% {
    box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em,
    3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em,
    -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;
  }
  87.5% {
    box-shadow: 0em -3em 0 0, 2em -2em 0 -1em,
    3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em,
    -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;
  }
}

/* Spring animation keyframes for feature cards */
@keyframes spring-in {
  0% {
    opacity: 0;
    transform: scale(0.8) translateY(20px);
  }
  60% {
    opacity: 1;
    transform: scale(1.05) translateY(-5px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

@keyframes spring-out {
  0% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
  100% {
    opacity: 0;
    transform: scale(0.8) translateY(20px);
  }
}

/* Wiggle animation for rearrangeable toolbar items */
@keyframes wiggle {
  0%, 100% {
    transform: rotate(-1.5deg);
  }
  50% {
    transform: rotate(1.5deg);
  }
}

.animate-wiggle {
  animation: wiggle 0.25s ease-in-out infinite;
}

/* Spring animation utility classes */
.animate-spring-in {
  animation: spring-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.animate-spring-out {
  animation: spring-out 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Landing page content fade is now handled by a React element in LandingPage.tsx */
/* The fade overlay is position: fixed at z-index 39, above main content but below headers */

/* Page Editor Transition Improvements */
.page-editor-transition {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Smooth edit mode transitions for title and body */
.edit-mode-title-transition {
  transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
}

/* Slide-up page animation improvements */
.slide-up-page {
  /* Allow text selection during animation - users should be able to select text immediately */
  user-select: auto;
  /* REMOVED: isolation: isolate - this creates stacking context that breaks fixed positioning */
  /* REMOVED: will-change: transform, opacity - only set during actual animation */
}

.slide-up-page.animation-complete {
  /* Ensure text selection remains enabled after animation */
  user-select: auto;
  /* Reset will-change for performance */
  will-change: auto;
}

/* Prevent body scroll during slide-up animation */
.slide-up-active {
  overflow: hidden;
  height: 100vh;
}

.edit-mode-body-transition {
  transition: border-color 0.3s ease, box-shadow 0.3s ease, padding 0.3s ease;
}

/* Prevent layout shift during edit mode transitions */
.edit-mode-container {
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
  /* REMOVED: transform: translateZ(0) - this creates stacking context that breaks fixed positioning */
  /* REMOVED: will-change - only set during actual transitions */
  /* Avoid transitioning layout properties to prevent flickering */
}

/* Sticky Save Header - Header positioning handled via inline styles in ContentPageHeader */
/* The header component uses hasSaveBanner state to adjust its 'top' position inline */
/* No CSS rules needed here - prevents double-offsetting */

/* REMOVED: All complex header spacing rules that interfere with simple body padding */

/* New page creation layout stability */
.new-page-container {
  /* REMOVED: contain: layout style - this creates stacking context that breaks fixed positioning */
  /* REMOVED: transform: translateZ(0) - this creates stacking context that breaks fixed positioning */
}

.new-page-header {
  height: 64px;
  min-height: 64px;
  max-height: 64px;
  /* REMOVED: contain: layout - this creates stacking context that breaks fixed positioning */
}

.new-page-content {
  min-height: calc(100vh - 64px);
  padding-top: 64px;
  /* REMOVED: contain: layout - this creates stacking context that breaks fixed positioning */
}

.page-editor-stable {
  /* REMOVED: contain: layout style - this creates stacking context that breaks fixed positioning */
  /* REMOVED: transform: translateZ(0) - this creates stacking context that breaks fixed positioning */
  /* REMOVED: will-change: auto - not needed */
}

/* Prevent layout shift in editor loading states */
.editor-loading-placeholder {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  /* REMOVED: contain: layout - this creates stacking context that breaks fixed positioning */
}

/* PWA Interface Improvements */
/* PWA styles - light and dark mode support */
@media (display-mode: standalone) {
  :root {
    --pwa-background: #ffffff;
    --pwa-status-bar: #000000;
  }

  .dark {
    --pwa-background: #000000;
    --pwa-status-bar: #ffffff;
  }

  body {
    background-color: var(--pwa-background);
  }

  /* Status bar styling for PWA */
  meta[name="theme-color"] {
    content: var(--pwa-background);
  }
}

@layer base {
  :root {
    /* Accent color variables - dynamically set by AccentColorContext */
    /* OKLCH format: lightness (0-1), chroma (0-0.5), hue (0-360) */
    --accent-h: 230;
    --accent-c: 0.25;
    --accent-l: 0.50;
    --accent-color-rgb: 37, 99, 235; /* Default blue RGB values for #2563EB */

    /* ========================================================================
       WEWRITE COLOR SYSTEM

       This system provides consistent, theme-aware colors using two patterns:

       1. ALPHA colors: Semi-transparent overlays
          - neutral-alpha-{N}: Black overlay in light mode, white in dark mode
          - accent-alpha-{N}: Accent color at N% opacity

       2. SOLID colors: Opaque colors with varied lightness (future)
          - neutral-solid-{N}: Neutral at N% lightness
          - accent-solid-{N}: Accent at N% lightness

       Scale: 5, 10, 15, 20, 25, 30, 40, 50, 60, 70, 80, 90

       Usage: bg-neutral-alpha-15, text-accent-alpha-30, border-neutral-alpha-10
       ======================================================================== */

    /* Neutral Alpha Scale - Theme-aware black/white overlays
       Light mode: black overlay (darkening)
       Dark mode: white overlay (lightening) */
    --neutral-alpha-5: rgba(0, 0, 0, 0.05);
    --neutral-alpha-10: rgba(0, 0, 0, 0.10);
    --neutral-alpha-15: rgba(0, 0, 0, 0.15);
    --neutral-alpha-20: rgba(0, 0, 0, 0.20);
    --neutral-alpha-25: rgba(0, 0, 0, 0.25);
    --neutral-alpha-30: rgba(0, 0, 0, 0.30);
    --neutral-alpha-40: rgba(0, 0, 0, 0.40);
    --neutral-alpha-50: rgba(0, 0, 0, 0.50);
    --neutral-alpha-60: rgba(0, 0, 0, 0.60);
    --neutral-alpha-70: rgba(0, 0, 0, 0.70);
    --neutral-alpha-80: rgba(0, 0, 0, 0.80);
    --neutral-alpha-90: rgba(0, 0, 0, 0.90);

    /* Legacy alpha variables (for backwards compatibility) */
    --alpha-5: var(--neutral-alpha-5);
    --alpha-10: var(--neutral-alpha-10);
    --alpha-15: var(--neutral-alpha-15);
    --alpha-20: var(--neutral-alpha-20);
    --alpha-25: var(--neutral-alpha-25);
    --alpha-30: var(--neutral-alpha-30);

    /* Alpha overlay gradients - for layering on top of bg colors */
    --alpha-10-gradient: linear-gradient(var(--neutral-alpha-10), var(--neutral-alpha-10));
    --alpha-15-gradient: linear-gradient(var(--neutral-alpha-15), var(--neutral-alpha-15));

    /* Semantic alpha overlays - tinted overlays for colored buttons */
    /* Success alpha - green tint overlay (darker green in light mode) */
    --success-alpha-5: rgba(22, 163, 74, 0.15);
    --success-alpha-10: rgba(22, 163, 74, 0.25);
    --success-alpha-15: rgba(22, 163, 74, 0.35);
    /* Error alpha - red tint overlay (darker red in light mode) */
    --error-alpha-5: rgba(220, 38, 38, 0.15);
    --error-alpha-10: rgba(220, 38, 38, 0.25);
    --error-alpha-15: rgba(220, 38, 38, 0.35);

    /* Systematic Color System - Base Colors (OKLCH) - MUST be defined BEFORE --primary */
    --accent-base: 0.50 0.25 230; /* Default blue in OKLCH - User's custom accent color */
    --neutral-base: 0.50 0.05 230; /* Same hue as accent, low chroma */
    --success-base: 0.55 0.15 142; /* Green */
    --warn-base: 0.72 0.15 72; /* Orange */
    --error-base: 0.55 0.15 28; /* Red */

    /* Hex fallback for SVG/Canvas that can't use CSS variables - updated by AccentColorContext */
    --accent-color: #2563EB;
    --accent-color-rgb: 37, 99, 235;

    /* Hover variants - darker in light mode */
    --accent-90: 0.45 0.25 230; /* Darker variant for hover */
    --accent-110: 0.55 0.25 230; /* Brighter variant for active */

    /* ═══════════════════════════════════════════════════════════════════════════
       OKLCH COLOR SYSTEM - Light Mode
       All colors use OKLCH format: L C H (Lightness 0-1, Chroma 0-0.4, Hue 0-360)
       For neutral colors (black/white/grey), use C=0 to avoid color cast
       ═══════════════════════════════════════════════════════════════════════════ */

    /* Base surfaces - pure white background, dark text */
    --background: 1.00 0 0;
    --foreground: 0.20 0 0;

    --card: 1.00 0 0;
    --card-foreground: 0.20 0 0;

    --popover: 1.00 0 0;
    --popover-foreground: 0.20 0 0;

    /* Primary uses dynamic accent color */
    --primary: var(--accent-base);
    --primary-foreground: 1.00 0 0;

    /* Secondary - light grey background, dark text */
    --secondary: 0.95 0 0;
    --secondary-foreground: 0.20 0 0;

    /* Muted - subtle grey background, medium text */
    --muted: 0.95 0 0;
    --muted-foreground: 0.45 0 0;

    /* Accent - same as secondary for UI backgrounds */
    --accent: 0.95 0 0;
    --accent-foreground: 0.20 0 0;

    /* Destructive/Error */
    --destructive: 0.55 0.22 25;
    --destructive-foreground: 1.00 0 0;

    /* Success */
    --success: 0.55 0.15 145;
    --success-foreground: 1.00 0 0;
    --success-90: 0.50 0.15 145;
    --success-110: 0.60 0.15 145;

    /* Error variants */
    --error: 0.55 0.22 25;
    --error-foreground: 1.00 0 0;
    --error-90: 0.50 0.22 25;
    --error-110: 0.60 0.22 25;

    /* Warning */
    --warning: 0.75 0.15 85;
    --warning-foreground: 0.20 0 0;

    /* Neutral color for badges and chips - dark grey in light mode */
    --neutral: 0.25 0 0;
    --neutral-foreground: 1.00 0 0;

    /* Focus indicator variables */
    --focus-ring-color: var(--accent-base);
    --focus-ring-width: 2px;
    --focus-ring-offset: 2px;

    /* Borders and inputs - light grey */
    --border: 0.88 0 0;
    --input: 0.88 0 0;
    --ring: var(--accent-base);
    --radius: 0.5rem;

    /* Active line highlight in editor */
    --active-line-highlight: oklch(var(--accent-base) / 0.1);

    /* Paragraph numbering opacity - subtle grey appearance */
    --paragraph-number-opacity: 0.4;
  }

  .dark {
    /* Neutral Alpha Scale - White overlays for dark mode (lightening effect) */
    --neutral-alpha-5: rgba(255, 255, 255, 0.05);
    --neutral-alpha-10: rgba(255, 255, 255, 0.10);
    --neutral-alpha-15: rgba(255, 255, 255, 0.15);
    --neutral-alpha-20: rgba(255, 255, 255, 0.20);
    --neutral-alpha-25: rgba(255, 255, 255, 0.25);
    --neutral-alpha-30: rgba(255, 255, 255, 0.30);
    --neutral-alpha-40: rgba(255, 255, 255, 0.40);
    --neutral-alpha-50: rgba(255, 255, 255, 0.50);
    --neutral-alpha-60: rgba(255, 255, 255, 0.60);
    --neutral-alpha-70: rgba(255, 255, 255, 0.70);
    --neutral-alpha-80: rgba(255, 255, 255, 0.80);
    --neutral-alpha-90: rgba(255, 255, 255, 0.90);

    /* Legacy alpha variables (for backwards compatibility) */
    --alpha-5: var(--neutral-alpha-5);
    --alpha-10: var(--neutral-alpha-10);
    --alpha-15: var(--neutral-alpha-15);
    --alpha-20: var(--neutral-alpha-20);
    --alpha-25: var(--neutral-alpha-25);
    --alpha-30: var(--neutral-alpha-30);

    /* Alpha overlay gradients - for layering on top of bg colors */
    --alpha-10-gradient: linear-gradient(var(--alpha-10), var(--alpha-10));
    --alpha-15-gradient: linear-gradient(var(--alpha-15), var(--alpha-15));

    /* Semantic alpha overlays - tinted overlays for colored buttons */
    /* Success alpha - brighter green in dark mode */
    --success-alpha-5: rgba(74, 222, 128, 0.15);
    --success-alpha-10: rgba(74, 222, 128, 0.25);
    --success-alpha-15: rgba(74, 222, 128, 0.35);
    /* Error alpha - brighter red in dark mode */
    --error-alpha-5: rgba(248, 113, 113, 0.15);
    --error-alpha-10: rgba(248, 113, 113, 0.25);
    --error-alpha-15: rgba(248, 113, 113, 0.35);

    /* ═══════════════════════════════════════════════════════════════════════════
       OKLCH COLOR SYSTEM - Dark Mode
       All colors use OKLCH format: L C H (Lightness 0-1, Chroma 0-0.4, Hue 0-360)
       For neutral colors (black/white/grey), use C=0 to avoid color cast
       ═══════════════════════════════════════════════════════════════════════════ */

    /* Base surfaces - pure black background, light text */
    --background: 0.00 0 0;
    --foreground: 0.93 0 0;

    /* Card background in dark mode - slightly elevated */
    --card: 0.15 0 0;
    --card-foreground: 0.93 0 0;

    --popover: 0.10 0 0;
    --popover-foreground: 0.93 0 0;

    /* Primary uses dynamic accent color */
    --primary: var(--accent-base);
    --primary-foreground: 1.00 0 0;

    /* Secondary - dark grey background, light text */
    --secondary: 0.22 0 0;
    --secondary-foreground: 0.93 0 0;

    /* Muted - dark grey background, medium-light text */
    --muted: 0.22 0 0;
    --muted-foreground: 0.60 0 0;

    /* Accent - same as secondary for UI backgrounds */
    --accent: 0.22 0 0;
    --accent-foreground: 0.93 0 0;

    /* Destructive/Error */
    --destructive: 0.55 0.22 25;
    --destructive-foreground: 1.00 0 0;

    /* Success - slightly brighter in dark mode */
    --success: 0.60 0.15 145;
    --success-foreground: 1.00 0 0;

    /* Neutral color for badges and chips - light grey in dark mode */
    --neutral: 0.88 0 0;
    --neutral-foreground: 0.15 0 0;

    /* Borders and inputs - subtle separator, visible but not harsh */
    --border: 0.28 0 0;
    --input: 0.22 0 0;
    --ring: var(--accent-base);
    --radius: 0.5rem;

    /* Focus indicator variables - higher contrast in dark mode */
    --focus-ring-color: var(--accent-base);
    --focus-ring-width: 2px;
    --focus-ring-offset: 2px;

    /* Active line highlight in editor - darker in dark mode */
    --active-line-highlight: oklch(var(--accent-base) / 0.15);

    /* Paragraph numbering opacity - subtle appearance (same as light mode) */
    --paragraph-number-opacity: 0.4;
  }

  /* High Contrast Mode - Light */
  html[data-high-contrast="true"]:not(.dark) {
    /* Maximum contrast for text - OKLCH format: L C H */
    --foreground: 0.00 0 0;
    --background: 1.00 0 0;

    /* Card with visible borders */
    --card: 1.00 0 0;
    --card-foreground: 0.00 0 0;

    /* Popover with visible borders */
    --popover: 1.00 0 0;
    --popover-foreground: 0.00 0 0;

    /* Primary color with high contrast - blue hue 250 */
    --primary: 0.50 0.30 250;
    --primary-foreground: 1.00 0 0;

    /* Secondary with higher contrast */
    --secondary: 0.80 0.02 250;
    --secondary-foreground: 0.00 0 0;

    /* Muted with higher contrast */
    --muted: 0.90 0.02 250;
    --muted-foreground: 0.00 0 0;

    /* Accent with higher contrast */
    --accent: 0.90 0.02 250;
    --accent-foreground: 0.00 0 0;

    /* Destructive with higher contrast - red hue 25 */
    --destructive: 0.50 0.25 25;
    --destructive-foreground: 1.00 0 0;

    /* Borders and inputs with higher contrast */
    --border: 0.00 0 0;
    --input: 0.90 0 0;
    --ring: 0.50 0.30 250;

    /* Enhanced focus indicators */
    --focus-ring-color: 0.50 0.30 250;
    --focus-ring-width: 3px;
    --focus-ring-offset: 2px;
  }

  /* High Contrast Mode - Dark */
  html[data-high-contrast="true"].dark {
    /* Maximum contrast for text - OKLCH format: L C H */
    --foreground: 1.00 0 0;
    --background: 0.00 0 0;

    /* Card with visible borders */
    --card: 0.00 0 0;
    --card-foreground: 1.00 0 0;

    /* Popover with visible borders */
    --popover: 0.00 0 0;
    --popover-foreground: 1.00 0 0;

    /* Primary color with high contrast - blue hue 250 */
    --primary: 0.60 0.30 250;
    --primary-foreground: 0.00 0 0;

    /* Secondary with higher contrast */
    --secondary: 0.20 0.02 250;
    --secondary-foreground: 1.00 0 0;

    /* Muted with higher contrast */
    --muted: 0.20 0.02 250;
    --muted-foreground: 1.00 0 0;

    /* Accent with higher contrast */
    --accent: 0.20 0.02 250;
    --accent-foreground: 1.00 0 0;

    /* Destructive with higher contrast - red hue 25 */
    --destructive: 0.60 0.25 25;
    --destructive-foreground: 0.00 0 0;

    /* Borders and inputs with higher contrast */
    --border: 1.00 0 0;
    --input: 0.20 0 0;
    --ring: 0.70 0.30 250;

    /* Enhanced focus indicators */
    --focus-ring-color: 0.70 0.30 250;
    --focus-ring-width: 3px;
    --focus-ring-offset: 2px;
  }
}

/* Glass card styling - using theme variables for better light/dark mode support */
.glass-card {
  border: 1px solid;
  border-radius: 0.75rem; /* rounded-xl */
  border-color: oklch(var(--border) / 0.4);
}

.glass-panel {
  border: 1px solid oklch(var(--border) / 0.4);
}

.glass-panel:hover {
  border-color: oklch(var(--border) / 0.6);
}

/* Minimal Stripe fixes - no size overrides */
iframe[src*="js.stripe.com"] {
  width: 100%;
}

/* Legacy card styles removed - now using centralized card theme system */

/* Remove hover states - cards stay static */

/* Dark mode hover state for cards - enhanced shadow for dark mode */
.dark .wewrite-card:hover:not([role="dialog"]):not([data-modal-content]):not([aria-modal="true"] *):not([data-expanded="true"]) {
  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.3), 0 2px 4px 0 rgba(0, 0, 0, 0.2); /* Stronger shadow for dark mode */
  transform: translateY(-1px); /* Subtle lift effect */
}

/* Base transition for smooth hover effects */
.wewrite-card {
  transition: all 0.2s ease-in-out;
}

/* Active state styling for theme and link style selectors */
.wewrite-active-state {
  border: 2px solid oklch(var(--accent-80)) !important;
  background-color: oklch(var(--accent-15)) !important;
  box-shadow: 0 0 0 3px oklch(var(--accent-30)), 0 2px 8px oklch(var(--accent-20)) !important;
  transform: scale(1.02);
}

/* Today card accent border - uses accent color dynamically */
.wewrite-card.wewrite-today {
  border: 2px solid oklch(var(--primary)) !important;
}
.wewrite-card.wewrite-today:hover {
  border-color: oklch(var(--primary)) !important;
}

/* Active card styling for focused inputs and selected elements */
.wewrite-active-card {
  border: 1px solid oklch(var(--accent-70)) !important;
  background-color: oklch(var(--accent-10)) !important;
  transition: all 0.2s ease-in-out;
}

/* Interactive card styling */
.wewrite-interactive-card {
  transition: all 0.2s ease-in-out;
  border: 1px solid oklch(var(--border) / 0.4);
}

.wewrite-interactive-card:hover {
  border-color: oklch(var(--border) / 0.6);
  background-color: oklch(var(--muted) / 0.5);
}

/* Base styling for WeWrite inputs - now handled by glassmorphic input system below */



.wewrite-card.wewrite-input:hover,
.wewrite-card:not(.wewrite-input):hover:not([data-expanded="true"]) {
  border-color: var(--card-border-hover) !important;
  background-color: var(--card-bg-hover) !important;
}

/* Expanded toolbar - ALWAYS opaque white/black, NO hover/active states */
.wewrite-card[data-expanded="true"],
.wewrite-card[data-expanded="true"]:hover,
.wewrite-card[data-expanded="true"]:active,
.wewrite-card[data-expanded="true"]:focus {
  background-color: white !important;
  border-color: var(--card-border) !important;
  backdrop-filter: none !important;
  transform: none !important;
  box-shadow: var(--card-shadow) !important;
}

.dark .wewrite-card[data-expanded="true"],
.dark .wewrite-card[data-expanded="true"]:hover,
.dark .wewrite-card[data-expanded="true"]:active,
.dark .wewrite-card[data-expanded="true"]:focus {
  background-color: black !important;
}

/* Disable ALL hover/active states on mobile/touch devices to prevent sticky hover */
@media (hover: none) {
  .wewrite-card:hover:not(.wewrite-input):not([data-expanded="true"]),
  .wewrite-card:active:not(.wewrite-input):not([data-expanded="true"]),
  .dark .wewrite-card:hover:not([data-expanded="true"]),
  .dark .wewrite-card:active:not([data-expanded="true"]) {
    background-color: var(--card-bg) !important;
    border-color: var(--card-border) !important;
    box-shadow: var(--card-shadow) !important;
    transform: none !important;
  }

  /* Ensure expanded toolbar stays white on mobile regardless of touch state */
  .wewrite-card[data-expanded="true"],
  .wewrite-card[data-expanded="true"]:hover,
  .wewrite-card[data-expanded="true"]:active,
  .wewrite-card[data-expanded="true"]:focus {
    background-color: white !important;
    backdrop-filter: none !important;
  }

  .dark .wewrite-card[data-expanded="true"],
  .dark .wewrite-card[data-expanded="true"]:hover,
  .dark .wewrite-card[data-expanded="true"]:active,
  .dark .wewrite-card[data-expanded="true"]:focus {
    background-color: black !important;
  }
}

/* Title input specific styling - works with wewrite-input glassmorphic system */
.wewrite-title-input {
  /* Title-specific typography - let wewrite-input handle background/border */
  font-weight: 600 !important;
  text-align: center !important;

  /* Override default textarea min-height for title inputs - ensure consistent height */
  min-height: 64px !important;
  height: 64px !important;

  /* Ensure consistent box-sizing */
  box-sizing: border-box !important;

  /* Ensure consistent padding - override wewrite-input padding for precise control */
  padding: 0.75rem 1rem !important;
}

/* Make div title inputs use flexbox for vertical centering */
div.wewrite-title-input {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  line-height: 1.2 !important;
}

/* Make textarea title inputs use line-height for vertical centering to match div */
textarea.wewrite-title-input {
  /* Remove default textarea styling that interferes with centering */
  resize: none !important;

  /* Use line-height to center single-line text vertically */
  line-height: calc(64px - 1.5rem) !important; /* 64px total height minus top/bottom padding */

  /* Remove default padding-top/bottom since line-height handles vertical centering */
  padding-top: 0.75rem !important;
  padding-bottom: 0.75rem !important;
  padding-left: 1rem !important;
  padding-right: 1rem !important;
}

textarea.wewrite-title-input.wewrite-input-error {
  border-color: oklch(var(--destructive)) !important;
}

textarea.wewrite-title-input.wewrite-input-error:focus {
  border-color: oklch(var(--destructive)) !important;
  box-shadow: 0 0 0 1px oklch(var(--destructive)) !important;
}

textarea.wewrite-title-input.wewrite-input-warning {
  border-color: oklch(var(--warning)) !important;
}

textarea.wewrite-title-input.wewrite-input-warning:focus {
  border-color: oklch(var(--warning)) !important;
  box-shadow: 0 0 0 1px oklch(var(--warning)) !important;
}

/* General textarea error/warning styles */
textarea.wewrite-input.wewrite-input-error {
  border-color: oklch(var(--destructive)) !important;
}

textarea.wewrite-input.wewrite-input-error:focus {
  border-color: oklch(var(--destructive)) !important;
  box-shadow: 0 0 0 1px oklch(var(--destructive)) !important;
}

textarea.wewrite-input.wewrite-input-warning {
  border-color: oklch(var(--warning)) !important;
}

textarea.wewrite-input.wewrite-input-warning:focus {
  border-color: oklch(var(--warning)) !important;
  box-shadow: 0 0 0 1px oklch(var(--warning)) !important;
}

/* ===== GLOBAL GLASSMORPHIC INPUT SYSTEM ===== */

/**
 * Universal WeWrite Input Style
 *
 * Provides glassmorphic styling consistent with the card system.
 * Used for all inputs throughout the app except Stripe embedded inputs.
 *
 * Features:
 * - Glassmorphic background matching card system
 * - Active state with accent color
 * - Consistent with global design system
 * - Theme-aware colors
 */
.wewrite-input {
  /* Base glassmorphic styling matching cards */
  background-color: var(--card-bg) !important;
  backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 80%)) brightness(calc(1 + var(--card-opacity) * 0.1)) !important;
  -webkit-backdrop-filter: blur(calc(var(--card-blur) * 20px)) saturate(calc(100% + var(--card-opacity) * 80%)) brightness(calc(1 + var(--card-opacity) * 0.1)) !important;

  /* Border and styling */
  border: 1px solid var(--card-border) !important;
  border-radius: 0.75rem !important; /* Slightly less rounded than cards for input feel */

  /* Text and spacing */
  color: var(--card-text) !important;
  padding: 0.75rem 1rem !important;

  /* Transitions */
  transition: all 0.2s ease-in-out !important;

  /* Remove default styling */
  box-shadow: none !important;
  outline: none !important;
  appearance: none !important;
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
}

/* Active/Focus state for inputs
 * Includes:
 * - :focus for direct element focus
 * - :focus-visible for keyboard focus
 * - :focus-within for container elements with focused children (e.g., Editor wrapper)
 * - .wewrite-active-input for programmatic active state
 */
.wewrite-input:focus,
.wewrite-input:focus-visible,
.wewrite-input:focus-within,
.wewrite-input.wewrite-active-input {
  border: 1px solid oklch(var(--accent-base)) !important;
  background-color: oklch(var(--accent-base) / 0.1) !important;
  box-shadow: 0 0 0 3px oklch(var(--accent-base) / 0.1) !important;
}

/* Placeholder styling */
.wewrite-input::placeholder {
  color: var(--card-text-muted) !important;
  opacity: 0.7 !important;
}

/* Placeholder styling for inputs with left icons */
.wewrite-input.pl-12::placeholder {
  text-indent: 0 !important; /* Reset any text-indent */
  padding-left: 0 !important; /* The pl-12 class already handles the spacing */
}

/* Specific classes for inputs with icons - use compound selector for higher specificity */
.wewrite-input.wewrite-input-left-icon {
  padding-left: 2.5rem !important; /* 40px - space for icon + padding */
}

.wewrite-input.wewrite-input-right-icon {
  padding-right: 2.75rem !important; /* 44px - enough space for icon + padding */
}

.wewrite-input-left-icon::placeholder,
.wewrite-input-right-icon::placeholder {
  text-indent: 0 !important;
  padding-left: 0 !important;
}

/* Disabled state */
.wewrite-input:disabled {
  opacity: 0.5 !important;
  cursor: not-allowed !important;
}

/* Error and warning states for inputs */
.wewrite-input.wewrite-input-error {
  border: 1px solid oklch(var(--destructive)) !important;
  background-color: oklch(var(--destructive) / 0.08) !important;
}

.wewrite-input.wewrite-input-error:focus,
.wewrite-input.wewrite-input-error:focus-visible,
.wewrite-input.wewrite-input-error:focus-within,
.wewrite-input.wewrite-input-error.wewrite-active-input {
  border: 1px solid oklch(var(--destructive)) !important;
  background-color: oklch(var(--destructive) / 0.12) !important;
  box-shadow: 0 0 0 3px oklch(var(--destructive) / 0.1) !important;
}

.wewrite-input.wewrite-input-error:hover {
  background-color: oklch(var(--destructive) / 0.1) !important;
}

.wewrite-input.wewrite-input-error:active {
  background-color: oklch(var(--destructive) / 0.15) !important;
}

.wewrite-input.wewrite-input-warning {
  border: 1px solid oklch(var(--warning)) !important;
  background-color: oklch(var(--warning) / 0.08) !important;
}

.wewrite-input.wewrite-input-warning:focus,
.wewrite-input.wewrite-input-warning:focus-visible,
.wewrite-input.wewrite-input-warning:focus-within,
.wewrite-input.wewrite-input-warning.wewrite-active-input {
  border: 1px solid oklch(var(--warning)) !important;
  background-color: oklch(var(--warning) / 0.12) !important;
  box-shadow: 0 0 0 3px oklch(var(--warning) / 0.1) !important;
}

.wewrite-input.wewrite-input-warning:hover {
  background-color: oklch(var(--warning) / 0.1) !important;
}

.wewrite-input.wewrite-input-warning:active {
  background-color: oklch(var(--warning) / 0.15) !important;
}

/* Override browser autofill styling - Use accent-alpha instead of browser's blue */
.wewrite-input:-webkit-autofill,
.wewrite-input:-webkit-autofill:hover,
.wewrite-input:-webkit-autofill:focus,
.wewrite-input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 30px oklch(var(--accent-base) / 0.1) inset !important;
  box-shadow: 0 0 0 30px oklch(var(--accent-base) / 0.1) inset !important;
  -webkit-text-fill-color: oklch(var(--foreground)) !important;
  caret-color: oklch(var(--foreground)) !important;
  border: 1px solid oklch(var(--accent-base) / 0.3) !important;
  transition: background-color 5000s ease-in-out 0s !important;
}

/* Dark mode autofill override */
.dark .wewrite-input:-webkit-autofill,
.dark .wewrite-input:-webkit-autofill:hover,
.dark .wewrite-input:-webkit-autofill:focus,
.dark .wewrite-input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 30px oklch(var(--accent-base) / 0.15) inset !important;
  box-shadow: 0 0 0 30px oklch(var(--accent-base) / 0.15) inset !important;
  -webkit-text-fill-color: oklch(var(--foreground)) !important;
}

/* Textarea specific adjustments */
textarea.wewrite-input {
  min-height: 80px !important;
  resize: none !important;
}

/* Override textarea min-height for title inputs specifically */
textarea.wewrite-input.wewrite-title-input {
  min-height: 64px !important;
}

/* Override any conflicting Tailwind styles */
input.wewrite-input,
textarea.wewrite-input,
select.wewrite-input {
  /* Force our styling to take precedence */
  background: var(--card-bg) !important;
  border: 1px solid var(--card-border) !important;
}

/* Ensure focus states work properly */
input.wewrite-input:focus,
textarea.wewrite-input:focus,
select.wewrite-input:focus,
input.wewrite-input:focus-visible,
textarea.wewrite-input:focus-visible,
select.wewrite-input:focus-visible {
  border: 1px solid oklch(var(--accent-base)) !important;
  background-color: oklch(var(--accent-base) / 0.1) !important;
  box-shadow: 0 0 0 3px oklch(var(--accent-base) / 0.1) !important;
  outline: none !important;
}

/* Title input hover state is now handled by wewrite-input system */

/* High contrast mode styling */
html[data-high-contrast="true"] .wewrite-card,
html[data-high-contrast="true"] [class*="border-theme-"],
html[data-high-contrast="true"] [class*="border"] {
  border-color: oklch(var(--border)) !important;
  border-width: 1px !important;
}

/* Mobile-specific card grid improvements */
@media (max-width: 767px) {
  /* Standardized spacing between cards in grid layouts on mobile */
  .grid-cols-1 {
    gap: 1.5rem !important; /* 24px gap on mobile */
  }

  /* Standardized spacing for space-y utilities on mobile */
  .space-y-3 > * + *,
  .space-y-4 > * + *,
  .space-y-6 > * + * {
    margin-top: 1.5rem !important; /* 24px gap to match grid spacing */
  }

  /* Remove height constraints on mobile for better content flow */
  .mobile-auto-height {
    height: auto !important;
    min-height: auto !important;
  }

  /* Better card padding on mobile */
  .mobile-card-padding {
    padding: 1.25rem !important; /* 20px padding on mobile */
  }

  /* Standardized mobile header content padding - only for specific legacy headers */
  [data-component="main-header"] .flex.items-center.h-full {
    height: 56px !important;
    padding-left: 1rem !important; /* 16px */
    padding-right: 1rem !important; /* 16px */
  }

  /* NavHeader uses its own responsive padding system */
  [data-component="nav-header"] .flex.items-center.h-14 {
    height: 56px !important;
    padding-left: 1rem !important; /* 16px */
    padding-right: 1rem !important; /* 16px */
  }

  /* Standardized mobile badge sizing for header financial displays - only for legacy components */
  [data-component="main-header"] .inline-flex.items-center.gap-2 {
    font-size: 0.75rem !important; /* 12px - consistent badge text size */
    padding: 0.125rem 0.625rem !important; /* 2px 10px - consistent badge padding */
    border-radius: 9999px !important; /* Full rounded */
  }

  /* NavHeader uses standard badge component styling */

  /* NavHeader sidebar offset - only on desktop */
  @media (min-width: 768px) {
    [data-component="nav-header"] {
      left: var(--sidebar-width, 0px) !important;
      width: calc(100vw - var(--sidebar-width, 0px)) !important;
    }
  }

}

@media (max-width: 767px) {
  .mobile-card-consistent {
    margin-bottom: 1.5rem !important; /* 24px spacing between cards */
    padding: 1.25rem !important; /* 20px internal padding */
  }

  /* For grid containers with mobile-card-consistent children */
  .mobile-card-consistent-grid {
    gap: 1.5rem !important; /* 24px gap between cards */
  }

  /* For space-y containers with mobile-card-consistent children */
  .mobile-card-consistent-space > * + * {
    margin-top: 1.5rem !important; /* 24px gap between cards */
  }
}

/* Hide scrollbar for Chrome, Safari and Opera */
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Hide scrollbar for IE, Edge and Firefox */
.scrollbar-hide {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

/* Thin scrollbar styling */
.scrollbar-thin::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 3px;
}

.dark .scrollbar-thin::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

.dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Scroll snap utilities */
.scroll-snap-align-start {
  scroll-snap-align: start;
}

/* Line clamp utilities */
.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Roadmap scroll navigation buttons */
#roadmap-scroll-left,
#roadmap-scroll-right {
  transition: all 0.2s ease;
  opacity: 0.9;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid oklch(var(--border) / 0.2);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  color: oklch(var(--foreground) / 0.7);
}

#roadmap-scroll-left:hover,
#roadmap-scroll-right:hover {
  opacity: 1;
  transform: scale(1.05);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
}

.dark #roadmap-scroll-left,
.dark #roadmap-scroll-right {
  border-color: oklch(var(--border) / 0.2);
  color: oklch(var(--foreground) / 0.9);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.dark #roadmap-scroll-left:hover,
.dark #roadmap-scroll-right:hover {
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
}

/* Filter chip animations and mobile scrolling */
@media (max-width: 768px) {
  /* Full-width scrolling container without masking or fading */
  .filter-chips-container {
    position: relative;
    cursor: grab;
    margin-left: -24px !important; /* Extend beyond container padding */
    margin-right: -24px !important; /* Extend beyond container padding */
    width: 100vw !important; /* Full viewport width */
    padding-left: 24px !important; /* Start first chip at screen edge */
    padding-right: 0 !important; /* Allow last chip to extend off-screen */
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    scroll-padding: 0; /* Ensure no scroll padding */
    max-width: none !important; /* Override any max-width constraints */
    box-sizing: content-box !important;
    left: 0 !important;
    right: 0 !important;
  }

  /* Container for the filter chips section */
  .filter-chips-section {
    position: relative;
    overflow: visible !important; /* Allow content to overflow */
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
  }

  /* Ensure consistent vertical alignment during animations */
  .filter-chip {
    display: flex;
    align-items: center;
    height: 36px; /* Fixed height to prevent layout shifts */
  }

  /* Smooth animation for checkmark */
  .filter-chip-checkmark {
    transition: width 300ms cubic-bezier(0.4, 0, 0.2, 1),
                opacity 300ms cubic-bezier(0.4, 0, 0.2, 1),
                margin 300ms cubic-bezier(0.4, 0, 0.2, 1);
    will-change: width, opacity, margin;
    overflow: hidden;
  }

  /* Ensure the parent container doesn't clip the filter chips */
  .filter-chips-parent {
    overflow: visible !important;
    position: relative !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    max-width: 100% !important;
    width: 100% !important;
  }

  /* Override any container padding that might be causing clipping */
  .filter-chips-parent.container {
    padding-left: 0 !important;
    padding-right: 0 !important;
    max-width: 100% !important;
    width: 100% !important;
  }

  /* Ensure the feature section container doesn't clip */
  #features .container {
    overflow: visible !important;
  }
}

/* Fade in animation for controlled rendering */
@keyframes fadeIn {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Hide the spinner for WebKit browsers (Chrome, Safari) */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Hide the spinner for Firefox */
input[type="number"] {
  -moz-appearance: textfield;
  appearance: textfield;
  /* Remove the spinner in Firefox */
}

/* Inner border utility for pill links */
.inner-border {
  position: relative;
}

.inner-border::after {
  content: '';
  position: absolute;
  top: 1px;
  left: 1px;
  right: 1px;
  bottom: 1px;
  border-radius: 6px; /* Slightly smaller than the outer radius */
  pointer-events: none;
}

/* Light mode - slightly darker inner border */
.inner-border-neutral-alpha-3::after {
  border: 1px solid oklch(var(--border) / 0.3);
}

/* Dark mode - slightly lighter inner border */
.dark .inner-border-neutral-alpha-3::after {
  border: 1px solid oklch(var(--border) / 0.3);
}

/* Basic styling for html and body */
html,
body {
  min-height: 100vh;
  min-height: 100dvh; /* Use dynamic viewport height on supported browsers */
  overflow-x: hidden;
  background-color: oklch(var(--background));
}

/* Make page containers transparent when background image is present */
body.has-background-image .bg-background,
body.has-background-image .min-h-screen.bg-background {
  background-color: transparent !important;
}

/* Background image system */
body {
  /* Overlay for background images */
  position: relative;
}

/* Background image layer with blur */
body::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: var(--background-image, none);
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  filter: blur(var(--background-blur, 0px));
  pointer-events: none;
  z-index: -3; /* Behind overlay */
  /* Ensure proper dimensions */
  width: 100vw;
  height: 100vh;
  /* Prevent any scaling or transformation issues */
  transform: none;
  will-change: auto;
}

/* Mobile-specific background adjustments */
@media (max-width: 768px) {
  body::after {
    /* Ensure background fills screen height on mobile */
    background-attachment: scroll; /* Fixed attachment can cause issues on mobile */
    /* Try contain to prevent excessive cropping/zooming */
    background-size: contain;
    background-position: center center; /* Center the image both horizontally and vertically */
    /* Fill empty space with theme-appropriate color */
    background-color: oklch(var(--background));
    /* Use standard viewport units for better compatibility */
    min-height: 100vh;
    height: 100vh;
    width: 100vw;
    /* Ensure proper positioning */
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    /* Prevent over-scaling */
    max-width: 100vw;
    max-height: 100vh;
    /* Ensure the pseudo-element doesn't cause layout issues */
    overflow: hidden;
  }

  /* Fallback: if contain leaves too much empty space, use cover with better constraints */
  @media (max-width: 768px) and (orientation: portrait) {
    body::after {
      background-size: cover;
      /* For portrait orientation, position slightly higher to show more of the image */
      background-position: center 30%;
    }
  }

  /* Ensure body and html don't interfere with background sizing */
  html, body {
    /* Prevent any transforms or scaling that might affect background */
    transform: none !important;
    scale: none !important;
    zoom: 1 !important;
    /* Ensure no overflow that might cause scaling issues */
    overflow-x: hidden;
    /* Ensure proper height calculation - use min-height instead of height
       to allow content to determine actual scroll height */
    min-height: 100vh;
  }

  /* Override for landing page - allow scroll height to be determined by content */
  html:has(.landing-page-root), html:has(.landing-page-root) body {
    height: auto !important;
    min-height: 100vh;
  }
}

/* Background overlay for images */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--background-overlay, transparent);
  pointer-events: none;
  z-index: -2; /* Above background image, below content */
}

/**
 * WeWrite Border Styling System
 *
 * Standardized approach to border styling that ensures consistent border styling
 * across the WeWrite application. These classes automatically adapt to light and
 * dark modes, and support additional theme modes including high contrast.
 *
 * Theme-Based Border Classes:
 * - .border-theme-light: Light border (20% opacity)
 * - .border-theme-medium: Medium border (40% opacity)
 * - .border-theme-strong: Strong border (60% opacity)
 * - .border-theme-solid: Solid border (100% opacity)
 *
 * Interactive Border Classes (hover states):
 * - .hover-border-light: Light hover state (30% opacity)
 * - .hover-border-medium: Medium hover state (50% opacity)
 * - .hover-border-strong: Strong hover state (70% opacity)
 * - .hover-border-solid: Solid hover state (100% opacity)
 *
 * Usage Examples:
 * Basic card: border-theme-strong rounded-xl shadow-sm p-4
 * Interactive card: border-theme-strong hover-border-strong rounded-xl shadow-sm p-4 transition-all duration-200
 *
 * Glass Effects:
 * - .glass-card: Card with subtle glass effect
 * - .glass-panel: Panel with more pronounced glass effect
 *
 * The border colors are defined using CSS variables in the theme:
 * --border: 215 20% 85% (light mode) / 217.2 32.6% 25% (dark mode)
 *
 * High contrast mode automatically applies stronger borders for accessibility.
 */

/* Centralized border utilities for consistent styling */
.border-theme-light {
  border: 1px solid oklch(var(--border) / 0.2);
}

.border-theme-medium {
  border: 1px solid oklch(var(--border) / 0.4);
}

.border-theme-strong {
  border: 1px solid oklch(var(--border) / 0.6);
}

.border-theme-solid {
  border: 1px solid oklch(var(--border));
}

/* High contrast mode border styles - only apply higher contrast in high contrast mode */
:root[data-accent-color="high-contrast"] .border-theme-light {
  border: 1px solid oklch(var(--border) / 0.4);
}

:root[data-accent-color="high-contrast"] .border-theme-medium {
  border: 1px solid oklch(var(--border) / 0.7);
}

:root[data-accent-color="high-contrast"] .border-theme-strong {
  border: 1px solid oklch(var(--border) / 0.9);
}

:root[data-accent-color="high-contrast"] .border-theme-solid {
  border: 1px solid oklch(var(--border));
}

/* Border direction utilities */
.border-t-only {
  border-top: 1px solid oklch(var(--border) / 0.4);
  border-right: none;
  border-bottom: none;
  border-left: none;
}

.border-b-only {
  border-top: none;
  border-right: none;
  border-bottom: 1px solid oklch(var(--border) / 0.4);
  border-left: none;
}

.border-r-only {
  border-top: none;
  border-right: 1px solid oklch(var(--border) / 0.4);
  border-bottom: none;
  border-left: none;
}

.border-l-only {
  border-top: none;
  border-right: none;
  border-bottom: none;
  border-left: 1px solid oklch(var(--border) / 0.4);
}

/* High contrast mode border direction utilities */
:root[data-accent-color="high-contrast"] .border-t-only {
  border-top: 1px solid oklch(var(--border) / 0.8);
}

:root[data-accent-color="high-contrast"] .border-b-only {
  border-bottom: 1px solid oklch(var(--border) / 0.8);
}

:root[data-accent-color="high-contrast"] .border-r-only {
  border-right: 1px solid oklch(var(--border) / 0.8);
}

:root[data-accent-color="high-contrast"] .border-l-only {
  border-left: 1px solid oklch(var(--border) / 0.8);
}

/* Header border transition */
.header-border-transition {
  border-bottom: 1px solid transparent;
  transition: border-color 0.3s ease-in-out;
}

.header-border-transition.border-visible {
  border-color: oklch(var(--border) / 0.4);
}

/* Page header height variable - set conservative initial value to prevent content clipping */
:root {
  --page-header-height: 140px; /* Conservative initial value, will be updated by JavaScript */
}

/* Smooth header height transitions */
.header-smooth-transition {
  transition: height 300ms ease-in-out, padding 300ms ease-in-out;
  /* REMOVED: transform: translateZ(0) - creates stacking context that breaks fixed positioning */
  will-change: height, padding;
  /* REMOVED: contain: layout style - creates stacking context that breaks fixed positioning */
}

/* Header spacer smooth transitions */
.header-spacer-smooth {
  transition: height 300ms ease-in-out;
  /* REMOVED: transform: translateZ(0) - creates stacking context that breaks fixed positioning */
  will-change: height;
  /* REMOVED: contain: layout - creates stacking context that breaks fixed positioning */
}

/* Mobile header optimizations */
@media (max-width: 640px) {
  /* Ensure headers don't overflow on small screens */
  .header-mobile-safe {
    min-width: 0;
    overflow: hidden;
  }

  /* Better mobile title truncation - only when scrolled */
  .header-title-mobile {
    max-width: 45vw !important;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* Allow title wrapping when expanded on mobile */
  .header-title-expanded-mobile {
    width: 100% !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    white-space: normal !important;
    text-align: center !important;
  }

  /* Better mobile byline truncation */
  .header-byline-mobile {
    max-width: 30vw !important;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* Reduce header padding on very small screens */
  .header-padding-mobile {
    padding-left: 0.75rem !important; /* 12px */
    padding-right: 0.75rem !important; /* 12px */
  }
}

/* Interactive border states */
.hover-border-light:hover {
  border-color: oklch(var(--border) / 0.3);
}

.hover-border-medium:hover {
  border-color: oklch(var(--border) / 0.5);
}

.hover-border-strong:hover {
  border-color: oklch(var(--border) / 0.7);
}

.hover-border-solid:hover {
  border-color: oklch(var(--border));
}

/* Divide utilities for theme-aware borders */
.divide-theme-light > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid oklch(var(--border) / 0.2);
}

.divide-theme-medium > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid oklch(var(--border) / 0.4);
}

.divide-theme-strong > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid oklch(var(--border) / 0.6);
}

.divide-theme-solid > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid oklch(var(--border));
}

/* High contrast mode divide utilities */
:root[data-accent-color="high-contrast"] .divide-theme-light > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid oklch(var(--border) / 0.4);
}

:root[data-accent-color="high-contrast"] .divide-theme-medium > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid oklch(var(--border) / 0.7);
}

:root[data-accent-color="high-contrast"] .divide-theme-strong > :not([hidden]) ~ :not([hidden]) {
  border-top: 1px solid oklch(var(--border) / 0.9);
}

:root[data-accent-color="high-contrast"] .divide-theme-solid > :not([hidden]) ~ :not([hidden]) {
  border-top: 2px solid oklch(var(--border));
}

/* Custom text highlight styles */
.custom-text-highlights {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: var(--z-fixed-header); /* Use centralized token */
  background-color: rgba(0, 0, 0, 0.5); /* Darken the entire screen */
}

.dark .custom-text-highlights {
  background-color: rgba(0, 0, 0, 0.7); /* Darker overlay for dark mode */
}

.custom-text-highlight {
  position: fixed;
  background-color: white; /* Punched-out light section */
  border-radius: 3px; /* Rounded corners like VSCode */
  pointer-events: none;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5); /* Subtle blue border */
  mix-blend-mode: difference; /* Creates a "hole" effect where text is visible */
}

.dark .custom-text-highlight {
  background-color: white; /* Same in dark mode for consistency */
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.7); /* More visible border in dark mode */
}

/* Highlight notification banner */
#highlight-notification {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: var(--z-overlay); /* Use centralized token */
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem 1rem;
  background-color: oklch(var(--background));
  border-bottom: 1px solid oklch(var(--border));
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Style for selected text to override browser default */
::selection {
  background-color: rgba(59, 130, 246, 0.15); /* Blue color with 15% opacity */
  color: inherit; /* Keep the text color unchanged */
}

/* Ensure text selection is enabled for all content areas */
[data-page-content],
.user-bio-content,
.group-about-content,
.page-content,
.content-area,
.unified-text-content,
.prose,
/* UI chrome should not be selectable (buttons/nav/headers) */
header, nav, .sidebar, .navigation, .menu, .toolbar,
button, [role="button"], .button, .btn,
.pill-link, .compound-link-container, .username-badge-link {
  -webkit-user-select: none !important;
  -khtml-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
}

/* Content areas MUST be selectable */
h1, h2, h3, h4, h5, h6,
.page-title, .content-title, .page-header h1, .page-header h2,
p, .page-content, .editor-content, .content-area, .prose,
[data-page-content], .unified-text-content, .text-view-content,
.paragraph-content, .wewrite-content-display, .wewrite-viewer-content,
.wewrite-paragraph-content, [data-slate-node="text"], [data-slate-leaf],
.slate-text, .wewrite-dense-content-flow, .wewrite-normal-content-flow,
.unified-paragraph, .unified-text-content span,
input, textarea, select, [contenteditable="true"],
input[type="text"], input[type="email"], input[type="password"],
input[type="search"], input[type="url"], input[type="tel"] {
  -webkit-user-select: text !important;
  -khtml-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  user-select: text !important;
}




/* Ensure text selection works in both light and dark modes */
.dark ::selection {
  background-color: rgba(59, 130, 246, 0.25); /* Slightly more visible in dark mode */
  color: inherit;
}

/* Global pill text truncation - handles overflow gracefully */
/* Only truncate when text actually exceeds available space */
.pill-text {
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-width: 0;
  flex: 1 1 auto;
}

/* Removed redundant truncation rules - now handled globally by .pill-text */

/* Truncate links in the editor only when they would cause layout issues */
.truncate-link {
  /* Only constrain width when absolutely necessary for layout */
  max-width: calc(100vw - 4rem); /* Prevent viewport overflow with generous margin */
  display: inline-flex !important;
  white-space: nowrap !important;
  overflow: hidden !important;
}

.truncate-link > div {
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* FIX: Allow pill links to use available space more generously */
.paragraph-with-number a {
  /* PillStyleContext now uses inline-flex with proper alignment */
  vertical-align: baseline !important; /* Ensure proper alignment with paragraph numbers */
  /* Only constrain when absolutely necessary - allow links to use most of the available space */
  max-width: calc(100vw - 4rem); /* More generous space - only account for essential margins */
}

/* Text contrast is now handled by PillStyleContext - removed conflicting rules */

/* Ensure outline pills use the accent color for text - but NOT text content */
a.bg-transparent.pill-link,
button.bg-transparent,
div.bg-transparent.pill-link,
a.bg-transparent[href],
button.bg-transparent[type] {
  color: oklch(var(--accent-base)) !important;
}



/* COMPOUND LINK FIXES - Ensure proper inline alignment with flexbox */
.compound-link-container {
  display: inline-flex !important;
  align-items: center !important;
  white-space: nowrap !important;
}

/* Prevent any global link styles from merging compound link pills */
.compound-link-container > a,
.compound-link-container > span > a {
  margin-left: 0.125rem !important;
  margin-right: 0.125rem !important;
  border-radius: 0.5rem !important; /* Maintain individual pill border radius */
}

/* Ensure compound link "by" text is properly spaced and styled */
.compound-link-container > .text-muted-foreground {
  margin: 0 0.125rem !important;
  padding: 0 !important;
}

/* REMOVED: Legacy contentEditable styles - using Slate.js now */

/* REMOVED: Legacy contentEditable compound link styles - using Slate.js now */

/* Comprehensive fix for text contrast issues */
/* Ensure all text has sufficient contrast against its background */
.text-muted-foreground {
  color: oklch(var(--muted-foreground)) !important;
}

/* Ensure tab text is always readable */
[role="tab"] {
  color: oklch(var(--foreground)) !important;
}

/* Ensure text in light mode has sufficient contrast */
.light [role="tab"],
.light .text-muted-foreground,
.light .text-foreground {
  color: oklch(var(--foreground)) !important;
}

/* Ensure text in dark mode has sufficient contrast */
.dark [role="tab"],
.dark .text-muted-foreground,
.dark .text-foreground {
  color: oklch(var(--foreground)) !important;
}

/* Systematic Color System - Opacity-based Utility Classes
 * Refactored: Removed !important declarations and consolidated duplicates
 * These utility classes work through normal CSS specificity
 */

/* Accent Background Colors - Complete opacity scale */
.bg-accent { background-color: oklch(var(--accent-base)); }
.bg-accent-1 { background-color: oklch(var(--accent-base) / 0.01); }
.bg-accent-5 { background-color: oklch(var(--accent-base) / 0.05); }
.bg-accent-10 { background-color: oklch(var(--accent-base) / 0.1); }
.bg-accent-15 { background-color: oklch(var(--accent-base) / 0.15); }
.bg-accent-20 { background-color: oklch(var(--accent-base) / 0.2); }
.bg-accent-25 { background-color: oklch(var(--accent-base) / 0.25); }
.bg-accent-30 { background-color: oklch(var(--accent-base) / 0.3); }
.bg-accent-35 { background-color: oklch(var(--accent-base) / 0.35); }
.bg-accent-40 { background-color: oklch(var(--accent-base) / 0.4); }
.bg-accent-50 { background-color: oklch(var(--accent-base) / 0.5); }
.bg-accent-60 { background-color: oklch(var(--accent-base) / 0.6); }
.bg-accent-70 { background-color: oklch(var(--accent-base) / 0.7); }
.bg-accent-80 { background-color: oklch(var(--accent-base) / 0.8); }
.bg-accent-90 { background-color: oklch(var(--accent-base) / 0.9); }
.bg-accent-100 { background-color: oklch(var(--accent-base)); }
.bg-accent-110 { background-color: oklch(var(--accent-base) / 1.1); }
.bg-accent-120 { background-color: oklch(var(--accent-base) / 1.2); }
.bg-accent-140 { background-color: oklch(var(--accent-base) / 1.4); }

/* Neutral Solid Background Colors (uses neutral-base color with alpha) */
.bg-neutral { background-color: oklch(var(--neutral-base)); }
.bg-neutral-solid-1 { background-color: oklch(var(--neutral-base) / 0.01); }
.bg-neutral-solid-5 { background-color: oklch(var(--neutral-base) / 0.05); }
.bg-neutral-solid-10 { background-color: oklch(var(--neutral-base) / 0.1); }
.bg-neutral-solid-15 { background-color: oklch(var(--neutral-base) / 0.15); }
.bg-neutral-solid-20 { background-color: oklch(var(--neutral-base) / 0.2); }
.bg-neutral-solid-25 { background-color: oklch(var(--neutral-base) / 0.25); }
.bg-neutral-solid-30 { background-color: oklch(var(--neutral-base) / 0.3); }
.bg-neutral-solid-40 { background-color: oklch(var(--neutral-base) / 0.4); }
.bg-neutral-solid-50 { background-color: oklch(var(--neutral-base) / 0.5); }
.bg-neutral-solid-60 { background-color: oklch(var(--neutral-base) / 0.6); }
.bg-neutral-solid-70 { background-color: oklch(var(--neutral-base) / 0.7); }
.bg-neutral-solid-80 { background-color: oklch(var(--neutral-base) / 0.8); }
.bg-neutral-solid-90 { background-color: oklch(var(--neutral-base) / 0.9); }
.bg-neutral-solid-100 { background-color: oklch(var(--neutral-base)); }
/* Legacy aliases - keep for backward compatibility */
.bg-neutral-1 { background-color: oklch(var(--neutral-base) / 0.01); }
.bg-neutral-5 { background-color: oklch(var(--neutral-base) / 0.05); }
.bg-neutral-10 { background-color: oklch(var(--neutral-base) / 0.1); }
.bg-neutral-15 { background-color: oklch(var(--neutral-base) / 0.15); }
.bg-neutral-20 { background-color: oklch(var(--neutral-base) / 0.2); }
.bg-neutral-25 { background-color: oklch(var(--neutral-base) / 0.25); }
.bg-neutral-30 { background-color: oklch(var(--neutral-base) / 0.3); }
.bg-neutral-40 { background-color: oklch(var(--neutral-base) / 0.4); }
.bg-neutral-50 { background-color: oklch(var(--neutral-base) / 0.5); }
.bg-neutral-60 { background-color: oklch(var(--neutral-base) / 0.6); }
.bg-neutral-70 { background-color: oklch(var(--neutral-base) / 0.7); }
.bg-neutral-80 { background-color: oklch(var(--neutral-base) / 0.8); }
.bg-neutral-90 { background-color: oklch(var(--neutral-base) / 0.9); }
.bg-neutral-100 { background-color: oklch(var(--neutral-base)); }

/* Neutral Alpha Background Colors (additive: black in light, white in dark)
   Scale: 1-100 representing percentage opacity
   Usage: bg-neutral-alpha-{1-100} */
.bg-neutral-alpha-1 { background-color: rgba(0, 0, 0, 0.01); }
.dark .bg-neutral-alpha-1 { background-color: rgba(255, 255, 255, 0.01); }
.bg-neutral-alpha-2 { background-color: rgba(0, 0, 0, 0.02); }
.dark .bg-neutral-alpha-2 { background-color: rgba(255, 255, 255, 0.02); }
.bg-neutral-alpha-3 { background-color: rgba(0, 0, 0, 0.03); }
.dark .bg-neutral-alpha-3 { background-color: rgba(255, 255, 255, 0.03); }
.bg-neutral-alpha-4 { background-color: rgba(0, 0, 0, 0.04); }
.dark .bg-neutral-alpha-4 { background-color: rgba(255, 255, 255, 0.04); }
.bg-neutral-alpha-5 { background-color: rgba(0, 0, 0, 0.05); }
.dark .bg-neutral-alpha-5 { background-color: rgba(255, 255, 255, 0.05); }
.bg-neutral-alpha-6 { background-color: rgba(0, 0, 0, 0.06); }
.dark .bg-neutral-alpha-6 { background-color: rgba(255, 255, 255, 0.06); }
.bg-neutral-alpha-7 { background-color: rgba(0, 0, 0, 0.07); }
.dark .bg-neutral-alpha-7 { background-color: rgba(255, 255, 255, 0.07); }
.bg-neutral-alpha-8 { background-color: rgba(0, 0, 0, 0.08); }
.dark .bg-neutral-alpha-8 { background-color: rgba(255, 255, 255, 0.08); }
.bg-neutral-alpha-9 { background-color: rgba(0, 0, 0, 0.09); }
.dark .bg-neutral-alpha-9 { background-color: rgba(255, 255, 255, 0.09); }
.bg-neutral-alpha-10 { background-color: rgba(0, 0, 0, 0.1); }
.dark .bg-neutral-alpha-10 { background-color: rgba(255, 255, 255, 0.1); }
.bg-neutral-alpha-15 { background-color: rgba(0, 0, 0, 0.15); }
.dark .bg-neutral-alpha-15 { background-color: rgba(255, 255, 255, 0.15); }
.bg-neutral-alpha-20 { background-color: rgba(0, 0, 0, 0.2); }
.dark .bg-neutral-alpha-20 { background-color: rgba(255, 255, 255, 0.2); }
.bg-neutral-alpha-25 { background-color: rgba(0, 0, 0, 0.25); }
.dark .bg-neutral-alpha-25 { background-color: rgba(255, 255, 255, 0.25); }
.bg-neutral-alpha-30 { background-color: rgba(0, 0, 0, 0.3); }
.dark .bg-neutral-alpha-30 { background-color: rgba(255, 255, 255, 0.3); }
.bg-neutral-alpha-35 { background-color: rgba(0, 0, 0, 0.35); }
.dark .bg-neutral-alpha-35 { background-color: rgba(255, 255, 255, 0.35); }
.bg-neutral-alpha-40 { background-color: rgba(0, 0, 0, 0.4); }
.dark .bg-neutral-alpha-40 { background-color: rgba(255, 255, 255, 0.4); }
.bg-neutral-alpha-45 { background-color: rgba(0, 0, 0, 0.45); }
.dark .bg-neutral-alpha-45 { background-color: rgba(255, 255, 255, 0.45); }
.bg-neutral-alpha-50 { background-color: rgba(0, 0, 0, 0.5); }
.dark .bg-neutral-alpha-50 { background-color: rgba(255, 255, 255, 0.5); }
.bg-neutral-alpha-55 { background-color: rgba(0, 0, 0, 0.55); }
.dark .bg-neutral-alpha-55 { background-color: rgba(255, 255, 255, 0.55); }
.bg-neutral-alpha-60 { background-color: rgba(0, 0, 0, 0.6); }
.dark .bg-neutral-alpha-60 { background-color: rgba(255, 255, 255, 0.6); }
.bg-neutral-alpha-65 { background-color: rgba(0, 0, 0, 0.65); }
.dark .bg-neutral-alpha-65 { background-color: rgba(255, 255, 255, 0.65); }
.bg-neutral-alpha-70 { background-color: rgba(0, 0, 0, 0.7); }
.dark .bg-neutral-alpha-70 { background-color: rgba(255, 255, 255, 0.7); }
.bg-neutral-alpha-75 { background-color: rgba(0, 0, 0, 0.75); }
.dark .bg-neutral-alpha-75 { background-color: rgba(255, 255, 255, 0.75); }
.bg-neutral-alpha-80 { background-color: rgba(0, 0, 0, 0.8); }
.dark .bg-neutral-alpha-80 { background-color: rgba(255, 255, 255, 0.8); }
.bg-neutral-alpha-85 { background-color: rgba(0, 0, 0, 0.85); }
.dark .bg-neutral-alpha-85 { background-color: rgba(255, 255, 255, 0.85); }
.bg-neutral-alpha-90 { background-color: rgba(0, 0, 0, 0.9); }
.dark .bg-neutral-alpha-90 { background-color: rgba(255, 255, 255, 0.9); }
.bg-neutral-alpha-95 { background-color: rgba(0, 0, 0, 0.95); }
.dark .bg-neutral-alpha-95 { background-color: rgba(255, 255, 255, 0.95); }
.bg-neutral-alpha-100 { background-color: rgba(0, 0, 0, 1); }
.dark .bg-neutral-alpha-100 { background-color: rgba(255, 255, 255, 1); }

/* Dark-mode only neutral alpha backgrounds (transparent in light, white overlay in dark) */
.bg-neutral-alpha-dark-5 { background-color: transparent; }
.dark .bg-neutral-alpha-dark-5 { background-color: rgba(255, 255, 255, 0.05); }
.bg-neutral-alpha-dark-10 { background-color: transparent; }
.dark .bg-neutral-alpha-dark-10 { background-color: rgba(255, 255, 255, 0.1); }
.bg-neutral-alpha-dark-15 { background-color: transparent; }
.dark .bg-neutral-alpha-dark-15 { background-color: rgba(255, 255, 255, 0.15); }

/* SVG Fill - Neutral Alpha (for pie charts and SVG elements)
   Usage: fill-neutral-alpha-{N} */
.fill-neutral-alpha-5 { fill: rgba(0, 0, 0, 0.05); }
.dark .fill-neutral-alpha-5 { fill: rgba(255, 255, 255, 0.05); }
.fill-neutral-alpha-10 { fill: rgba(0, 0, 0, 0.1); }
.dark .fill-neutral-alpha-10 { fill: rgba(255, 255, 255, 0.1); }
.fill-neutral-alpha-15 { fill: rgba(0, 0, 0, 0.15); }
.dark .fill-neutral-alpha-15 { fill: rgba(255, 255, 255, 0.15); }
.fill-neutral-alpha-20 { fill: rgba(0, 0, 0, 0.2); }
.dark .fill-neutral-alpha-20 { fill: rgba(255, 255, 255, 0.2); }
.fill-neutral-alpha-25 { fill: rgba(0, 0, 0, 0.25); }
.dark .fill-neutral-alpha-25 { fill: rgba(255, 255, 255, 0.25); }
.fill-neutral-alpha-30 { fill: rgba(0, 0, 0, 0.3); }
.dark .fill-neutral-alpha-30 { fill: rgba(255, 255, 255, 0.3); }

/* Success Background Colors */
.bg-success { background-color: oklch(var(--success-base)); }
.bg-success-1 { background-color: oklch(var(--success-base) / 0.01); }
.bg-success-5 { background-color: oklch(var(--success-base) / 0.05); }
.bg-success-10 { background-color: oklch(var(--success-base) / 0.1); }
.bg-success-15 { background-color: oklch(var(--success-base) / 0.15); }
.bg-success-20 { background-color: oklch(var(--success-base) / 0.2); }
.bg-success-25 { background-color: oklch(var(--success-base) / 0.25); }
.bg-success-30 { background-color: oklch(var(--success-base) / 0.3); }
.bg-success-40 { background-color: oklch(var(--success-base) / 0.4); }
.bg-success-50 { background-color: oklch(var(--success-base) / 0.5); }
.bg-success-60 { background-color: oklch(var(--success-base) / 0.6); }
.bg-success-70 { background-color: oklch(var(--success-base) / 0.7); }
.bg-success-80 { background-color: oklch(var(--success-base) / 0.8); }
.bg-success-90 { background-color: oklch(var(--success-base) / 0.9); }
.bg-success-100 { background-color: oklch(var(--success-base)); }
.bg-success-120 { background-color: oklch(var(--success-base) / 1.2); }
.bg-success-140 { background-color: oklch(var(--success-base) / 1.4); }

/* Warning Background Colors */
.bg-warn { background-color: oklch(var(--warn-base)); }
.bg-warn-1 { background-color: oklch(var(--warn-base) / 0.01); }
.bg-warn-5 { background-color: oklch(var(--warn-base) / 0.05); }
.bg-warn-10 { background-color: oklch(var(--warn-base) / 0.1); }
.bg-warn-15 { background-color: oklch(var(--warn-base) / 0.15); }
.bg-warn-20 { background-color: oklch(var(--warn-base) / 0.2); }
.bg-warn-25 { background-color: oklch(var(--warn-base) / 0.25); }
.bg-warn-30 { background-color: oklch(var(--warn-base) / 0.3); }
.bg-warn-40 { background-color: oklch(var(--warn-base) / 0.4); }
.bg-warn-50 { background-color: oklch(var(--warn-base) / 0.5); }
.bg-warn-60 { background-color: oklch(var(--warn-base) / 0.6); }
.bg-warn-70 { background-color: oklch(var(--warn-base) / 0.7); }
.bg-warn-80 { background-color: oklch(var(--warn-base) / 0.8); }
.bg-warn-90 { background-color: oklch(var(--warn-base) / 0.9); }
.bg-warn-100 { background-color: oklch(var(--warn-base)); }

/* Error Background Colors */
.bg-error { background-color: oklch(var(--error-base)); }
.bg-error-1 { background-color: oklch(var(--error-base) / 0.01); }
.bg-error-5 { background-color: oklch(var(--error-base) / 0.05); }
.bg-error-10 { background-color: oklch(var(--error-base) / 0.1); }
.bg-error-15 { background-color: oklch(var(--error-base) / 0.15); }
.bg-error-20 { background-color: oklch(var(--error-base) / 0.2); }
.bg-error-25 { background-color: oklch(var(--error-base) / 0.25); }
.bg-error-30 { background-color: oklch(var(--error-base) / 0.3); }
.bg-error-40 { background-color: oklch(var(--error-base) / 0.4); }
.bg-error-50 { background-color: oklch(var(--error-base) / 0.5); }
.bg-error-60 { background-color: oklch(var(--error-base) / 0.6); }
.bg-error-70 { background-color: oklch(var(--error-base) / 0.7); }
.bg-error-80 { background-color: oklch(var(--error-base) / 0.8); }
.bg-error-90 { background-color: oklch(var(--error-base) / 0.9); }
.bg-error-100 { background-color: oklch(var(--error-base)); }
.bg-error-120 { background-color: oklch(var(--error-base) / 1.2); }
.bg-error-140 { background-color: oklch(var(--error-base) / 1.4); }

/* Duplicate sections removed - consolidated above */

/* Border Color System - Refactored without !important */

/* Accent Border Colors */
.border-accent { border-color: oklch(var(--accent-base)); }
.border-accent-1 { border-color: oklch(var(--accent-base) / 0.01); }
.border-accent-5 { border-color: oklch(var(--accent-base) / 0.05); }
.border-accent-10 { border-color: oklch(var(--accent-base) / 0.1); }
.border-accent-15 { border-color: oklch(var(--accent-base) / 0.15); }
.border-accent-20 { border-color: oklch(var(--accent-base) / 0.2); }
.border-accent-25 { border-color: oklch(var(--accent-base) / 0.25); }
.border-accent-30 { border-color: oklch(var(--accent-base) / 0.3); }
.border-accent-40 { border-color: oklch(var(--accent-base) / 0.4); }
.border-accent-50 { border-color: oklch(var(--accent-base) / 0.5); }
.border-accent-60 { border-color: oklch(var(--accent-base) / 0.6); }
.border-accent-70 { border-color: oklch(var(--accent-base) / 0.7); }
.border-accent-80 { border-color: oklch(var(--accent-base) / 0.8); }
.border-accent-90 { border-color: oklch(var(--accent-base) / 0.9); }
.border-accent-100 { border-color: oklch(var(--accent-base)); }

/* Neutral Border Colors */
.border-neutral { border-color: oklch(var(--neutral-base)); }
.border-neutral-1 { border-color: oklch(var(--neutral-base) / 0.01); }
.border-neutral-5 { border-color: oklch(var(--neutral-base) / 0.05); }
.border-neutral-10 { border-color: oklch(var(--neutral-base) / 0.1); }
.border-neutral-15 { border-color: oklch(var(--neutral-base) / 0.15); }
.border-neutral-20 { border-color: oklch(var(--neutral-base) / 0.2); }
.border-neutral-25 { border-color: oklch(var(--neutral-base) / 0.25); }
.border-neutral-30 { border-color: oklch(var(--neutral-base) / 0.3); }
.border-neutral-40 { border-color: oklch(var(--neutral-base) / 0.4); }
.border-neutral-50 { border-color: oklch(var(--neutral-base) / 0.5); }
.border-neutral-60 { border-color: oklch(var(--neutral-base) / 0.6); }
.border-neutral-70 { border-color: oklch(var(--neutral-base) / 0.7); }
.border-neutral-80 { border-color: oklch(var(--neutral-base) / 0.8); }
.border-neutral-90 { border-color: oklch(var(--neutral-base) / 0.9); }
.border-neutral-100 { border-color: oklch(var(--neutral-base)); }

/* Neutral Alpha Border Colors (additive: black in light, white in dark)
   Scale: 1-100 representing percentage opacity
   Usage: border-neutral-alpha-{1-100} */
.border-neutral-alpha-5 { border-color: rgba(0, 0, 0, 0.05); }
.dark .border-neutral-alpha-5 { border-color: rgba(255, 255, 255, 0.05); }
.border-neutral-alpha-10 { border-color: rgba(0, 0, 0, 0.1); }
.dark .border-neutral-alpha-10 { border-color: rgba(255, 255, 255, 0.1); }
.border-neutral-alpha-15 { border-color: rgba(0, 0, 0, 0.15); }
.dark .border-neutral-alpha-15 { border-color: rgba(255, 255, 255, 0.15); }
.border-neutral-alpha-20 { border-color: rgba(0, 0, 0, 0.2); }
.dark .border-neutral-alpha-20 { border-color: rgba(255, 255, 255, 0.2); }
.border-neutral-alpha-25 { border-color: rgba(0, 0, 0, 0.25); }
.dark .border-neutral-alpha-25 { border-color: rgba(255, 255, 255, 0.25); }
.border-neutral-alpha-30 { border-color: rgba(0, 0, 0, 0.3); }
.dark .border-neutral-alpha-30 { border-color: rgba(255, 255, 255, 0.3); }
.border-neutral-alpha-40 { border-color: rgba(0, 0, 0, 0.4); }
.dark .border-neutral-alpha-40 { border-color: rgba(255, 255, 255, 0.4); }
.border-neutral-alpha-50 { border-color: rgba(0, 0, 0, 0.5); }
.dark .border-neutral-alpha-50 { border-color: rgba(255, 255, 255, 0.5); }
.border-neutral-alpha-60 { border-color: rgba(0, 0, 0, 0.6); }
.dark .border-neutral-alpha-60 { border-color: rgba(255, 255, 255, 0.6); }
.border-neutral-alpha-70 { border-color: rgba(0, 0, 0, 0.7); }
.dark .border-neutral-alpha-70 { border-color: rgba(255, 255, 255, 0.7); }
.border-neutral-alpha-80 { border-color: rgba(0, 0, 0, 0.8); }
.dark .border-neutral-alpha-80 { border-color: rgba(255, 255, 255, 0.8); }
.border-neutral-alpha-90 { border-color: rgba(0, 0, 0, 0.9); }
.dark .border-neutral-alpha-90 { border-color: rgba(255, 255, 255, 0.9); }
.border-neutral-alpha-100 { border-color: rgba(0, 0, 0, 1); }
.dark .border-neutral-alpha-100 { border-color: rgba(255, 255, 255, 1); }

/* Success Border Colors */
.border-success { border-color: oklch(var(--success-base)); }
.border-success-1 { border-color: oklch(var(--success-base) / 0.01); }
.border-success-5 { border-color: oklch(var(--success-base) / 0.05); }
.border-success-10 { border-color: oklch(var(--success-base) / 0.1); }
.border-success-15 { border-color: oklch(var(--success-base) / 0.15); }
.border-success-20 { border-color: oklch(var(--success-base) / 0.2); }
.border-success-25 { border-color: oklch(var(--success-base) / 0.25); }
.border-success-30 { border-color: oklch(var(--success-base) / 0.3); }
.border-success-40 { border-color: oklch(var(--success-base) / 0.4); }
.border-success-50 { border-color: oklch(var(--success-base) / 0.5); }
.border-success-60 { border-color: oklch(var(--success-base) / 0.6); }
.border-success-70 { border-color: oklch(var(--success-base) / 0.7); }
.border-success-80 { border-color: oklch(var(--success-base) / 0.8); }
.border-success-90 { border-color: oklch(var(--success-base) / 0.9); }
.border-success-100 { border-color: oklch(var(--success-base)); }

/* Warning Border Colors */
.border-warn { border-color: oklch(var(--warn-base)); }
.border-warn-1 { border-color: oklch(var(--warn-base) / 0.01); }
.border-warn-5 { border-color: oklch(var(--warn-base) / 0.05); }
.border-warn-10 { border-color: oklch(var(--warn-base) / 0.1); }
.border-warn-15 { border-color: oklch(var(--warn-base) / 0.15); }
.border-warn-20 { border-color: oklch(var(--warn-base) / 0.2); }
.border-warn-25 { border-color: oklch(var(--warn-base) / 0.25); }
.border-warn-30 { border-color: oklch(var(--warn-base) / 0.3); }
.border-warn-40 { border-color: oklch(var(--warn-base) / 0.4); }
.border-warn-50 { border-color: oklch(var(--warn-base) / 0.5); }
.border-warn-60 { border-color: oklch(var(--warn-base) / 0.6); }
.border-warn-70 { border-color: oklch(var(--warn-base) / 0.7); }
.border-warn-80 { border-color: oklch(var(--warn-base) / 0.8); }
.border-warn-90 { border-color: oklch(var(--warn-base) / 0.9); }
.border-warn-100 { border-color: oklch(var(--warn-base)); }

/* Error Border Colors */
.border-error { border-color: oklch(var(--error-base)); }
.border-error-1 { border-color: oklch(var(--error-base) / 0.01); }
.border-error-5 { border-color: oklch(var(--error-base) / 0.05); }
.border-error-10 { border-color: oklch(var(--error-base) / 0.1); }
.border-error-15 { border-color: oklch(var(--error-base) / 0.15); }
.border-error-20 { border-color: oklch(var(--error-base) / 0.2); }
.border-error-25 { border-color: oklch(var(--error-base) / 0.25); }
.border-error-30 { border-color: oklch(var(--error-base) / 0.3); }
.border-error-40 { border-color: oklch(var(--error-base) / 0.4); }
.border-error-50 { border-color: oklch(var(--error-base) / 0.5); }
.border-error-60 { border-color: oklch(var(--error-base) / 0.6); }
.border-error-70 { border-color: oklch(var(--error-base) / 0.7); }
.border-error-80 { border-color: oklch(var(--error-base) / 0.8); }
.border-error-90 { border-color: oklch(var(--error-base) / 0.9); }
.border-error-100 { border-color: oklch(var(--error-base)); }

/* Text Color System - Refactored without !important */

/* Accent Text Colors */
.text-accent { color: oklch(var(--accent-base)); }
.text-accent-1 { color: oklch(var(--accent-base) / 0.01); }
.text-accent-5 { color: oklch(var(--accent-base) / 0.05); }
.text-accent-10 { color: oklch(var(--accent-base) / 0.1); }
.text-accent-15 { color: oklch(var(--accent-base) / 0.15); }
.text-accent-20 { color: oklch(var(--accent-base) / 0.2); }
.text-accent-30 { color: oklch(var(--accent-base) / 0.3); }
.text-accent-40 { color: oklch(var(--accent-base) / 0.4); }
.text-accent-50 { color: oklch(var(--accent-base) / 0.5); }
.text-accent-60 { color: oklch(var(--accent-base) / 0.6); }
.text-accent-70 { color: oklch(var(--accent-base) / 0.7); }
.text-accent-80 { color: oklch(var(--accent-base) / 0.8); }
.text-accent-90 { color: oklch(var(--accent-base) / 0.9); }
.text-accent-100 { color: oklch(var(--accent-base)); }

/* Neutral Text Colors */
.text-neutral { color: oklch(var(--neutral-base)); }
.text-neutral-1 { color: oklch(var(--neutral-base) / 0.01); }
.text-neutral-5 { color: oklch(var(--neutral-base) / 0.05); }
.text-neutral-10 { color: oklch(var(--neutral-base) / 0.1); }
.text-neutral-15 { color: oklch(var(--neutral-base) / 0.15); }
.text-neutral-20 { color: oklch(var(--neutral-base) / 0.2); }
.text-neutral-25 { color: oklch(var(--neutral-base) / 0.25); }
.text-neutral-30 { color: oklch(var(--neutral-base) / 0.3); }
.text-neutral-40 { color: oklch(var(--neutral-base) / 0.4); }
.text-neutral-50 { color: oklch(var(--neutral-base) / 0.5); }
.text-neutral-60 { color: oklch(var(--neutral-base) / 0.6); }
.text-neutral-70 { color: oklch(var(--neutral-base) / 0.7); }
.text-neutral-80 { color: oklch(var(--neutral-base) / 0.8); }
.text-neutral-90 { color: oklch(var(--neutral-base) / 0.9); }
.text-neutral-100 { color: oklch(var(--neutral-base)); }

/* Neutral Alpha Text Colors (additive: black in light, white in dark)
   Scale: 1-100 representing percentage opacity
   Usage: text-neutral-alpha-{1-100} */
.text-neutral-alpha-5 { color: rgba(0, 0, 0, 0.05); }
.dark .text-neutral-alpha-5 { color: rgba(255, 255, 255, 0.05); }
.text-neutral-alpha-10 { color: rgba(0, 0, 0, 0.1); }
.dark .text-neutral-alpha-10 { color: rgba(255, 255, 255, 0.1); }
.text-neutral-alpha-15 { color: rgba(0, 0, 0, 0.15); }
.dark .text-neutral-alpha-15 { color: rgba(255, 255, 255, 0.15); }
.text-neutral-alpha-20 { color: rgba(0, 0, 0, 0.2); }
.dark .text-neutral-alpha-20 { color: rgba(255, 255, 255, 0.2); }
.text-neutral-alpha-25 { color: rgba(0, 0, 0, 0.25); }
.dark .text-neutral-alpha-25 { color: rgba(255, 255, 255, 0.25); }
.text-neutral-alpha-30 { color: rgba(0, 0, 0, 0.3); }
.dark .text-neutral-alpha-30 { color: rgba(255, 255, 255, 0.3); }
.text-neutral-alpha-40 { color: rgba(0, 0, 0, 0.4); }
.dark .text-neutral-alpha-40 { color: rgba(255, 255, 255, 0.4); }
.text-neutral-alpha-50 { color: rgba(0, 0, 0, 0.5); }
.dark .text-neutral-alpha-50 { color: rgba(255, 255, 255, 0.5); }
.text-neutral-alpha-60 { color: rgba(0, 0, 0, 0.6); }
.dark .text-neutral-alpha-60 { color: rgba(255, 255, 255, 0.6); }
.text-neutral-alpha-70 { color: rgba(0, 0, 0, 0.7); }
.dark .text-neutral-alpha-70 { color: rgba(255, 255, 255, 0.7); }
.text-neutral-alpha-80 { color: rgba(0, 0, 0, 0.8); }
.dark .text-neutral-alpha-80 { color: rgba(255, 255, 255, 0.8); }
.text-neutral-alpha-90 { color: rgba(0, 0, 0, 0.9); }
.dark .text-neutral-alpha-90 { color: rgba(255, 255, 255, 0.9); }
.text-neutral-alpha-100 { color: rgba(0, 0, 0, 1); }
.dark .text-neutral-alpha-100 { color: rgba(255, 255, 255, 1); }

/* Success Text Colors */
.text-success { color: oklch(var(--success-base)); }
.text-success-1 { color: oklch(var(--success-base) / 0.01); }
.text-success-5 { color: oklch(var(--success-base) / 0.05); }
.text-success-10 { color: oklch(var(--success-base) / 0.1); }
.text-success-15 { color: oklch(var(--success-base) / 0.15); }
.text-success-20 { color: oklch(var(--success-base) / 0.2); }
.text-success-30 { color: oklch(var(--success-base) / 0.3); }
.text-success-40 { color: oklch(var(--success-base) / 0.4); }
.text-success-50 { color: oklch(var(--success-base) / 0.5); }
.text-success-60 { color: oklch(var(--success-base) / 0.6); }
.text-success-70 { color: oklch(var(--success-base) / 0.7); }
.text-success-80 { color: oklch(var(--success-base) / 0.8); }
.text-success-90 { color: oklch(var(--success-base) / 0.9); }
.text-success-100 { color: oklch(var(--success-base)); }

/* Warning Text Colors */
.text-warn { color: oklch(var(--warn-base)); }
.text-warn-1 { color: oklch(var(--warn-base) / 0.01); }
.text-warn-5 { color: oklch(var(--warn-base) / 0.05); }
.text-warn-10 { color: oklch(var(--warn-base) / 0.1); }
.text-warn-15 { color: oklch(var(--warn-base) / 0.15); }
.text-warn-20 { color: oklch(var(--warn-base) / 0.2); }
.text-warn-30 { color: oklch(var(--warn-base) / 0.3); }
.text-warn-40 { color: oklch(var(--warn-base) / 0.4); }
.text-warn-50 { color: oklch(var(--warn-base) / 0.5); }
.text-warn-60 { color: oklch(var(--warn-base) / 0.6); }
.text-warn-70 { color: oklch(var(--warn-base) / 0.7); }
.text-warn-80 { color: oklch(var(--warn-base) / 0.8); }
.text-warn-90 { color: oklch(var(--warn-base) / 0.9); }
.text-warn-100 { color: oklch(var(--warn-base)); }

/* Error Text Colors */
.text-error { color: oklch(var(--error-base)); }
.text-error-1 { color: oklch(var(--error-base) / 0.01); }
.text-error-5 { color: oklch(var(--error-base) / 0.05); }
.text-error-10 { color: oklch(var(--error-base) / 0.1); }
.text-error-15 { color: oklch(var(--error-base) / 0.15); }
.text-error-20 { color: oklch(var(--error-base) / 0.2); }
.text-error-30 { color: oklch(var(--error-base) / 0.3); }
.text-error-40 { color: oklch(var(--error-base) / 0.4); }
.text-error-50 { color: oklch(var(--error-base) / 0.5); }
.text-error-60 { color: oklch(var(--error-base) / 0.6); }
.text-error-70 { color: oklch(var(--error-base) / 0.7); }
.text-error-80 { color: oklch(var(--error-base) / 0.8); }
.text-error-90 { color: oklch(var(--error-base) / 0.9); }
.text-error-100 { color: oklch(var(--error-base)); }

/* Focus Ring Colors for Buttons */
.focus-visible\:ring-accent:focus-visible { --tw-ring-color: oklch(var(--accent-base) / 0.5) !important; }
.focus-visible\:ring-success:focus-visible { --tw-ring-color: oklch(var(--success-base) / 0.5) !important; }
.focus-visible\:ring-error:focus-visible { --tw-ring-color: oklch(var(--error-base) / 0.5) !important; }
.focus-visible\:ring-secondary:focus-visible { --tw-ring-color: oklch(var(--secondary) / 0.5) !important; }
.focus-visible\:ring-muted:focus-visible { --tw-ring-color: oklch(var(--muted) / 0.5) !important; }

/* Additional muted variants for interactive states */
.bg-muted\/60 { background-color: oklch(var(--muted) / 0.6) !important; }
.bg-muted\/70 { background-color: oklch(var(--muted) / 0.7) !important; }
.bg-muted\/80 { background-color: oklch(var(--muted) / 0.8) !important; }
.bg-muted\/130 { background-color: oklch(var(--muted) / 1.3) !important; }
.bg-muted\/140 { background-color: oklch(var(--muted) / 1.4) !important; }
.bg-muted\/150 { background-color: oklch(var(--muted) / 1.5) !important; }
.bg-muted\/160 { background-color: oklch(var(--muted) / 1.6) !important; }

/* Additional secondary variants for interactive states */
.bg-secondary\/60 { background-color: oklch(var(--secondary) / 0.6) !important; }
.bg-secondary\/70 { background-color: oklch(var(--secondary) / 0.7) !important; }
.bg-secondary\/130 { background-color: oklch(var(--secondary) / 1.3) !important; }
.bg-secondary\/150 { background-color: oklch(var(--secondary) / 1.5) !important; }

/* Theme-Aware Hover States */
/* These classes automatically get brighter in dark mode and darker in light mode */

/* Primary/Accent Hover States */
.hover-accent-theme {
  transition: background-color 0.2s ease;
}

.hover-accent-theme:hover {
  background-color: oklch(var(--accent-90)) !important;
}

[data-theme="dark"] .hover-accent-theme:hover {
  background-color: oklch(var(--accent-110)) !important;
}

/* Secondary/Muted Hover States */
.hover-secondary-theme {
  transition: background-color 0.2s ease;
}

.hover-secondary-theme:hover {
  background-color: oklch(var(--secondary) / 0.8) !important;
}

[data-theme="dark"] .hover-secondary-theme:hover {
  background-color: oklch(var(--muted) / 0.3) !important;
}

/* Ghost/Transparent Hover States */
.hover-ghost-theme {
  transition: background-color 0.2s ease;
}

.hover-ghost-theme:hover {
  background-color: oklch(var(--muted) / 0.08) !important;
}

[data-theme="dark"] .hover-ghost-theme:hover {
  background-color: oklch(var(--muted) / 0.15) !important;
}

/* Success Hover States */
.hover-success-theme {
  transition: background-color 0.2s ease;
}

.hover-success-theme:hover {
  background-color: oklch(var(--success-90)) !important;
}

[data-theme="dark"] .hover-success-theme:hover {
  background-color: oklch(var(--success-110)) !important;
}

/* Error/Destructive Hover States */
.hover-error-theme {
  transition: background-color 0.2s ease;
}

.hover-error-theme:hover {
  background-color: oklch(var(--error-90)) !important;
}

[data-theme="dark"] .hover-error-theme:hover {
  background-color: oklch(var(--error-110)) !important;
}

/* Full Opacity Background Colors - Already included in complete system above */

/* Border neutral alpha classes - very subtle borders for theme compatibility */
.border-neutral-alpha-3 {
  border-color: rgba(0, 0, 0, 0.08) !important;
}

.dark .border-neutral-alpha-3 {
  border-color: rgba(255, 255, 255, 0.08) !important;
}

.hover\:border-neutral-alpha-5:hover {
  border-color: rgba(0, 0, 0, 0.12) !important;
}

.dark .hover\:border-neutral-alpha-5:hover {
  border-color: rgba(255, 255, 255, 0.12) !important;
}

/* ==========================================================================
   Alpha Overlay System
   These classes add a semi-transparent overlay on top of the existing bg color.
   In light mode: black overlay (darkens)
   In dark mode: white overlay (brightens)
   ========================================================================== */

/* Hover alpha overlays - apply on top of any background */
.hover\:alpha-5:hover {
  background-image: linear-gradient(var(--alpha-5), var(--alpha-5));
}
.hover\:alpha-10:hover {
  background-image: linear-gradient(var(--alpha-10), var(--alpha-10));
}
.hover\:alpha-15:hover {
  background-image: linear-gradient(var(--alpha-15), var(--alpha-15));
}
.hover\:alpha-20:hover {
  background-image: linear-gradient(var(--alpha-20), var(--alpha-20));
}

/* Active alpha overlays */
.active\:alpha-10:active {
  background-image: linear-gradient(var(--alpha-10), var(--alpha-10));
}
.active\:alpha-15:active {
  background-image: linear-gradient(var(--alpha-15), var(--alpha-15));
}
.active\:alpha-20:active {
  background-image: linear-gradient(var(--alpha-20), var(--alpha-20));
}
.active\:alpha-25:active {
  background-image: linear-gradient(var(--alpha-25), var(--alpha-25));
}

/* ==========================================================================
   Semantic Alpha Overlays
   Color-matched overlays for success and error buttons.
   Creates a tinted hover effect that matches the button's color.
   ========================================================================== */

/* Success alpha overlays - green tint */
.hover\:success-alpha-10:hover {
  background-image: linear-gradient(var(--success-alpha-10), var(--success-alpha-10));
}
.active\:success-alpha-15:active {
  background-image: linear-gradient(var(--success-alpha-15), var(--success-alpha-15));
}

/* Error alpha overlays - red tint */
.hover\:error-alpha-10:hover {
  background-image: linear-gradient(var(--error-alpha-10), var(--error-alpha-10));
}
.active\:error-alpha-15:active {
  background-image: linear-gradient(var(--error-alpha-15), var(--error-alpha-15));
}

/* Dotted stroke for inactive supporter icons */
.stroke-dasharray-2 {
  stroke-dasharray: 2;
}

/* Force white text on dark backgrounds for better readability */
[style*="background-color"] {
  color-scheme: light dark;
}

/* Sticky tabs styling - integrates with banner-header-body layout system
 *
 * The sticky tabs system positions tabs below the header stack:
 * - Banners stack at top (--banner-stack-height CSS var)
 * - Header is fixed at top: var(--banner-stack-height)
 * - Sticky tabs are fixed at top: var(--banner-stack-height) + header height
 *
 * Use data-header-height attribute on the element to specify header height,
 * defaults to 56px (UserProfileHeader height).
 */
#profile-tabs-header {
  position: relative;
  z-index: calc(var(--z-fixed-header) - 1);
  transition: all 0.2s ease-in-out;
  /* CSS custom property for header height, can be overridden via data attribute or inline style */
  --sticky-tabs-header-height: 56px;
}

.sticky-tabs {
  position: fixed !important;
  /* Position below banners + header */
  top: calc(var(--banner-stack-height, 0px) + var(--sticky-tabs-header-height, 56px));
  left: 0;
  right: 0;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  background-color: oklch(var(--background));
  animation: slideDown 0.2s ease-out;
  z-index: calc(var(--z-fixed-header) - 1);
  /* Respect sidebar on desktop - use CSS variable set by JS */
  margin-left: var(--sidebar-width, 0px);
}

/* Desktop: respect sidebar width */
@media (min-width: 768px) {
  .sticky-tabs {
    left: var(--sidebar-width, 0px);
    margin-left: 0;
  }
}

.dark .sticky-tabs {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.group-tabs-header-sticky {
  position: relative !important;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  background-color: oklch(var(--background));
  z-index: var(--z-fixed-header);
  transition: opacity 0.2s ease-out;
}

/* Section header styling */
.section-header {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transition-property: box-shadow, background-color, backdrop-filter;
  visibility: visible !important;
  opacity: 1 !important;
  position: relative;
}

.section-header-sticky {
  position: fixed !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
  background-color: oklch(var(--background)) !important;
  backdrop-filter: blur(8px);
  z-index: var(--z-fixed-header) !important;
  margin: 0 !important;
  padding-left: 1.5rem !important;
  padding-right: 1.5rem !important;
  border-bottom: 1px solid oklch(var(--border)) !important;
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  opacity: 1;
}

.dark .section-header-sticky {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  background-color: oklch(var(--background) / 0.95) !important;
}

/* Smooth transition states for sticky headers */
.section-header-transitioning {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transition-property: transform, top, opacity, box-shadow, background-color;
}

/* Fade transitions for sticky headers - simpler and more reliable */
.section-header-fade-enter {
  opacity: 0 !important;
  transform: translateY(-8px) !important;
}

.section-header-fade-enter-active {
  opacity: 1 !important;
  transform: translateY(0) !important;
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.section-header-fade-exit {
  opacity: 1 !important;
  transform: translateY(0) !important;
}

.section-header-fade-exit-active {
  opacity: 0 !important;
  transform: translateY(-8px) !important;
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Fallback: Keep slide animations for compatibility but prefer fade */
.section-header-slide-up-enter {
  transform: translateY(100%);
}

.section-header-slide-up-enter-active {
  transform: translateY(0);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.section-header-slide-down-enter {
  transform: translateY(-100%);
}

.section-header-slide-down-enter-active {
  transform: translateY(0);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.section-header-slide-up-exit {
  transform: translateY(0);
}

.section-header-slide-up-exit-active {
  transform: translateY(-100%);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.section-header-slide-down-exit {
  transform: translateY(0);
}

.section-header-slide-down-exit-active {
  transform: translateY(100%);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Smooth position transition for sticky headers */
.section-header-position-transition {
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              top 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Sidebar smooth animations */
.sidebar-smooth-transition {
  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  /* REMOVED: transform: translateZ(0) - creates stacking context that breaks fixed positioning */
  will-change: width, transform, box-shadow;
  /* Ensure sidebar doesn't create shadows outside its boundaries */
  overflow: visible;
  /* REMOVED: contain: layout - creates stacking context that breaks fixed positioning */
  /* REMOVED: backface-visibility: hidden - creates stacking context that breaks fixed positioning */
  /* REMOVED: perspective: 1000px - creates stacking context that breaks fixed positioning */
}

/* Sidebar hover state improvements */
.sidebar-hover-overlay {
  transform: translateX(0);
  box-shadow: 4px 0 12px -4px rgba(0, 0, 0, 0.15);
}

/* Sidebar content fade transitions - simplified */
.sidebar-content-fade {
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Sidebar icon positioning - prevent layout shifts */
.sidebar-icon-container {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 1.25rem; /* 20px - match icon size */
  height: 1.25rem; /* 20px - match icon size */
  flex-shrink: 0;
  /* Smooth transition for positioning */
  transition: margin 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Clean sidebar button system - no !important rules needed */
.sidebar-nav-button {
  /* Smooth transitions for responsive behavior */
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  /* Hardware acceleration for smooth animations */
  transform: translateZ(0);
  backface-visibility: hidden;
  box-sizing: border-box;
}

/* Sidebar text animation */
.sidebar-text-container {
  overflow: hidden;
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              max-width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  /* Ensure text doesn't push icon around */
  margin-left: 0;
  padding-left: 0;
}

/* Enhanced shadow and backdrop when sticky - Reduced blur for subtlety */
.section-header-enhanced {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(8px);
  background-color: oklch(var(--background) / 0.95);
}

.dark .section-header-enhanced {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

/* Animation for lightbox fade in */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-fadeInFast {
  animation: fadeIn 0.2s ease-out;
}

/* Mobile navigation links alignment */
.mobile-nav-links {
  justify-content: center;
}

/* When the links overflow and require scrolling, align them to the left */
@media (max-width: 640px) {
  .overflow-x-auto:not([style*="overflow: hidden"]) .mobile-nav-links {
    justify-content: flex-start;
  }
}

/* Leaflet map styling */
.leaflet-container {
  background-color: oklch(var(--background)) !important;
  z-index: 1 !important;
}

.dark .leaflet-container {
  background-color: oklch(var(--background)) !important;
}

.leaflet-pane,
.leaflet-map-pane,
.leaflet-tile-pane,
.leaflet-overlay-pane,
.leaflet-shadow-pane,
.leaflet-marker-pane,
.leaflet-tooltip-pane,
.leaflet-popup-pane {
  z-index: auto !important;
}

.leaflet-control-container,
.leaflet-control {
  z-index: 10 !important;
}

/* Custom map marker icon - reset divIcon defaults */
.custom-marker-icon {
  background: transparent !important;
  border: none !important;
  width: 24px !important;
  height: 36px !important;
  margin: 0 !important;
  padding: 0 !important;
}
.custom-marker-icon svg {
  display: block;
  width: 24px;
  height: 36px;
}
/* Override Leaflet's default divIcon styles */
.leaflet-div-icon.custom-marker-icon {
  background: transparent !important;
  border: none !important;
}

/* Enable text selection on mobile devices while disabling native context menu */
@media (pointer: coarse) {
  /* Disable native touch callout menu but keep text selection enabled for content */
  * {
    -webkit-touch-callout: none;
  }
}

/* Mobile Bottom Navigation Styles */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

/*
 * MAIN CONTENT SPACING - MOVED TO fixed-layer.css
 *
 * Main content padding for floating elements is now centralized in:
 * app/styles/fixed-layer.css
 *
 * This ensures consistent spacing and avoids duplicate rules.
 */

/* Specific spacing for page content containers */
@media (max-width: 767px) {
  body {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .page-content,
  #combined-links-section {
    margin-bottom: 20px;
  }
}

/* Consistent page max-width for all pages */
.page-container {
  max-width: 1024px; /* 4xl equivalent */
  margin: 0 auto;
  width: 100%;
}

/*
 * LEGACY GLASSMORPHISM CLASSES - DEPRECATED
 *
 * These classes have been replaced by the FloatingCard component system.
 * Use FloatingCard variants instead:
 * - FloatingHeader (replaces liquid-glass)
 * - FloatingOverlay (replaces glass-overlay)
 * - FloatingPledge (replaces glass-pledge)
 *
 * TODO: Remove these classes after confirming no remaining usage
 */

/* Desktop Sidebar Navigation Alignment */
@media (min-width: 768px) {
  /* Ensure desktop sidebar navigation items maintain left-aligned text */
  .sidebar-text-container span {
    text-align: left !important;
  }

  /* Force left alignment for all desktop sidebar text labels */
  [data-variant="desktop-sidebar"] span {
    text-align: left !important;
  }
}

/* Standardized Navigation Hover States - Using proper specificity
 *
 * This approach uses CSS specificity instead of !important rules to ensure
 * hover states work properly across all navigation components.
 *
 * The utility classes (.nav-hover-state, .nav-active-state, .nav-selected-state)
 * provide a consistent way to apply standardized interaction states without
 * needing to override existing CSS with !important.
 */

/* Simplified navigation states - let utility classes handle the styling */

/* Utility classes for standardized navigation states */
.nav-hover-state:hover {
  background-color: oklch(var(--neutral-base) / 0.05);
}

.nav-active-state:active {
  background-color: oklch(var(--neutral-base) / 0.1);
}

.nav-selected-state {
  background-color: oklch(var(--accent-base) / 0.15);
  color: oklch(var(--accent-base));
}

/* Mobile Bottom Navigation Icon and Text Alignment */
@media (max-width: 767px) {
  /* Center-align mobile bottom navigation icons and text */
  .mobile-bottom-nav-button {
    text-align: center;
    align-items: center;
    justify-content: center;
  }

  .mobile-bottom-nav-button span {
    text-align: center;
  }

  /* Remove shadows only from specific sidebar elements - preserve all floating card shadows */
  .sidebar-hover-overlay,
  .sidebar-smooth-transition {
    box-shadow: none;
  }

  /* Only target actual sidebar components, never floating cards */
  [data-component="sidebar"]:not([data-floating-card]) {
    box-shadow: none;
  }

  /* Remove shadows only from actual sidebar elements, not floating cards */
  .fixed.z-\[100\].left-0:not([data-floating-card]) {
    box-shadow: none;
  }
}

/* Pending page link styling */
.pending-page {
  opacity: 0.7;
  position: relative;
}

.pending-page::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: currentColor;
  opacity: 0.5;
  animation: pending-pulse 2s ease-in-out infinite;
}

@keyframes pending-pulse {
  0%, 100% {
    opacity: 0.3;
  }
  50% {
    opacity: 0.7;
  }
}

/* Warning dot flash animation */
@keyframes warning-flash {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.4;
    transform: scale(0.9);
  }
}

/* Mobile Navigation Optimizations */
@layer components {
  /* Enhanced touch targets for mobile navigation */
  .mobile-nav-button {
    @apply touch-manipulation select-none;
    min-height: 44px; /* iOS recommended touch target */
    min-width: 44px;
  }

  /* Instant feedback animations */
  .nav-button-pressed {
    @apply scale-95 bg-primary/20;
    transition: all 75ms ease-out;
  }

  /* Page transition animations */
  .animate-fade-in {
    animation: fadeIn 200ms ease-out forwards;
  }

  .animate-fade-out {
    animation: fadeOut 200ms ease-out forwards;
  }

  .animate-slide-in-left {
    animation: slideInLeft 200ms ease-out forwards;
  }

  .animate-slide-in-right {
    animation: slideInRight 200ms ease-out forwards;
  }

  .animate-slide-out-left {
    animation: slideOutLeft 200ms ease-out forwards;
  }

  .animate-slide-out-right {
    animation: slideOutRight 200ms ease-out forwards;
  }
}

/* Additional keyframe animations for mobile navigation */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes slideInLeft {
  from { transform: translateX(-100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slideInRight {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOutLeft {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(-100%); opacity: 0; }
}

@keyframes slideOutRight {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(100%); opacity: 0; }
}

/* Drawer animations with bouncy effect */
@keyframes drawer-slide-up {
  0% {
    transform: translateY(100%);
    opacity: 0;
  }
  70% {
    transform: translateY(-2%);
    opacity: 1;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes drawer-slide-down {
  0% {
    transform: translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateY(100%);
    opacity: 0;
  }
}

@keyframes slideDown {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Side drawer animations */
@keyframes slide-in-from-right {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes slide-out-to-right {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(100%);
  }
}

@keyframes slide-in-from-left {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes slide-out-to-left {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-100%);
  }
}

/* LEGACY: Save header body class removed - now handled by BannerProvider
 * The save banner is integrated into the unified banner stack system.
 * All components should use var(--banner-stack-height) for positioning.
 */

/* ============================================
   Landing Page Animated Gradient Blobs
   GPU-accelerated, subtle background animations
   ============================================ */

/* Blob container - fixed behind content */
.landing-blobs-container {
  position: fixed;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
  z-index: 0;
}

/* Individual blob styling - large, blurred, visible */
.landing-blob {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  opacity: 0.25;
  will-change: transform;
  /* Use accent color with transparency - use individual variables for proper OKLCH syntax */
  background: oklch(var(--accent-l) var(--accent-c) var(--accent-h) / 0.7);
  transition: background 0.3s ease-out;
}

/* Dark mode - slightly more visible blobs */
.dark .landing-blob {
  opacity: 0.20;
  filter: blur(100px);
}

/* Blob 1 - Top left, largest */
.landing-blob-1 {
  width: 60vw;
  height: 60vw;
  max-width: 800px;
  max-height: 800px;
  top: -20%;
  left: -15%;
  animation: blob-float-1 12s ease-in-out infinite;
}

/* Blob 2 - Bottom right */
.landing-blob-2 {
  width: 50vw;
  height: 50vw;
  max-width: 700px;
  max-height: 700px;
  bottom: -10%;
  right: -10%;
  animation: blob-float-2 15s ease-in-out infinite;
  animation-delay: -5s;
}

/* Blob 3 - Center, smaller accent */
.landing-blob-3 {
  width: 40vw;
  height: 40vw;
  max-width: 500px;
  max-height: 500px;
  top: 30%;
  left: 50%;
  transform: translateX(-50%);
  animation: blob-float-3 10s ease-in-out infinite;
  animation-delay: -3s;
  opacity: 0.15;
}

/* Blob 4 - Bottom left accent */
.landing-blob-4 {
  width: 35vw;
  height: 35vw;
  max-width: 450px;
  max-height: 450px;
  bottom: 20%;
  left: -5%;
  animation: blob-float-4 18s ease-in-out infinite;
  animation-delay: -8s;
  opacity: 0.18;
}

/* GPU-accelerated keyframe animations using transforms only */
@keyframes blob-float-1 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  25% {
    transform: translate(5%, 10%) scale(1.05);
  }
  50% {
    transform: translate(10%, 5%) scale(0.95);
  }
  75% {
    transform: translate(3%, -5%) scale(1.02);
  }
}

@keyframes blob-float-2 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  25% {
    transform: translate(-8%, -5%) scale(0.97);
  }
  50% {
    transform: translate(-5%, 8%) scale(1.03);
  }
  75% {
    transform: translate(3%, 3%) scale(0.98);
  }
}

@keyframes blob-float-3 {
  0%, 100% {
    transform: translateX(-50%) scale(1);
  }
  33% {
    transform: translate(-45%, 10%) scale(1.08);
  }
  66% {
    transform: translate(-55%, -8%) scale(0.92);
  }
}

@keyframes blob-float-4 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  20% {
    transform: translate(10%, -5%) scale(1.04);
  }
  40% {
    transform: translate(5%, 10%) scale(0.96);
  }
  60% {
    transform: translate(-5%, 5%) scale(1.02);
  }
  80% {
    transform: translate(3%, -8%) scale(0.98);
  }
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .landing-blob {
    animation: none !important;
  }
}
